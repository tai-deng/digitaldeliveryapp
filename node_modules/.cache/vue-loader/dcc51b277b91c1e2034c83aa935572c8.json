{"remainingRequest":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Public\\软件\\app\\src\\components\\issue\\purchase\\purchase.vue?vue&type=style&index=1&lang=css&","dependencies":[{"path":"C:\\Users\\Public\\软件\\app\\src\\components\\issue\\purchase\\purchase.vue","mtime":1557881065085},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\css-loader\\index.js","mtime":1552270042900},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1552270044128},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\postcss-loader\\src\\index.js","mtime":1552270043529},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1552270044128}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.container-purchase .van-picker__toolbar {\n  line-height: 60px !important;\n  height: 60px !important;\n}\n.container-purchase .el-table__empty-text {\n  font-size: 26px;\n}\n/* 顶部表头 */\n.container-purchase .van-nav-bar .van-nav-bar__title {\n  font-size: 36px;\n}\n\n.container-purchase .container_purchase_hidden .el-checkbox__inner {\n  /* background-color:rgba(238,238,238,1);\n  border-color: rgba(238,238,238,1);\n  border: 1px solid #409eff;\n  width: 22px;\n  height: 22px;\n  border-radius: 2px; */\n}\n.container-purchase .container_purchase_hidden .is-checked {\n  /* background-color: #409eff;\n  border-color: #409eff; */\n}\n.container-purchase .container_purchase_hidden .is-indeterminate {\n  /* background-color:rgba(238,238,238,1);\n  border-color: rgba(238,238,238,1);\n  border: 1px solid #409eff;\n  width: 22px;\n  height: 22px;\n  border-radius: 2px; */\n}\n.container-purchase .van-nav-bar {\n  height: 88px;\n  line-height: 88px;\n}\n/* 单选框--样式更改--改为行内块元素 */\n.container_purchase_header_type .van-radio-group .van-radio {\n  display: block;\n  float: left;\n  width: 33%;\n}\n.container_purchase_header_type .van-radio-group {\n  display: block;\n  float: left;\n  width: 85%;\n}\n.container_purchase_header_check .van-radio-group .van-radio {\n  display: block;\n  float: left;\n  width: 50%;\n}\n.container_purchase_header_check .van-radio-group {\n  display: block;\n  float: left;\n  width: 77%;\n}\n/* 表格样式更改 */\n.container-purchase .container_purchase_hidden .el-table .cell {\n  height: 60px;\n  line-height: 60px;\n  font-size: 30px;\n}\n.container-purchase .container_purchase_hidden .el-table .table_input {\n  width: 120px;\n  height: 60px;\n  background: rgba(238, 238, 238, 1);\n  border-radius: 8px;\n  padding-left: 10px;\n  border: 1px solid rgba(229, 229, 229, 1);\n}\n",{"version":3,"sources":["purchase.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"purchase.vue","sourceRoot":"src/components/issue/purchase","sourcesContent":["<template>\n  <div class=\"container-purchase\">\n    <template v-if=\"isFlow\">\n      <!-- purchase物资采购 -->\n      <van-nav-bar title=\"物资采购\" @click-left=\"goBack\" fixed :border=\"true\" :z-index=\"100\">\n        <span class=\"el-icon-arrow-left fontsize\" slot=\"left\"></span>\n      </van-nav-bar>\n      <div class=\"container_purchase_header\">\n        <div class=\"container_purchase_header_type\">\n          <span>类型：</span>\n          <van-radio-group v-model=\"radioType\">\n            <van-radio name=\"1\">按进度</van-radio>\n            <van-radio name=\"2\" v-if=\"listtype!==0 && listtype!==1 && listtype!==2\">按模型构建</van-radio>\n            <!--  -->\n            <van-radio\n              name=\"3\"\n              style=\"padding-left:20px;box-sizing:border-box\"\n              v-if=\"listtype!==0 && listtype!==3\"\n            >按清单</van-radio>\n          </van-radio-group>\n        </div>\n        <div v-if=\"radioType==1\" class=\"container_purchase_header_check\">\n          <span>审核类型：</span>\n          <van-radio-group v-model=\"subs.IsApprove\">\n            <van-radio name=\"1\">审核</van-radio>\n            <van-radio name=\"2\">无需审核</van-radio>\n          </van-radio-group>\n        </div>\n      </div>\n\n      <div class=\"container_purchase_body_select\">\n        <!-- v-if=\"radioType==1 || radioType==2\" -->\n        <div class=\"container_purchase_list_class container_purchase_border\">\n          <div>楼栋：</div>\n          <div @click=\"getBuildingNumber\">\n            {{options.buildname}}\n            <van-icon name=\"arrow\" class=\"container_purchase_list_span\"/>\n          </div>\n        </div>\n        <div v-if=\"radioType==1\" class=\"container_purchase_list container_purchase_border\">\n          <div>开始时间：</div>\n          <div @click=\"beginTimeSelect\">\n            {{options.starttime}}\n            <van-icon name=\"arrow\" class=\"container_purchase_list_span\"/>\n          </div>\n        </div>\n        <div v-if=\"radioType==1\" class=\"container_purchase_list\">\n          <div>结束时间：</div>\n          <div @click=\"lastTimeSelect\">\n            {{options.endtime}}\n            <van-icon name=\"arrow\" class=\"container_purchase_list_span\"/>\n          </div>\n        </div>\n        <div v-if=\"radioType==3\" class=\"container_purchase_list container_purchase_border\">\n          <div>项目名称：</div>\n          <div @click=\"projectNameSelect\">\n            {{options.projectname}}\n            <van-icon name=\"arrow\" class=\"container_purchase_list_span\"/>\n          </div>\n        </div>\n        <div v-if=\"radioType==3\" @click=\"addProjectName\" class=\"container_purchase_add_list\">\n          <img src=\"../../../assets/imgs/add_purchase.png\" alt>添加项目名称\n        </div>\n      </div>\n      <div class=\"container_purchase_hidden\">\n        <el-table\n          style=\"width:100%;font-size:28px;box-sizing:border-box;\"\n          :data=\"buyThingTable\"\n          :header-cell-style=\"{'background-color':'#5A92FF','color':'#ffffff'}\"\n        >\n          <el-table-column width=\"40\" align=\"center\" label=\"操作\">\n            <template slot-scope=\"scope\">\n              <el-checkbox\n                class=\"table-checkbox\"\n                size=\"medium\"\n                v-model=\"buyThingTable[scope.$index].isSel\"\n              ></el-checkbox>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"TaskName\" label=\"任务名称\" align=\"center\"></el-table-column>\n          <el-table-column prop=\"ResourceName\" label=\"物资名称\" align=\"center\"></el-table-column>\n          <el-table-column prop=\"AdjustBOQ\" label=\"施工预算量\" align=\"center\"></el-table-column>\n          <el-table-column prop=\"PurchaseNum\" label=\"已采购\" align=\"center\"></el-table-column>\n          <el-table-column label=\"本次采购\" align=\"center\">\n            <template slot-scope=\"scope\">\n              <input\n                type=\"number\"\n                :placeholder=\"buyThingTable[scope.$index].Unit\"\n                v-model=\"buyThingTable[scope.$index].ThisPurchaseNum\"\n                name=\"num\"\n                class=\"table_input\"\n              >\n            </template>\n          </el-table-column>\n        </el-table>\n        <el-pagination\n          :total=\"totalNum\"\n          @current-change=\"curChange\"\n          :page-size=\"paging.rows\"\n          :current-page.sync=\"paging.page\"\n          background\n          layout=\"prev, pager, next\"\n          class=\"pagina\"\n        ></el-pagination>\n      </div>\n      <div class=\"purchase_addTime\">\n        <div>需用时间：</div>\n        <div @click=\"witeTime\">\n          {{subs.DemandTime}}\n          <van-icon name=\"arrow\" class=\"container_purchase_list_span\"/>\n        </div>\n      </div>\n      <div class=\"project-title flex-between\">\n        工作流程\n        <h3 v-if=\"done\" class=\"project-title-r\" @click=\"isFlow=false\">重置</h3>\n      </div>\n      <div class=\"flow-content\" v-if=\"done\">\n        <div class=\"flow-content-item flex\" v-for=\"(item,index) in listFlow\" :key=\"index\">\n          <div class=\"flow-content-item-l flex-row\">\n            {{index+1}}\n            <div class=\"line\" v-if=\"index !== listFlow.length-1\"></div>\n          </div>\n\n          <div class=\"flow-content-item-c flex\">\n            <div\n              class=\"flow-content-item-c-l flex-row flow-content-item-border\"\n            >{{item.Person.name}}</div>\n            <div class=\"flow-content-item-c-l flex-row flow-content-item-border\">{{item.OrgId.name}}</div>\n            <div class=\"flow-content-item-c-l flex-row\">{{item.DepId.name}}</div>\n            <div class=\"flow-content-item-c-triangle\">\n              <div class=\"flow-content-item-c-triangle-b\"></div>\n            </div>\n          </div>\n\n          <!-- <div class=\"flow-content-item-r\" @click=\"onDelete(index)\">\n          <img src=\"../../user/user_assets/imgs/delete.png\">\n          </div>-->\n        </div>\n      </div>\n      <div class=\"flow-work flex\" v-else>\n        <div class=\"flow-work-c flex-column-center-b\" @click=\"isFlow=false\">\n          <img src=\"../../user/user_assets/imgs/add.png\">\n          新增\n        </div>\n      </div>\n\n      <div class=\"purchase_btn\">\n        <button class=\"purchase_button\" @click=\"searchAllTable()\">确认提交</button>\n      </div>\n\n      <!-- 上拉菜单--每次点击事件-传入可以选择的值-然后再把值传入 -->\n      <van-actionsheet v-model=\"showSelect\" :actions=\"actions\" item-height=\"60\" @select=\"onSelect\"/>\n      <!-- 时间选择 -->\n      <van-popup v-model=\"timeShow\" position=\"bottom\">\n        <van-datetime-picker\n          v-model=\"currentDate\"\n          @confirm=\"closeTime\"\n          @cancel=\"cancel\"\n          :formatter=\"formatter\"\n          type=\"date\"\n        />\n      </van-popup>\n    </template>\n    <template v-else>\n      <flowComp @onDone=\"onDone\" :origin=\"1\"></flowComp>\n    </template>\n  </div>\n</template>\n\n<script type='textecmascript-6'>\nimport flowComp from \"../../user/addFlow\";\n\nimport {\n  getListType,\n  getBuildList,\n  getPurchaseInfo,\n  sponsorPurchase,\n  getProjectNames\n} from \"../../../assets/js/scopeManage.js\";\n\nexport default {\n  components: { flowComp },\n  data() {\n    return {\n      radioType: \"1\", //类型\n      radioCheck: \"1\", //审核类型\n      getNumber: \"请选择采购批次\",\n      showNumber: false, //数字输入框\n      showSelect: false, //上拉菜单--显示隐藏\n      actions: [], //上拉菜单--数组集合\n      selectNumber: 1, //为1的时候是批次，为2的时候是楼栋\n      getBuilding: \"请选择楼栋\",\n      timeShow: false, //时间选择\n      timenumber: 1, //为1的时候是开始时间，为2的时候是结束时间，为3的时候为需要时间\n      beginTime: \"请选择开始时间\",\n      lastTime: \"请选择结束时间\",\n      buyThing: \"请选择采购列表\",\n      currentDate: new Date(),\n      wantTime: \"请选择需求时间\",\n      projectName: \"项目名称\",\n      projectNumber: \"项目编码\",\n\n      projectid: localStorage.getItem(\"projectid\"),\n      userID: localStorage.getItem(\"userId\"), //用户ID\n      listtype: 2, // 0为未导入 1为施工图清单 2.全费用清单 3.构件生成清单\n      labelText: \"\", // 资源名称 项目名称\n      BuildNameList: [], // 楼栋下拉\n      totalNum: 0,\n      paging: { page: 1, rows: 5 }, // [采购列表分页]\n      done: false,\n      isFlow: true,\n      projectNameList: [],\n\n      options: {\n        // 获取table 参数\n        buildname: \"请选择楼栋\",\n        starttime: \"请选择开始时间\",\n        endtime: \"请选择结束时间\",\n        projectid: \"\",\n        querytype: \"\",\n        listtype: \"\",\n        projectname: \"请选择项目名称\",\n        elementids: \"\",\n        page: \"\", // 第几也页\n        rows: \"\" // 每页行数\n      },\n      subs: {\n        IsApprove: \"1\",\n        DemandTime: \"请选择需求时间\"\n      },\n      buyThingTable: [], // table\n      listFlow: [], // 工作流列表\n      schedule: {\n        list: [],\n        querytype: \"1\",\n        listItems: [],\n        page: 1,\n        rows: 5\n      }, // 进度\n\n      mode: {\n        list: [],\n        querytype: \"2\",\n        page: 1,\n        rows: 5\n      }, // 模型\n\n      bill: {\n        list: [],\n        querytype: \"3\",\n        page: 1,\n        rows: 5\n      } // 清单\n    };\n  },\n  created() {\n    // 获取清单类型\n    getListType(this);\n    // 获取项目名称\n    getProjectNames(this, res => {\n      this.projectNameList = res.map(item => {\n        return {\n          name: item.text,\n          id: item.id\n        };\n      });\n    });\n    // 获取楼栋\n    getBuildList(this, res => {\n      this.BuildNameList = res.map(item => {\n        return {\n          name: item.text,\n          id: item.id\n        };\n      });\n      this.BuildNameList.splice(0, 1);\n    });\n  },\n  methods: {\n    onDone(d) {\n      this.done = true;\n      this.isFlow = true;\n      this.listFlow = d;\n    },\n    // 分页\n    curChange(d) {\n      this.paging.page = d;\n      let radioType = this.radioType;\n      if (radioType == 1) {\n        this.schedule.page = d;\n        let ls = this.buyThingTable.filter(res => {\n          return res.ThisPurchaseNum !== \"\";\n        });\n        this.schedule.listItems = this.arrHandle(this.schedule.listItems, ls);\n      } else if (radioType == 2) {\n        this.mode.page = d;\n      } else if (radioType == 3) {\n        this.bill.page = d;\n      }\n      this.getTableDate();\n    },\n    // 获取筛选的表格内容\n    getTableDate() {\n      let radioType = this.radioType;\n      let flag = false;\n      if (radioType == 1) {\n        if (\n          this.options.buildname !== \"请选择楼栋\" &&\n          this.options.starttime !== \"请选择开始时间\" &&\n          this.options.endtime !== \"请选择结束时间\"\n        ) {\n          flag = true;\n        } else {\n          flag = false;\n        }\n        if (this.schedule.list.length > 0) {\n        }\n      } else if (radioType == 2) {\n      } else if (radioType == 3) {\n        if (\n          this.options.buildname !== \"请选择楼栋\" &&\n          this.options.projectname !== \"请选择项目名称\"\n        ) {\n          flag = true;\n        } else {\n          flag = false;\n        }\n      }\n\n      if (!flag) return;\n      this.buyThingTable = [];\n      let par = {};\n      par.projectid = this.projectid;\n      par.listtype = this.listtype;\n\n      if (radioType == 1) {\n        par.querytype = this.schedule.querytype;\n        par.buildname = this.options.buildname;\n        par.starttime = this.options.starttime;\n        par.endtime = this.options.endtime;\n        par.page = this.schedule.page;\n        par.rows = this.paging.rows;\n      }\n      if (radioType == 3) {\n        par.querytype = this.bill.querytype;\n        par.buildname = this.options.buildname;\n        par.projectname = this.options.projectname;\n        par.page = this.bill.page;\n        par.rows = this.paging.rows;\n      }\n      // console.log(par, this.options, radioType);\n      getPurchaseInfo(this, par, res => {\n        let data = res.Detiel.map(item => {\n          return Object.assign(item, {\n            ThisPurchaseNum: \"\",\n            Floor: this.options.buildname,\n            ProjectID: this.projectid,\n            isSel: false\n          });\n        });\n        this.totalNum = Number(res.Count);\n        if (radioType == 1) {\n          this.schedule.list = data;\n          this.buyThingTable = this.schedule.list;\n        } else if (radioType == 2) {\n          this.mode.list = data;\n          this.buyThingTable = this.mode.list;\n        } else if (radioType == 3) {\n          this.bill.list = data;\n          this.buyThingTable = this.bill.list;\n        }\n      });\n    },\n    //点击上拉菜单的确定的时候\n    onSelect(item) {\n      if (this.selectNumber == 1) {\n        this.getNumber = item.name; //采购批次\n      } else if (this.selectNumber == 2) {\n        this.options.buildname = item.name; //楼栋\n      } else if (this.selectNumber == 3) {\n        this.buyThing = item.name; //采购列表\n      } else if (this.selectNumber == 4) {\n        this.projectNumber = item.name; //项目编码\n      } else if (this.selectNumber == 5) {\n        this.options.projectname = item.name; //项目名称\n        console.log(this.options.projectname);\n      }\n      this.showSelect = false;\n    },\n    //选择楼栋\n    getBuildingNumber() {\n      this.showSelect = true;\n      this.selectNumber = 2;\n      this.actions = this.BuildNameList;\n    },\n    beginTimeSelect() {\n      this.timeShow = true;\n      this.timenumber = 1;\n    },\n    lastTimeSelect() {\n      this.timeShow = true;\n      this.timenumber = 2;\n    },\n    //时间上拉菜单上的--确定\n    closeTime(value) {\n      if (this.timenumber == \"1\") {\n        this.options.starttime =\n          value.getFullYear() +\n          \"/\" +\n          (value.getMonth() + 1) +\n          \"/\" +\n          value.getDate();\n      } else if (this.timenumber == \"2\") {\n        this.options.endtime =\n          value.getFullYear() +\n          \"/\" +\n          (value.getMonth() + 1) +\n          \"/\" +\n          value.getDate();\n      } else if (this.timenumber == \"3\") {\n        this.subs.DemandTime =\n          value.getFullYear() +\n          \"/\" +\n          (value.getMonth() + 1) +\n          \"/\" +\n          value.getDate();\n      }\n      this.timeShow = false;\n    },\n    //时间上拉菜单上的--取消\n    cancel() {\n      this.timeShow = false;\n    },\n    formatter(type, value) {\n      if (type === \"year\") {\n        return `${value}年`;\n      } else if (type === \"month\") {\n        return `${value}月`;\n      } else if (type === \"day\") {\n        return `${value}日`;\n      }\n      return value;\n    },\n    //需要时间\n    witeTime() {\n      this.timeShow = true;\n      this.timenumber = 3;\n    },\n    //项目编码选择\n    projectSelect() {\n      this.showSelect = true;\n      this.selectNumber = 4;\n      this.actions = [\n        { value: \"1\", name: \"项目编码01\" },\n        { value: \"2\", name: \"项目编码02\" },\n        { value: \"3\", name: \"项目编码03\" },\n        { value: \"4\", name: \"项目编码04\" },\n        { value: \"5\", name: \"项目编码05\" }\n      ];\n    },\n    //项目名称选择\n    projectNameSelect() {\n      this.showSelect = true;\n      this.selectNumber = 5;\n      this.actions = this.projectNameList;\n    },\n    //点击添加--项目名称\n    addProjectName() {\n      this.getTableDate();\n    },\n    //点击确认提交按钮\n    searchAllTable() {\n      // this.$router.push({ path: \"./modules/purchaseTable\" });\n      let radioType = this.radioType;\n      let flag = false;\n      let listItems = [];\n      if (!this.isJudge()) return;\n      if (radioType == 1) {\n        let ls = this.buyThingTable.filter(res => {\n          return res.ThisPurchaseNum !== \"\";\n        });\n        listItems = this.arrHandle(this.schedule.listItems, ls);\n      } else if (radioType == 2) {\n      } else if (radioType == 3) {\n      }\n\n      if (this.listFlow.length == 0) {\n        this.$message({\n          type: \"warning\",\n          message: \"工作流程不能为空！\"\n        });\n        return;\n      }\n      let listFlow = this.listFlow.map(item => {\n        return {\n          Priority: item.Priority,\n          OrgId: item.OrgId.id,\n          DepId: item.DepId.id,\n          Person: item.Person.id,\n          Status: item.Status\n        };\n      });\n\n      let par = {};\n      // if (radioType == 1) {\n        par.IsApprove = this.subs.IsApprove;\n        par.Type = radioType;\n        par.StartTime = this.options.starttime;\n        par.EndTime = this.options.endtime;\n        par.DemandTime = this.subs.DemandTime;\n        par.ApplyPerson = this.userID;\n        par.Status = 0;\n        par.listFlow = listFlow;\n        par.listItems = listItems;\n      // }\n      console.log(par, this.subs, radioType);\n      sponsorPurchase(\n        this,\n        { projectid: this.projectid, userid: this.userID },\n        par\n      );\n    },\n    goBack() {\n      this.$router.push({ path: \"/#\" });\n    },\n    arrHandle(arr1, arr2) {\n      var arr = arr1.concat();\n      for (var i = 0; i < arr2.length; i++) {\n        arr.indexOf(arr2[i]) === -1 ? arr.push(arr2[i]) : 0;\n      }\n      return arr;\n    },\n    isJudge() {\n      if (this.options.buildname == \"请选择楼栋\") {\n        this.$message({\n          type: \"warning\",\n          message: \"请选择楼栋\",\n          center: \"true\"\n        });\n        return false;\n      }\n      if (this.radioType == 1 && this.options.starttime == \"请选择开始时间\") {\n        this.$message({\n          type: \"warning\",\n          message: \"请选择开始时间\",\n          center: \"true\"\n        });\n        return false;\n      }\n      if (this.radioType == 1 && this.options.endtime == \"请选择结束时间\") {\n        this.$message({\n          type: \"warning\",\n          message: \"请选择结束时间\",\n          center: \"true\"\n        });\n        return false;\n      }\n      if (this.radioType == 1 && this.listFlow.length < 4) {\n        this.$message({\n          type: \"warning\",\n          message: \"该流程为4个人\",\n          center: \"true\"\n        });\n        return false;\n      }\n      if (this.subs.DemandTime == \"请选择需求时间\") {\n        this.$message({\n          type: \"warning\",\n          message: \"请选择需求时间\",\n          center: \"true\"\n        });\n        return false;\n      }\n      if (this.radioType == 3 && this.options.projectname == \"请选择项目名称\") {\n        this.$message({\n          type: \"warning\",\n          message: \"请选择需求时间\",\n          center: \"true\"\n        });\n        return false;\n      }\n      return true;\n    }\n  },\n  watch: {\n    // radioType\n    radioType(val) {\n      this.options = {\n        // 获取table 参数\n        buildname: \"请选择楼栋\",\n        starttime: \"请选择开始时间\",\n        endtime: \"请选择结束时间\",\n        projectid: \"\",\n        querytype: \"\",\n        listtype: \"\",\n        projectname: \"请选择项目名称\",\n        elementids: \"\",\n        page: \"\", // 第几也页\n        rows: \"\" // 每页行数\n      };\n      this.subs.DemandTime = \"请选择需求时间\";\n      this.buyThingTable = [];\n    },\n    // table 参数\n    options: {\n      handler(val, old) {\n        if (this.radioType == 1) {\n          this.getTableDate();\n        }\n        if (val.buildname != \"请选择楼栋\" && this.radioType == 3) {\n          this.projectNameList = [];\n          getProjectNames(this, res => {\n            this.projectNameList = res.map(item => {\n              return {\n                name: item.text,\n                id: item.id\n              };\n            });\n          });\n        }\n      },\n      deep: true\n    }\n  }\n};\n</script>\n<style lang='stylus' scoped rel='stylesheet/stylus'>\n.container-purchase .van-actionsheet__item {\n  line-height: 80px !important;\n  height: 80px !important;\n}\n\n.container-purchase .pagina {\n  text-align: center;\n  margin-top: 10px;\n}\n\n.container-purchase {\n  width: 100%;\n  min-height: calc(100vh - 88px) !important;\n  background-color: #F6F8FA;\n  font-size: 30px;\n\n  .flex {\n    display: flex;\n    align-items: center;\n  }\n\n  .flex-row {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .flex-between {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n\n  .project-title {\n    font-size: 28px;\n    font-family: SourceHanSansCN-Medium;\n    font-weight: 500;\n    color: rgba(51, 51, 51, 1);\n    height: 1.18rem;\n    margin: 0 0.32rem;\n  }\n\n  .flow-work {\n    font-size: 26px;\n    font-family: SourceHanSansCN-Regular;\n    font-weight: 400;\n    color: rgba(153, 153, 153, 1);\n    height: 2.13rem;\n    background: rgba(255, 255, 255, 1);\n    padding: 0 0.32rem;\n\n    img {\n      width: 0.8rem;\n      height: 0.76rem;\n      display: block;\n      margin-bottom: 0.16rem;\n    }\n  }\n\n  .project-title-r {\n    height: 1.18rem;\n    font-size: 28px;\n    font-family: SourceHanSansCN-Regular;\n    font-weight: 400;\n    color: rgba(90, 146, 255, 1);\n    line-height: 1.18rem;\n  }\n\n  .flow-content {\n    padding: 0 0.32rem;\n    background: rgba(246, 248, 250, 1);\n\n    .flow-content-item {\n      margin-top: 0.4rem;\n\n      .flow-content-item-l {\n        width: 0.53rem;\n        height: 0.53rem;\n        border-radius: 50%;\n        background: rgba(59, 72, 95, 1);\n        font-size: 28px;\n        font-family: SourceHanSansCN-Medium;\n        font-weight: 500;\n        color: rgba(255, 255, 255, 1);\n        position: relative;\n        margin-right: 0.55rem;\n\n        .line {\n          position: absolute;\n          top: 0.64rem;\n          left: 0.23rem;\n          width: 0.05rem;\n          height: 0.83rem;\n          background-color: #979797;\n        }\n      }\n\n      .flow-content-item-c {\n        flex: 1;\n        font-size: 28px;\n        font-family: SourceHanSansCN-Medium;\n        font-weight: 500;\n        color: rgba(51, 51, 51, 1);\n        background: rgba(255, 255, 255, 1);\n        box-shadow: 0px 0.0133rem 0.11rem 0px rgba(220, 226, 237, 1);\n        border-radius: 0.0532rem;\n        height: 1.18rem;\n        position: relative;\n\n        .flow-content-item-c-triangle {\n          top: 0;\n          left: -0.3rem;\n          position: absolute;\n          height: 1.18rem;\n          width: 0.3rem;\n          overflow: hidden;\n\n          .flow-content-item-c-triangle-b {\n            position: absolute;\n            transform: rotate(45deg) !important;\n            -ms-transform: rotate(45deg) !important;\n            -moz-transform: rotate(45deg) !important;\n            -webkit-transform: rotate(45deg) !important;\n            -o-transform: rotate(45deg) !important;\n            background: rgba(255, 255, 255, 1);\n            box-shadow: 0px 0.0133rem 0.11rem 0px rgba(220, 226, 237, 1);\n            height: 0.4rem;\n            width: 0.4rem;\n            top: 0.39rem;\n            left: 0.15rem;\n          }\n        }\n\n        .flow-content-item-c-l {\n          flex: 1;\n        }\n\n        .flow-content-item-border {\n          border-right: 0.03rem dashed #979797;\n        }\n      }\n\n      .flow-content-item-r {\n        margin-left: 0.56rem;\n\n        img {\n          width: 0.46rem;\n          height: 0.46rem;\n          display: block;\n        }\n      }\n    }\n  }\n\n  // 头部单选\n  .container_purchase_header {\n    width: 100%;\n    margin-top: 88px;\n  }\n\n  .container_purchase_header_type {\n    height: 88px;\n    line-height: 88px;\n    border-bottom: 2px solid #EDEDED;\n    box-sizing: border-box;\n    background-color: #ffffff;\n    padding: 0px 20px;\n  }\n\n  .container_purchase_header_type>span {\n    display: inline-block;\n    float: left;\n    width: 15%;\n  }\n\n  .container_purchase_header_check {\n    height: 88px;\n    line-height: 88px;\n    box-sizing: border-box;\n    background-color: #ffffff;\n    padding: 0px 20px;\n  }\n\n  .container_purchase_header_check>span {\n    display: inline-block;\n    float: left;\n    width: 22%;\n  }\n\n  // 下拉菜单\n  .container_purchase_body_select {\n    width: 100%;\n    margin-top: 20px;\n  }\n\n  .container_purchase_list {\n    height: 88px;\n    line-height: 88px;\n    font-size: 30px;\n    box-sizing: border-box;\n    background-color: #ffffff;\n    padding: 0px 20px;\n  }\n\n  .container_purchase_border {\n    border-bottom: 2px solid #EDEDED;\n  }\n\n  .container_purchase_list>div:first-child {\n    width: 24%;\n    display: inline-block;\n    float: left;\n  }\n\n  .container_purchase_list>div:last-child {\n    width: 76%;\n    display: inline-block;\n    float: left;\n    padding-left: 20px;\n    box-sizing: border-box;\n    color: #A7A7A7;\n  }\n\n  .container_purchase_list_class {\n    height: 88px;\n    line-height: 88px;\n    font-size: 30px;\n    padding: 0px 20px;\n    box-sizing: border-box;\n    background-color: #ffffff;\n  }\n\n  .container_purchase_list_class>div:first-child {\n    width: 18%;\n    display: inline-block;\n    float: left;\n  }\n\n  .container_purchase_list_class>div:last-child {\n    width: 82%;\n    display: inline-block;\n    float: left;\n    color: #A7A7A7;\n  }\n\n  .container_purchase_list_span {\n    float: right;\n    margin-right: 20px;\n    line-height: 88px;\n  }\n\n  .container_purchase_table_select {\n    width: 70%;\n    box-sizing: border-box;\n    background-color: #F6F8FA;\n    padding: 0px 20px;\n    height: 90px;\n    line-height: 90px;\n  }\n\n  .container_purchase_table_select>div:first-child {\n    width: 40%;\n    display: inline-block;\n    float: left;\n  }\n\n  .container_purchase_table_select>div:last-child {\n    width: 50%;\n    display: inline-block;\n    float: left;\n    color: #A7A7A7;\n  }\n\n  .container_purchase_hidden {\n    width: 100%;\n    overflow: hidden;\n    // height: 400px;\n    box-sizing: border-box;\n  }\n\n  .purchase_addTime {\n    margin-top: 20px;\n    width: 100%;\n    height: 88px;\n    line-height: 88px;\n    font-size: 30px;\n    padding: 0px 20px;\n    box-sizing: border-box;\n    background-color: #ffffff;\n  }\n\n  .purchase_addTime>div:first-child {\n    width: 24%;\n    display: inline-block;\n    float: left;\n  }\n\n  .purchase_addTime>div:last-child {\n    width: 76%;\n    display: inline-block;\n    float: left;\n    color: #A7A7A7;\n    // 工作流程\n  }\n\n  .purchase_btn {\n    text-align: center;\n    padding: 0 20px;\n    padding-bottom: 40px;\n    margin-top: 30px;\n    background-color: #F6F8FA;\n    // 按钮\n  }\n\n  .purchase_button {\n    background: rgba(100, 155, 255, 1);\n    box-shadow: 0px 3px 7px 0px rgba(91, 140, 237, 0.13);\n    border-radius: 8px;\n    font-size: 28px;\n    width: 100%;\n    height: 88px;\n    font-family: PingFang-SC-Bold;\n    font-weight: 500;\n    color: rgba(255, 255, 255, 1);\n    padding: 17px 0px;\n    border: 0;\n  }\n\n  .container_purchase_add_list {\n    height: 88px;\n    line-height: 88px;\n    font-size: 30px;\n    box-sizing: border-box;\n    background-color: #ffffff;\n    padding: 0px 20px;\n    color: #999999;\n  }\n\n  .container_purchase_add_list img {\n    height: 40px;\n    width: 40px;\n    margin-right: 20px;\n    position: relative;\n    top: 10px;\n  }\n}\n</style>\n<style>\n.container-purchase .van-picker__toolbar {\n  line-height: 60px !important;\n  height: 60px !important;\n}\n.container-purchase .el-table__empty-text {\n  font-size: 26px;\n}\n/* 顶部表头 */\n.container-purchase .van-nav-bar .van-nav-bar__title {\n  font-size: 36px;\n}\n\n.container-purchase .container_purchase_hidden .el-checkbox__inner {\n  /* background-color:rgba(238,238,238,1);\n  border-color: rgba(238,238,238,1);\n  border: 1px solid #409eff;\n  width: 22px;\n  height: 22px;\n  border-radius: 2px; */\n}\n.container-purchase .container_purchase_hidden .is-checked {\n  /* background-color: #409eff;\n  border-color: #409eff; */\n}\n.container-purchase .container_purchase_hidden .is-indeterminate {\n  /* background-color:rgba(238,238,238,1);\n  border-color: rgba(238,238,238,1);\n  border: 1px solid #409eff;\n  width: 22px;\n  height: 22px;\n  border-radius: 2px; */\n}\n.container-purchase .van-nav-bar {\n  height: 88px;\n  line-height: 88px;\n}\n/* 单选框--样式更改--改为行内块元素 */\n.container_purchase_header_type .van-radio-group .van-radio {\n  display: block;\n  float: left;\n  width: 33%;\n}\n.container_purchase_header_type .van-radio-group {\n  display: block;\n  float: left;\n  width: 85%;\n}\n.container_purchase_header_check .van-radio-group .van-radio {\n  display: block;\n  float: left;\n  width: 50%;\n}\n.container_purchase_header_check .van-radio-group {\n  display: block;\n  float: left;\n  width: 77%;\n}\n/* 表格样式更改 */\n.container-purchase .container_purchase_hidden .el-table .cell {\n  height: 60px;\n  line-height: 60px;\n  font-size: 30px;\n}\n.container-purchase .container_purchase_hidden .el-table .table_input {\n  width: 120px;\n  height: 60px;\n  background: rgba(238, 238, 238, 1);\n  border-radius: 8px;\n  padding-left: 10px;\n  border: 1px solid rgba(229, 229, 229, 1);\n}\n</style>\n"]}]}