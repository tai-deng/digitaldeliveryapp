{"remainingRequest":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Public\\软件\\app\\src\\components\\index\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Public\\软件\\app\\src\\components\\index\\index.vue","mtime":1558076402298},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1552270024016},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1552270044128}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n//混入\nimport interfaces from \"./modules/interfaces.js\";\n// vuex\nimport { mapMutations } from \"vuex\";\n// 组件\nimport issuetab from './components/issue'\nexport default {\n  mixins: [interfaces],\n  data() {\n    return {\n      user:{\n        cName:'',\n        job:'',\n      },\n      messageList: [], //公告（我的消息）\n      show: false,\n      actions: [\n        {\n          id: 0,\n          name: \"拍照\"\n        },\n        {\n          id: 0,\n          name: \"从手机相册选择\"\n        }\n      ],\n      \n    };\n  },\n  created() {\n    this._initData();\n  },\n  computed: {\n    isShowMenu() {\n      return this.$store.getters.getIsShowMenu;\n    }\n  },\n  mounted(){\n    /**\n     * 版本检测\n     */\n    let currentVersion = \"\", //旧版本号\n      newVersion = \"\", //新版本号\n      wgtUrl = \"\";\n    document.addEventListener(\"plusready\", () => {\n      console.log(\"进入plusready\");\n      plus.runtime.getProperty(plus.runtime.appid, inf => {\n        // wgtVer = inf.version;\n        console.log(\"进入getProperty\");\n        console.log(JSON.stringify(inf));\n        currentVersion = inf.version\n        axios.get('http://47.112.21.206:8004/api/Home/GetAPPVersionNo').then(res=>{\n          console.log(JSON.stringify(res))\n          console.log(res.data.Message);\n          newVersion = res.data.Message;\n        console.log(currentVersion);\n        console.log(newVersion)\n          console.log(newVersion==currentVersion)\n          if (currentVersion != newVersion) {\n            console.log(\"版本有更新\");\n            plus.nativeUI.confirm(`${newVersion}`,e=> {\n                if (e.index == 0) {\n                  downWgt(); // 下载wgt资源包\n                }\n              },\n              `检测到最新版本`, [\"下载\", \"取消\"]\n            );\n          }\n        })\n      });\n    });\n\n    // 下载wgt文件\n    let downWgt = () => {\n      plus.nativeUI.showWaiting(\"下载更新\");\n      axios.get('http://47.112.21.206:8004/api/Home/GetAPPUrl').then(res=>{\n\n        if(res.data.StatusCode==200){\n           wgtUrl = res.data.Message\n          plus.downloader.createDownload(wgtUrl, { filename: \"_doc/update/\" }, (file, status) => {\n                if (status == 200) {\n                  console.log(\"下载更新成功：\" + file.filename);\n                  installWgt(file.filename); // 安装wgt资源包\n                } else {\n                  console.log(\"下载更新失败！\");\n                  plus.nativeUI.toast(\"下载更新失败！\");\n                }\n                plus.nativeUI.closeWaiting();\n              }\n            ).start();\n        }else{\n          plus.nativeUI.closeWaiting();\n        }\n      })\n    };\n    // 更新应用资源\n    let installWgt = path => {\n      plus.nativeUI.showWaiting(\"安装更新\");\n      plus.runtime.install(path,{},() => {\n          plus.nativeUI.closeWaiting();\n          console.log(\"安装更新成功！\");\n          plus.nativeUI.alert(\"更新完成！\", () => {\n            //  更新完成后重启应用\n            plus.runtime.restart();\n          });\n        },\n        e => {\n          plus.nativeUI.closeWaiting();\n          console.log(\"安装更新失败！[\" + e.code + \"]：\" + e.message);\n          plus.nativeUI.toast(\"安装更新失败！[\" + e.code + \"]：\" + e.message);\n        }\n      );\n    };\n  },\n  \n  methods: {\n    _initData() {\n      // 获取我的消息\n      let params = {\n        UserId: localStorage.getItem(\"userId\"),\n        ProjectId: localStorage.getItem(\"projectid\"),\n        page: 1,\n        rows: 3\n      };\n      this.queryNoticeList(params).then(res=>{\n        this.messageList = res.Detiel\n      console.log(this.messageList)\n      })\n      let loginInfo = JSON.parse(localStorage.getItem('loginUserInfo'))\n      this.user.cName = loginInfo.loginUserInfo.cName\n      this.user.job = loginInfo.loginUserInfo.cRoleName\n    },\n\n    onClickLeft() {\n      //打开侧边栏\n      this.upIsShowMenu(true);\n    },\n    onClickRight() {\n      // Toast('按钮');\n    },\n    ...mapMutations({\n      upIsShowMenu: \"IS_SHOW_MENU\"\n    }),\n    /**\n     * 点击拍照\n     */\n    handle() {\n      this.show = true;\n    },\n    /**\n     * 选择\n     */\n    onSelect(item) {\n      // 点击选项时默认不会关闭菜单，可以手动关闭\n      this.show = false;\n      console.log(item);\n    },\n    /**\n     * 取消\n     */\n    onCancel() {\n      console.log(\"取消\");\n    },\n    \n  },\n  components:{issuetab},\n};\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/index","sourcesContent":["<!-- 首页 -->\n<template>\n  <div class=\"container-index\">\n    <div class=\"warpper\">\n      <div>\n        <!-- 头部 -->\n        <div class=\"nav-bar\">\n          <div class=\"left\" @click=\"onClickLeft\">\n            <p>\n              <img src=\"./assets/9.png\" class=\"avater\" alt slot=\"left\">\n            </p>\n            <p class=\"user-name\">\n              <span>{{user.cName}}</span>\n              <br>\n              <span>{{user.job}}</span>\n            </p>\n          </div>\n          <div class=\"title\">首页</div>\n          <div class=\"right\" @click=\"handle\">\n            <img class=\"canmna\" src=\"./assets/10.png\" alt>\n          </div>\n        </div>\n        <!-- 内容-->\n        <div class=\"center\">\n          <!-- 8个图标-->\n          <div class=\"icon-8\">\n            <div @click=\"$router.push({path:'/timeManagement'})\">\n              <p>\n                <img src=\"./assets/1.png\" class=\"img-size\">\n              </p>\n              <p class=\"nav-name\">时间管理</p>\n            </div>\n            <div @click=\"$router.push({path:'/rangeManagement'})\">\n              <p>\n                <img src=\"./assets/2.png\" class=\"img-size\">\n              </p>\n              <p class=\"nav-name\">范围管理</p>\n            </div>\n            <div @click=\"$router.push({path:'/modules/allPurchase'})\">\n              <p>\n                <img src=\"./assets/3.png\" class=\"img-size\">\n              </p>\n              <p class=\"nav-name\">采购管理</p>\n            </div>\n            <div @click=\"$router.push({path:'/CostControl'})\">\n              <p>\n                <img src=\"./assets/4.png\" class=\"img-size\">\n              </p>\n              <p class=\"nav-name\">成本管理</p>\n            </div>\n            <div @click=\"$router.push({path:'/quality'})\">\n              <p>\n                <img src=\"./assets/5.png\" class=\"img-size\">\n              </p>\n              <p class=\"nav-name\">质量管理</p>\n            </div>\n            <div @click=\"$router.push({path:'/Risk'})\">\n              <p>\n                <img src=\"./assets/6.png\" class=\"img-size\">\n              </p>\n              <p class=\"nav-name\">风险管理</p>\n            </div>\n            <div @click=\"$router.push({path:'/humanResources'})\">\n              <p>\n                <img src=\"./assets/7.png\" class=\"img-size\">\n              </p>\n              <p class=\"nav-name\">人力资源</p>\n            </div>\n            <div @click=\"$router.push({path:'/communicateDetail'})\">\n              <p>\n                <img src=\"./assets/8.png\" class=\"img-size\">\n              </p>\n              <p class=\"nav-name\">沟通管理</p>\n            </div>\n          </div>\n          <!-- 消息中心-->\n          <div class=\"message\">\n            <div class=\"message-header\">\n              <p>\n                <img class=\"icon-11\" src=\"./assets/11.png\" alt>\n                <span class=\"mess-title\">消息中心</span>\n              </p>\n              <p @click=\"$router.push({path:'/myMessage'})\">\n                <span class=\"mess-title-2\">查看更多</span>\n                <img class=\"icon-11\" src=\"./assets/12.png\" alt>\n              </p>\n            </div>\n            <ul class=\"message-list\">\n              <li v-for=\"mes in messageList\" :key=\"mes.index\">{{mes.Message}}</li>\n            </ul>\n          </div>\n          <!-- 我的任务 -->\n          <div class=\"message task\">\n            <div class=\"message-header\">\n                <p>\n                  <img class=\"icon-11\" src=\"./assets/13.png\" alt>\n                  <span class=\"mess-title\">我的任务</span>\n                </p>\n                <p @click=\"$router.push({path:'/my-issue',query:{id:1}})\">\n                  <span class=\"mess-title-2\">查看更多</span>\n                  <img class=\"icon-11\" src=\"./assets/12.png\" alt>\n                </p>\n              </div>\n              <!-- 我的发布 待接收等 -->\n              <issuetab bgColor=\"#EEEEEE\" fontColor=\"#262626\" tabStyle=\"1\"></issuetab>\n            </div>\n          </div>\n        </div>\n        <div style=\"width:100%;height:60px\"></div>\n        <transition name=\"layer-b\">\n          <div class=\"layer-bg\" v-if=\"isShowMenu\"></div>\n        </transition>\n        <van-actionsheet\n          v-model=\"show\"\n          :actions=\"actions\"\n          cancel-text=\"取消\"\n          @select=\"onSelect\"\n          @cancel=\"onCancel\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script type='textecmascript-6'>\n//混入\nimport interfaces from \"./modules/interfaces.js\";\n// vuex\nimport { mapMutations } from \"vuex\";\n// 组件\nimport issuetab from './components/issue'\nexport default {\n  mixins: [interfaces],\n  data() {\n    return {\n      user:{\n        cName:'',\n        job:'',\n      },\n      messageList: [], //公告（我的消息）\n      show: false,\n      actions: [\n        {\n          id: 0,\n          name: \"拍照\"\n        },\n        {\n          id: 0,\n          name: \"从手机相册选择\"\n        }\n      ],\n      \n    };\n  },\n  created() {\n    this._initData();\n  },\n  computed: {\n    isShowMenu() {\n      return this.$store.getters.getIsShowMenu;\n    }\n  },\n  mounted(){\n    /**\n     * 版本检测\n     */\n    let currentVersion = \"\", //旧版本号\n      newVersion = \"\", //新版本号\n      wgtUrl = \"\";\n    document.addEventListener(\"plusready\", () => {\n      console.log(\"进入plusready\");\n      plus.runtime.getProperty(plus.runtime.appid, inf => {\n        // wgtVer = inf.version;\n        console.log(\"进入getProperty\");\n        console.log(JSON.stringify(inf));\n        currentVersion = inf.version\n        axios.get('http://47.112.21.206:8004/api/Home/GetAPPVersionNo').then(res=>{\n          console.log(JSON.stringify(res))\n          console.log(res.data.Message);\n          newVersion = res.data.Message;\n        console.log(currentVersion);\n        console.log(newVersion)\n          console.log(newVersion==currentVersion)\n          if (currentVersion != newVersion) {\n            console.log(\"版本有更新\");\n            plus.nativeUI.confirm(`${newVersion}`,e=> {\n                if (e.index == 0) {\n                  downWgt(); // 下载wgt资源包\n                }\n              },\n              `检测到最新版本`, [\"下载\", \"取消\"]\n            );\n          }\n        })\n      });\n    });\n\n    // 下载wgt文件\n    let downWgt = () => {\n      plus.nativeUI.showWaiting(\"下载更新\");\n      axios.get('http://47.112.21.206:8004/api/Home/GetAPPUrl').then(res=>{\n\n        if(res.data.StatusCode==200){\n           wgtUrl = res.data.Message\n          plus.downloader.createDownload(wgtUrl, { filename: \"_doc/update/\" }, (file, status) => {\n                if (status == 200) {\n                  console.log(\"下载更新成功：\" + file.filename);\n                  installWgt(file.filename); // 安装wgt资源包\n                } else {\n                  console.log(\"下载更新失败！\");\n                  plus.nativeUI.toast(\"下载更新失败！\");\n                }\n                plus.nativeUI.closeWaiting();\n              }\n            ).start();\n        }else{\n          plus.nativeUI.closeWaiting();\n        }\n      })\n    };\n    // 更新应用资源\n    let installWgt = path => {\n      plus.nativeUI.showWaiting(\"安装更新\");\n      plus.runtime.install(path,{},() => {\n          plus.nativeUI.closeWaiting();\n          console.log(\"安装更新成功！\");\n          plus.nativeUI.alert(\"更新完成！\", () => {\n            //  更新完成后重启应用\n            plus.runtime.restart();\n          });\n        },\n        e => {\n          plus.nativeUI.closeWaiting();\n          console.log(\"安装更新失败！[\" + e.code + \"]：\" + e.message);\n          plus.nativeUI.toast(\"安装更新失败！[\" + e.code + \"]：\" + e.message);\n        }\n      );\n    };\n  },\n  \n  methods: {\n    _initData() {\n      // 获取我的消息\n      let params = {\n        UserId: localStorage.getItem(\"userId\"),\n        ProjectId: localStorage.getItem(\"projectid\"),\n        page: 1,\n        rows: 3\n      };\n      this.queryNoticeList(params).then(res=>{\n        this.messageList = res.Detiel\n      console.log(this.messageList)\n      })\n      let loginInfo = JSON.parse(localStorage.getItem('loginUserInfo'))\n      this.user.cName = loginInfo.loginUserInfo.cName\n      this.user.job = loginInfo.loginUserInfo.cRoleName\n    },\n\n    onClickLeft() {\n      //打开侧边栏\n      this.upIsShowMenu(true);\n    },\n    onClickRight() {\n      // Toast('按钮');\n    },\n    ...mapMutations({\n      upIsShowMenu: \"IS_SHOW_MENU\"\n    }),\n    /**\n     * 点击拍照\n     */\n    handle() {\n      this.show = true;\n    },\n    /**\n     * 选择\n     */\n    onSelect(item) {\n      // 点击选项时默认不会关闭菜单，可以手动关闭\n      this.show = false;\n      console.log(item);\n    },\n    /**\n     * 取消\n     */\n    onCancel() {\n      console.log(\"取消\");\n    },\n    \n  },\n  components:{issuetab},\n};\n</script>\n<style lang='stylus' scoped rel='stylesheet/stylus'>\n.container-index {\n  width: 750px;\n  height: 100%;\n  overflow: auto;\n\n  .warpper {\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n\n    .nav-bar {\n      width: 100%;\n      height: 100px;\n      background-color: #699FFF;\n      display: flex;\n      justify-content: space-between;\n\n      .left {\n        display: flex;\n        width: 230px;\n\n        .user-name {\n          box-sizing: border-box;\n          padding: 12px 0 0 12px;\n\n          span {\n            display: inline-block;\n            font-size: 28px;\n            font-family: SourceHanSansCN-Regular;\n            font-weight: 400;\n            color: rgba(255, 255, 255, 1);\n            line-height: 32px;\n            padding-top: 5px;\n          }\n        }\n\n        .avater {\n          width: 80px;\n          height: 80px;\n          display: inline-block;\n          padding: 12px 0 0 20px;\n        }\n      }\n\n      .title {\n        flex: 1;\n        text-align: center;\n        font-size: 36px;\n        font-family: SourceHanSansCN-Medium;\n        font-weight: 500;\n        color: rgba(255, 255, 255, 1);\n        line-height: 100px;\n      }\n\n      .right {\n        width: 230px;\n\n        .canmna {\n          width: 40px;\n          height: 30px;\n          float: right;\n          padding: 30px 20px;\n        }\n      }\n    }\n\n    .center {\n      .icon-8 {\n        box-sizing: border-box;\n        box-shadow: 0px 2px 8px 0px rgba(220, 226, 237, 1);\n        padding: 0 20px;\n        width: 100%;\n        height: 412px;\n        background-color: white;\n        display: flex;\n        justify-content: space-between;\n        flex-wrap: wrap;\n        padding-bottom: 20px;\n\n        >div {\n          width: 160px;\n          padding-top: 30px;\n\n          p {\n            text-align: center;\n\n            .img-size {\n              width: 100px;\n              height: 100px;\n              background: linear-gradient(180deg, rgba(255, 201, 141, 1) 0%, rgba(253, 179, 61, 1) 100%);\n              border-radius: 36px;\n            }\n          }\n\n          .nav-name {\n            font-size: 28px;\n            font-family: SourceHanSansCN-Regular;\n            font-weight: 400;\n            color: rgba(34, 40, 51, 1);\n            line-height: 42px;\n            margin-top: 10px;\n          }\n        }\n      }\n    }\n\n    .message {\n      margin: 20px 0 0 0;\n      height 320px\n\n      .message-header {\n        height: 80px;\n        width: 100%;\n        display: flex;\n        background-color: white;\n        justify-content: space-between;\n        padding: 0 20px;\n        box-sizing: border-box;\n\n        p {\n          line-height: 80px;\n\n          img {\n            vertical-align: middle;\n          }\n\n          .mess-title, .mess-title-2 {\n            font-family: SourceHanSansCN-Medium;\n            line-height: 32px;\n            vertical-align: middle;\n            margin-left: 16px;\n          }\n\n          .mess-title {\n            color: rgba(38, 38, 38, 1);\n            font-size: 32px;\n            font-weight: 500;\n          }\n\n          .mess-title-2 {\n            color: #5A92FF;\n            font-weight: 400;\n            font-size: 28px;\n            margin-right: 6px;\n          }\n        }\n      }\n\n      .message-list {\n        width: 100%;\n        background-color: white;\n        box-sizing: border-box;\n        padding: 0 20px;\n        box-shadow: 0px 2px 8px 0px rgba(220, 226, 237, 1);\n\n        li {\n          height: 80px;\n          border-bottom: 1px solid #E5E5E5;\n          line-height: 80px;\n          font-size: 30px;\n          font-family: SourceHanSansCN-Medium;\n          font-weight: 500;\n          color: rgba(102, 102, 102, 1);\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n      }\n    }\n    .task{\n      height 680px\n    }\n    .layer-bg {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      z-index: 2999;\n      background-color: black;\n      opacity: 0.3;\n    }\n  }\n}\n\n.container-index {\n  width: 750px;\n  overflow: hidden;\n\n  .warpper {\n    width: 100%;\n    height: 100%;\n\n    .layer-bg {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      z-index: 2999;\n      background-color: black;\n      opacity: 0.3;\n    }\n  }\n}\n</style>\n<style>\n.layer-b-enter,\n.layer-b-leave-to {\n  opacity: 0 !important;\n}\n.layer-b-enter-active,\n.layer-b-leave-active {\n  transition: opacity 0.1s;\n}\n.layer-b-enter-to,\n.layer-b-leave {\n  opacity: 0.3;\n}\n</style>\n<style>\n.icon-11 {\n  width: 35px;\n  height: 31px;\n}\n\n</style>\n\n"]}]}