{"remainingRequest":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Public\\软件\\app\\src\\components\\login\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Public\\软件\\app\\src\\components\\login\\login.vue","mtime":1558055582235},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1552270024016},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1552270044128}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {Login,GetLoginUserInfo} from '@/api/api.js'\n// import { constants } from 'crypto';\nexport default {\n data() {\n   return {\n     username:'',\n     password:'',\n     isEye:false,//是否显示密码\n     eyeIcons: [require('./imgs/noeye.png'),require('./imgs/eye.png')],//眼睛图标\n   }\n },\n created(){\n   this._initData()\n },\n methods:{\n   _initData(){\n     // TODO // 假数据，项目ID\n     localStorage.setItem('projectid','12345678') \n   },\n   /**\n    * 隐藏显示密码事件\n    */\n   onEye(){\n     this.isEye = !this.isEye\n     console.log('是否显示密码')\n   },\n   /**登录 */\n   onLogin(){\n     if(this.username&&this.password){\n       this.Request(Login({LoginName:this.username,LoginPwd:this.password})).then(res=>{\n         console.log(res)\n         if(res.StatusCode===200){\n           console.log(res.Detiel[0])\n           localStorage.setItem('token',res.Detiel[0].access_token)\n           localStorage.setItem('bimface_token',res.Detiel[0].bimface_token)\n           localStorage.setItem(\"userId\", res.Message);\n           //获取当前登录用户信息详情\n           this.Request(GetLoginUserInfo({curUserId:Number(res.Message)})).then(info=>{\n             console.log(info)\n             if(info.StatusCode===200){\n               localStorage.setItem('token',res.Detiel[0].access_token)\n                localStorage.setItem('bimface_token',res.Detiel[0].bimface_token)\n                localStorage.setItem(\"userId\", res.Message);\n                localStorage.setItem(\"loginUserInfo\",JSON.stringify(info.Detiel[0]) );\n               this.$router.push({path:'/nav/to/index'})\n               this.$message({type:'success',message:'欢迎，登陆成功！',center:'true'})\n             }else{\n               this.$message({type:'error',message:'获取用户信息失败',center:'true'})\n             }\n           })\n          \n         }else{\n          this.$message({type:'error',message:res.Message,center:'true'})\n         }\n       })\n       console.log(this.username,this.password) \n     }else{\n       this.$message({type:'error',message:'帐号或密码不能为空',center:'true'})\n     }\n   }\n }\n\n}\n\n",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"login.vue","sourceRoot":"src/components/login","sourcesContent":["<!-- login登录 -->\n<template>\n <div class='container-login'>\n <div class='wrapper'>\n   <!-- logo和项目名 -->\n   <div class=\"logo\">\n     <p><img class=\"logo-img\" src=\"./imgs/logo.png\" alt></p>\n     <p class=\"project-name\">工程项目PM协同管理平台</p>\n   </div>\n\n   <div class=\"user-input\">\n      <p class=\"user\"><van-field v-model=\"username\" placeholder=\"请输入用户名\" /></p>\n      <p class=\"user\"><van-field v-model=\"password\" :type=\"isEye?'':'password'\" placeholder=\"请输入用户密码\"/>\n        <span><img  @click=\"onEye\" :src=\"isEye?eyeIcons[1]:eyeIcons[0]\" alt=\"\"></span>\n      </p>\n   </div>\n\n   <div class=\"sub-but\">\n     <el-button type=\"primary\" class=\"sub\" @click=\"onLogin\" round>登陆</el-button>\n   </div>\n </div>\n </div>\n</template>\n\n<script type='textecmascript-6'>\nimport {Login,GetLoginUserInfo} from '@/api/api.js'\n// import { constants } from 'crypto';\nexport default {\n data() {\n   return {\n     username:'',\n     password:'',\n     isEye:false,//是否显示密码\n     eyeIcons: [require('./imgs/noeye.png'),require('./imgs/eye.png')],//眼睛图标\n   }\n },\n created(){\n   this._initData()\n },\n methods:{\n   _initData(){\n     // TODO // 假数据，项目ID\n     localStorage.setItem('projectid','12345678') \n   },\n   /**\n    * 隐藏显示密码事件\n    */\n   onEye(){\n     this.isEye = !this.isEye\n     console.log('是否显示密码')\n   },\n   /**登录 */\n   onLogin(){\n     if(this.username&&this.password){\n       this.Request(Login({LoginName:this.username,LoginPwd:this.password})).then(res=>{\n         console.log(res)\n         if(res.StatusCode===200){\n           console.log(res.Detiel[0])\n           localStorage.setItem('token',res.Detiel[0].access_token)\n           localStorage.setItem('bimface_token',res.Detiel[0].bimface_token)\n           localStorage.setItem(\"userId\", res.Message);\n           //获取当前登录用户信息详情\n           this.Request(GetLoginUserInfo({curUserId:Number(res.Message)})).then(info=>{\n             console.log(info)\n             if(info.StatusCode===200){\n               localStorage.setItem('token',res.Detiel[0].access_token)\n                localStorage.setItem('bimface_token',res.Detiel[0].bimface_token)\n                localStorage.setItem(\"userId\", res.Message);\n                localStorage.setItem(\"loginUserInfo\",JSON.stringify(info.Detiel[0]) );\n               this.$router.push({path:'/nav/to/index'})\n               this.$message({type:'success',message:'欢迎，登陆成功！',center:'true'})\n             }else{\n               this.$message({type:'error',message:'获取用户信息失败',center:'true'})\n             }\n           })\n          \n         }else{\n          this.$message({type:'error',message:res.Message,center:'true'})\n         }\n       })\n       console.log(this.username,this.password) \n     }else{\n       this.$message({type:'error',message:'帐号或密码不能为空',center:'true'})\n     }\n   }\n }\n\n}\n\n</script>\n<style lang='stylus' scoped rel='stylesheet/stylus'>\n.container-login\n  width 100%\n  height 100%\n  background-image url('./imgs/bg.png')\n  background-repeat no-repeat\n  background-size 100% 100%\n  box-sizing border-box\n  .wrapper\n    width 610px\n    height 100%\n    margin 0 auto\n    .logo\n      text-align center\n      .logo-img\n        display inline-block\n        width:108px;\n        height:134px;\n        margin 0 auto\n        margin-top 116px\n      .project-name\n        font-size:30px;\n        font-family:SourceHanSansCN-Medium;\n        font-weight:500;\n        color:rgba(51,51,51,1);\n        line-height 30px\n        margin-top 30px\n    .user-input\n      margin-top 140px\n      .user\n        position relative\n        width 100%\n        border-bottom 1px solid rgba(230,230,230,1)\n        margin-top 90px\n        span \n          img \n            position absolute\n            right 0\n            top 0\n            width 36px\n            height 26px\n            padding: 15px;\n          \n    .sub-but\n      padding-top 98px\n      .sub\n        width 100%\n        height 94px\n</style>\n<style >\n.van-cell{\n  background-color: rgba(0,0,0,0)\n}\n.van-field__control{\n  font-size:30px;\n  font-family:SourceHanSansCN-Regular;\n  font-weight:bold;\n  color:rgba(153,153,153,1);\n}\n.el-button--primary{\n  font-size:36px;\n  font-family:SourceHanSansCN-Regular;\n  font-weight:bold;\n  color:rgba(255,255,255,1);\n}\n.el-button.is-round{\n  border-radius:47px;\n  background:rgba(90,147,255,1);\n}\n</style>\n"]}]}