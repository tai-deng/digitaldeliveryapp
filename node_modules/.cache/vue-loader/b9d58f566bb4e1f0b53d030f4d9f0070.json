{"remainingRequest":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Public\\软件\\app\\src\\components\\user\\user.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Public\\软件\\app\\src\\components\\user\\user.vue","mtime":1557998374578},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1552270024016},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1552270044128}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {GetOrgList,GetEngingConfigByTypeId} from '@/api/api.js'\nexport default {\n  data() {\n    return {\n      cName:'',//登录人的姓名\n      position:'',//用户角色\n      building:[],//建设单位\n      drawbuilding:[],//设计单位\n      doingCom:[],//施工单位\n      BuildMon:'',//楼栋\n      TotalArea:'',//面积\n      detailList:[],//模型浏览\n\n    };\n  },\n  created(){\n    var text=localStorage.getItem('loginUserInfo');\n    var post=JSON.parse(text);\n    console.log('post',post);\n    this.cName=post.loginUserInfo.cName;   //用户名字\n    this.position=post.loginUserRoles[0].cRoleName; //用户角色\n    this.getOrg(localStorage.getItem('projectid'));   //公司\n    this.GetEnging(localStorage.getItem('projectid')); //获取信息配置，共多少栋，面积\n    // this.\n  },\n  methods: {\n    // 个人信息\n    onMyself() {\n      this.$router.push({ path: \"/Modify\" });\n    },\n    // 设置\n    onSetting() {\n      this.$router.push({ path: \"/set\" });\n    },\n    // 浏览模型\n    onBrowse(id,BuildingID) {\n      this.$router.push({ path: \"/browseM\",query:{id:id,BuildingID:BuildingID} });\n    },\n    // 施工单位\n    onRoadWork(item,arr,text) {\n      this.$router.push({ path: \"/addressList\" ,query:{item:item,arr:arr,text:text}});\n    },\n    //根据项目id获取公司列表\n    getOrg(projectID){\n      this.Request(GetOrgList({projectId:projectID})).then(res=>{\n        if(res.StatusCode=='200'){\n          this.building=[];\n          this.doingCom=[];\n          this.drawbuilding=[];\n          for(var i=0;i<res.Detiel.length;i++){\n            if(res.Detiel[i].OrgTypeID=='1'){\n              this.building.push(res.Detiel[i])\n            }else if(res.Detiel[i].OrgTypeID=='3'){\n              this.drawbuilding.push(res.Detiel[i])\n            }else if(res.Detiel[i].OrgTypeID=='5'){\n              this.doingCom.push(res.Detiel[i])\n            }\n          }\n        }else{\n          this.$dialog.alert({message:res.Message});\n        }\n      });\n    },\n    //获取信息配置\n    GetEnging(id){\n      this.Request(GetEngingConfigByTypeId({ProjectID:id})).then(res=>{\n        if(res.StatusCode=='200'){\n          if(res.Detiel.length){\n            this.BuildMon = res.Detiel[0].BuildMon; //建筑\n            this.TotalArea = res.Detiel[0].TotalArea; //建筑面积\n            this.detailList = res.Detiel[0].StoriedBuildlList; //浏览模型\n          }\n        }else{\n          this.$dialog.alert({message:res.Message});\n        }\n      })\n\n    },\n  }\n};\n",{"version":3,"sources":["user.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"user.vue","sourceRoot":"src/components/user","sourcesContent":["<!-- 侧边栏 用户 -->\n<template>\n  <div class=\"container-user\">\n    <div class=\"user-top flex-between\">\n      <div class=\"user-top-userinfo flex\">\n        <div class=\"user-top-userinfo-l\" @click=\"onMyself\">\n          <img src=\"./user_assets/imgs/user-portrait.png\">\n        </div>\n        <div class=\"user-top-userinfo-r flex-column-center\">\n          <div class=\"user-top-userinfo-r-name\">{{cName}}</div>\n          <div class=\"user-top-userinfo-l-technical\">{{position}}</div>\n        </div>\n      </div>\n      <div class=\"user-top-set\" @click=\"onSetting\">\n        <img src=\"./user_assets/imgs/user-setting.png\">\n      </div>\n    </div>\n    <div class=\"user-theme\">\n      <div class=\"user-theme-title flex\">\n        <div class=\"user-theme-icon\">\n          <img class=\"icon-a\" src=\"./user_assets/imgs/user-construction.png\">\n        </div>\n        <div class=\"user-theme-name\">建设单位</div>\n      </div>\n      <div class=\"user-theme-item\" v-for=\"item in building\"  v-bind:key=\"item.ID\" @click.stop=\"onRoadWork(item,building,'建设单位')\">\n        {{item.Name}}\n      </div>\n    </div>\n    <div class=\"line\">\n      <div class=\"i\"></div>\n    </div>\n    <div class=\"user-theme\">\n      <div class=\"user-theme-title flex\">\n        <div class=\"user-theme-icon\">\n          <img class=\"icon-b\" src=\"./user_assets/imgs/user-design.png\">\n        </div>\n        <div class=\"user-theme-name\">设计单位</div>\n      </div>\n      <div class=\"user-theme-item\" v-for=\"item in drawbuilding\"  v-bind:key=\"item.ID\" @click.stop=\"onRoadWork(item,drawbuilding,'设计单位')\">\n        {{item.Name}}\n      </div>\n    </div>\n    <div class=\"line\">\n      <div class=\"i\"></div>\n    </div>\n    <div class=\"user-theme\">\n      <div class=\"user-theme-title flex\">\n        <div class=\"user-theme-icon\">\n          <img class=\"icon-c\" src=\"./user_assets/imgs/user-road.png\">\n        </div>\n        <div class=\"user-theme-name\">施工单位</div>\n      </div>\n      <div class=\"user-theme-item\" v-for=\"item in doingCom\"  v-bind:key=\"item.ID\" @click.stop=\"onRoadWork(item,doingCom,'施工单位')\">\n        {{item.Name}}\n      </div>\n    </div>\n    <div class=\"line\">\n      <div class=\"i\"></div>\n    </div>\n    <div class=\"user-theme\">\n      <div class=\"user-theme-title flex\">\n        <div class=\"user-theme-icon\">\n          <img class=\"icon-e\" src=\"./user_assets/imgs/user-scale.png\">\n        </div>\n        <div class=\"user-theme-name\">建设规模</div>\n      </div>\n      <div class=\"user-theme-item\">共{{BuildMon}}栋，总建筑面积{{TotalArea}}m²</div>\n    </div>\n    <div class=\"line\">\n      <div class=\"i\"></div>\n    </div>\n    <div class=\"user-theme\">\n      <div class=\"user-theme-title flex\">\n        <div class=\"user-theme-icon\">\n          <img class=\"icon-d\" src=\"./user_assets/imgs/user-model.png\">\n        </div>\n        <div class=\"user-theme-name\">模型浏览</div>\n      </div>\n      <div class=\"user-theme-item\" v-for=\"item in detailList\"  v-bind:key=\"item.BuildingID\" @click.stop=\"onBrowse(item.ID,item.BuildingID)\">\n        {{item.BuildName}}\n      </div>\n     \n    </div>\n  </div>\n</template>\n\n<script type='textecmascript-6'>\nimport {GetOrgList,GetEngingConfigByTypeId} from '@/api/api.js'\nexport default {\n  data() {\n    return {\n      cName:'',//登录人的姓名\n      position:'',//用户角色\n      building:[],//建设单位\n      drawbuilding:[],//设计单位\n      doingCom:[],//施工单位\n      BuildMon:'',//楼栋\n      TotalArea:'',//面积\n      detailList:[],//模型浏览\n\n    };\n  },\n  created(){\n    var text=localStorage.getItem('loginUserInfo');\n    var post=JSON.parse(text);\n    console.log('post',post);\n    this.cName=post.loginUserInfo.cName;   //用户名字\n    this.position=post.loginUserRoles[0].cRoleName; //用户角色\n    this.getOrg(localStorage.getItem('projectid'));   //公司\n    this.GetEnging(localStorage.getItem('projectid')); //获取信息配置，共多少栋，面积\n    // this.\n  },\n  methods: {\n    // 个人信息\n    onMyself() {\n      this.$router.push({ path: \"/Modify\" });\n    },\n    // 设置\n    onSetting() {\n      this.$router.push({ path: \"/set\" });\n    },\n    // 浏览模型\n    onBrowse(id,BuildingID) {\n      this.$router.push({ path: \"/browseM\",query:{id:id,BuildingID:BuildingID} });\n    },\n    // 施工单位\n    onRoadWork(item,arr,text) {\n      this.$router.push({ path: \"/addressList\" ,query:{item:item,arr:arr,text:text}});\n    },\n    //根据项目id获取公司列表\n    getOrg(projectID){\n      this.Request(GetOrgList({projectId:projectID})).then(res=>{\n        if(res.StatusCode=='200'){\n          this.building=[];\n          this.doingCom=[];\n          this.drawbuilding=[];\n          for(var i=0;i<res.Detiel.length;i++){\n            if(res.Detiel[i].OrgTypeID=='1'){\n              this.building.push(res.Detiel[i])\n            }else if(res.Detiel[i].OrgTypeID=='3'){\n              this.drawbuilding.push(res.Detiel[i])\n            }else if(res.Detiel[i].OrgTypeID=='5'){\n              this.doingCom.push(res.Detiel[i])\n            }\n          }\n        }else{\n          this.$dialog.alert({message:res.Message});\n        }\n      });\n    },\n    //获取信息配置\n    GetEnging(id){\n      this.Request(GetEngingConfigByTypeId({ProjectID:id})).then(res=>{\n        if(res.StatusCode=='200'){\n          if(res.Detiel.length){\n            this.BuildMon = res.Detiel[0].BuildMon; //建筑\n            this.TotalArea = res.Detiel[0].TotalArea; //建筑面积\n            this.detailList = res.Detiel[0].StoriedBuildlList; //浏览模型\n          }\n        }else{\n          this.$dialog.alert({message:res.Message});\n        }\n      })\n\n    },\n  }\n};\n</script>\n<style lang='stylus' scoped rel='stylesheet/stylus'>\n@import './user_assets/base.css';\n\n.container-user {\n  width: 100%;\n  height: 100%;\n  background: rgba(34, 40, 50, 1);\n  overflow-y:scroll;\n  white-space: nowrap;\n\n  .line {\n    padding: 0 0.32rem;\n    margin-bottom: 0.37rem;\n  }\n\n  .line .i {\n    background-color: #3D4C64;\n    height: 0.03rem;\n  }\n\n  .icon-a {\n    width: 0.4rem;\n    height: 0.35rem;\n  }\n\n  .icon-b {\n    width: 0.3rem;\n    height: 0.32rem;\n  }\n\n  .icon-c {\n    width: 0.4rem;\n    height: 0.35rem;\n  }\n\n  .icon-d {\n    width: 0.35rem;\n    height: 0.35rem;\n  }\n\n  .icon-e {\n    width: 0.37rem;\n    height: 0.37rem;\n  }\n\n  .user-top {\n    padding: 0.532rem 0.4rem 0.67rem 0.32rem;\n\n    .user-top-userinfo {\n      font-family: SourceHanSansCN-Regular;\n      font-weight: 400;\n\n      .user-top-userinfo-l img {\n        width: 1.6rem;\n        height: 1.6rem;\n        border-radius: 50%;\n        display: block;\n      }\n\n      .user-top-userinfo-r {\n        margin-left: 0.27rem;\n\n        .user-top-userinfo-r-name {\n          font-size: 32px;\n          color: rgba(255, 255, 255, 1);\n          margin-bottom: 0.32rem;\n        }\n\n        .user-top-userinfo-l-technical {\n          font-size: 28px;\n          color: rgba(217, 217, 217, 1);\n        }\n      }\n    }\n\n    .user-top-set img {\n      width: 0.532rem;\n      height: 0.532rem;\n      display: block;\n    }\n  }\n\n  .user-theme {\n    font-size: 30px;\n    font-family: SourceHanSansCN-Medium;\n\n    .user-theme-item {\n      margin-left: 0.88rem;\n      color: rgba(221, 221, 221, 1);\n      margin-bottom: 0.3rem;\n    }\n\n    .user-theme-title {\n      margin-left: 0.32rem;\n      font-weight: 500;\n      color: rgba(255, 255, 255, 1);\n      margin-bottom: 0.37rem;\n\n      .user-theme-icon {\n        width: 0.532rem;\n\n        img {\n          display: block;\n        }\n      }\n    }\n  }\n}\n</style>\n"]}]}