{"remainingRequest":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Public\\软件\\app\\src\\components\\index\\CostControl\\CostControl.vue?vue&type=style&index=1&lang=css&","dependencies":[{"path":"C:\\Users\\Public\\软件\\app\\src\\components\\index\\CostControl\\CostControl.vue","mtime":1558065367569},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\css-loader\\index.js","mtime":1552270042900},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1552270044128},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\postcss-loader\\src\\index.js","mtime":1552270043529},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1552270044128}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n@import \"~@/assets/css/resetVant.css\";\r\n/* 顶部表头 */\r\n.container-cost_control .van-nav-bar .van-nav-bar__title {\r\n  font-size: 36px;\r\n}\r\n/*右上角点击筛选样式*/ \r\n.select_layer {\r\n  position: fixed;\r\n  top: 80px;\r\n  right: 14px;\r\n  width: 352px;\r\n  box-sizing: border-box;\r\n  background-color: #222832;\r\n  opacity:0.9;\r\n  border-radius:8px;\r\n  padding: 10px 20px;\r\n  z-index: 999;\r\n}\r\n.select_layer .van-hairline--top-bottom::after{\r\n  border: none;\r\n}\r\n.select_layer .van-hairline--top::after {\r\n  border-top: none;\r\n  border-bottom: 1px solid #737577;  /*no*/\r\n}\r\n.select_layer .van-collapse  {\r\n  max-height: 1109px;\r\n}\r\n.select_layer .van-collapse-item .van-collapse-item__title--expanded::after {\r\n  visibility: hidden;\r\n}\r\n.select_layer .van-collapse-item:first-child {\r\n  border-bottom: 1px solid #737577;  /*no*/\r\n}\r\n.select_layer .van-collapse-item__title {\r\n  height: 80px;\r\n  line-height: 80px;\r\n  background-color: #222832;\r\n}\r\n.select_layer .van-cell__title{\r\n  font-size: 30px;\r\n  color: #fff;\r\n  text-align: left;         \r\n}\r\n.select_layer .van-cell__right-icon {\r\n  color: transparent;\r\n}\r\n.select_layer .icon_down {\r\n  position: absolute;\r\n  top: 45px;\r\n  right: 30px;\r\n  width: 16px;\r\n  height: 11px;\r\n}\r\n.select_layer .van-collapse-item__content{\r\n  padding: 0;\r\n  background-color: #222832;\r\n  color: #fff;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n  max-height: 500px;\r\n}\r\n.select_layer .van-cell {\r\n  width: 100%;\r\n  background-color: #222832;\r\n  color: #fff;\r\n}\r\n.select_layer .van-radio {   \r\n  height: 80px;\r\n  line-height: 80px;\r\n  height: 80px;\r\n  /* padding-left:20px; */\r\n  border-bottom: 1px solid #737577;  /*no*/\r\n  font-size: 28px;\r\n}\r\n.select_layer .van-radio:last-child {\r\n  border: 0;\r\n}\r\n.select_layer .van-radio .van-radio__label {\r\n  color: #fff;\r\n  vertical-align: baseline;\r\n}\r\n/* .select_layer .van-radio .van-radio__icon {\r\n  vertical-align: baseline;\r\n} */\r\n/* .select_layer .van-radio .van-radio__icon .van-icon {\r\n  border: 2px solid #fff;\r\n  width: 25px;\r\n  height: 25px;\r\n} */\r\n.select_layer .btn {\r\n  width: 100%;\r\n  height: 88px;\r\n  padding: 19px 0;\r\n  box-sizing: border-box;\r\n}\r\n.select_layer button {\r\n  width:49%;\r\n  height: 50px;\r\n  line-height: 50px;\r\n  background-color: #222934;\r\n  color: #fff;\r\n  font-size: 30px;\r\n  text-align: center;\r\n  border: none;\r\n}\r\n.select_layer .line {\r\n  display: inline-block;\r\n  width: 0px;\r\n  height: 50px;\r\n  border-left: 2px dashed #fff;\r\n  vertical-align: top;\r\n}\r\n.select_layer:after {\r\n  position: absolute;\r\n  top: -0.379rem;\r\n  right: 0.186667rem;\r\n  content: '';\r\n  width: 0px;\r\n  height: 0px;\r\n  border: 15px solid transparent;  /*no*/\r\n  border-bottom: 15px solid #222832;  /*no*/\r\n  z-index: 9999\r\n}\r\n\r\n.my-list .van-list__loading-text, .my-list .van-list__finished-text, .my-list .van-list__error-text{\r\n    line-height: 80px\r\n}\r\n.container-cost_control .van-radio__icon, .container-cost_control .van-radio__label{\r\n  display: inline;\r\n}\r\n",{"version":3,"sources":["CostControl.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4jBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"CostControl.vue","sourceRoot":"src/components/index/CostControl","sourcesContent":["<!-- 成本管理 -->\r\n<template>\r\n  <div class=\"container-cost_control\">\r\n    <!-- 头部 -->\r\n    <van-nav-bar\r\n      title=\"成本管理\"\r\n      @click-left=\"goBack\"\r\n      @click-right=\"changeScreen\"\r\n      fixed\r\n      :border=\"false\"\r\n      :z-index=\"100\"\r\n    >\r\n      <span class=\"el-icon-arrow-left fontsize\" slot=\"left\"></span>\r\n      <img src=\"../../../assets/imgs/screen.png\" class=\"screen fontsize\" slot=\"right\">\r\n    </van-nav-bar>\r\n    <div class=\"Interlayer\"></div>\r\n    <div class=\"wrapper\">\r\n\r\n      <van-list\r\n        v-model=\"loading\"\r\n        :finished=\"finished\"\r\n        finished-text=\"没有更多了\"\r\n        class=\"my-list\"\r\n      >\r\n        <div\r\n          class=\"cost_control_box\"\r\n          v-for=\"(item,index) in costControlLists\"\r\n          :key=\"item.index\"\r\n          @click=\"costControlDetails(item)\"\r\n        >\r\n          <div class=\"cost_control_title\">\r\n            <span class=\"title_index\">{{index + 1}}</span>\r\n            <span class=\"title_content\">{{item.ResorceName}}</span>\r\n            <span class=\"el-icon-arrow-right\"></span>\r\n          </div>\r\n          <div class=\"cost_control_content\">\r\n            <span class=\"content_details\">\r\n              施工图预算量:\r\n              <span>{{item.BOQ}}</span>\r\n            </span>\r\n            <span class=\"content_details\">\r\n              系数:\r\n              <span>{{item.Coefficient}}</span>\r\n            </span>\r\n            <span class=\"content_details\">\r\n              施工预算量:\r\n              <span>{{item.AdjustBOQ}}</span>\r\n            </span>\r\n            <span class=\"content_details\">\r\n              实际消耗量:\r\n              <span>{{item.RealConsume}}</span>\r\n            </span>\r\n            <span class=\"content_details\">\r\n              差额:\r\n              <span>{{item.DiffValue}}</span>\r\n            </span>\r\n            <span class=\"content_details\">\r\n              偏差率:\r\n              <span>{{item.DiffRate}}</span>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </van-list>\r\n\r\n\r\n      <!-- <div\r\n        class=\"cost_control_box\"\r\n        v-for=\"(item,index) in costControlLists\"\r\n        :key=\"item.index\"\r\n        @click=\"costControlDetails(item)\"\r\n      >\r\n        <div class=\"cost_control_title\">\r\n          <span class=\"title_index\">{{index + 1}}</span>\r\n          <span class=\"title_content\">{{item.ResorceName}}</span>\r\n          <span class=\"el-icon-arrow-right\"></span>\r\n        </div>\r\n        <div class=\"cost_control_content\">\r\n          <span class=\"content_details\">\r\n            施工图预算量:\r\n            <span>{{item.BOQ}}</span>\r\n          </span>\r\n          <span class=\"content_details\">\r\n            系数:\r\n            <span>{{item.Coefficient}}</span>\r\n          </span>\r\n          <span class=\"content_details\">\r\n            施工预算量:\r\n            <span>{{item.AdjustBOQ}}</span>\r\n          </span>\r\n          <span class=\"content_details\">\r\n            实际消耗量:\r\n            <span>{{item.RealConsume}}</span>\r\n          </span>\r\n          <span class=\"content_details\">\r\n            差额:\r\n            <span>{{item.DiffValue}}</span>\r\n          </span>\r\n          <span class=\"content_details\">\r\n            偏差率:\r\n            <span>{{item.DiffRate}}</span>\r\n          </span>\r\n        </div>\r\n      </div> -->\r\n    </div>\r\n    <!-- 筛选内容 -->\r\n    <div class=\"select_layer\" v-show=\"shwoScreen\">\r\n      <van-collapse v-model=\"activeName\" accordion @change=\"changeCollapseItem\">\r\n        <van-collapse-item title=\"整栋楼栋\" name=\"1\">\r\n          <div slot=\"icon\">\r\n            <img class=\"icon_down\" src=\"../../../assets/imgs/select_down.png\">\r\n          </div>\r\n          <van-radio-group v-model=\"buildName\">\r\n            <van-radio v-for=\"(item,index) in buildingList\" :key=\"index\" @click=\"clickTung(item)\" :name=\"item.value\" class=\"my-radio\">{{item.label}}</van-radio>\r\n          </van-radio-group>\r\n        </van-collapse-item>\r\n        <van-collapse-item title=\"全部专业\" name=\"2\">\r\n          <div slot=\"icon\">\r\n            <img class=\"icon_down\" src=\"../../../assets/imgs/select_down.png\">\r\n          </div>\r\n          <van-radio-group v-model=\"specialty\">\r\n            <van-radio v-for=\"(item,index) in specialtyList\" :key=\"index\" @click=\"clickMajor(item)\" :name=\"item.value\" class=\"my-radio\">{{item.label}}</van-radio>\r\n          </van-radio-group>\r\n        </van-collapse-item>\r\n        <van-collapse-item title=\"全部楼层\" name=\"3\">\r\n          <div slot=\"icon\">\r\n            <img class=\"icon_down\" src=\"../../../assets/imgs/select_down.png\">\r\n          </div>\r\n          <van-radio-group v-model=\"floor\">\r\n            <van-radio v-for=\"(item,index) in floorList\" :key=\"index\" @click=\"clickFloor(item)\" :name=\"item.value\" class=\"my-radio\">{{item.label}}</van-radio>\r\n          </van-radio-group>\r\n        </van-collapse-item>\r\n        <van-collapse-item title=\"全部资源\" name=\"4\">\r\n          <div slot=\"icon\">\r\n            <img class=\"icon_down\" src=\"../../../assets/imgs/select_down.png\">\r\n          </div>\r\n          <van-radio-group v-model=\"resourceName\">\r\n            <van-radio v-for=\"(item,index) in resourceList\" :key=\"index\" @click=\"clickResources(item)\" :name=\"item.value\" class=\"my-radio\">{{item.label}}</van-radio>\r\n          </van-radio-group>\r\n        </van-collapse-item>\r\n        <van-collapse-item title=\"进度节点\" name=\"5\">\r\n          <div slot=\"icon\">\r\n            <img class=\"icon_down\" src=\"../../../assets/imgs/select_down.png\">\r\n          </div>\r\n          <van-radio-group v-model=\"taskId\">\r\n            <van-radio v-for=\"(item,index) in taskList\" :key=\"index\" @click=\"clickNode(item)\" :name=\"item.value\" class=\"my-radio\">{{item.label}}</van-radio>\r\n          </van-radio-group>\r\n        </van-collapse-item>\r\n      </van-collapse>\r\n      <div class=\"btn\">\r\n        <button class=\"reset\" @click=\" resetFunc\">重置</button>\r\n        <div class=\"line\"></div>\r\n        <button class=\"check\" @click=\"recordCheck\">确认</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script type='textecmascript-6'>\r\nimport { QueryCostData, GetBuilding, GetSpecialtybyBuilding, GetFloorbyBuilding, GetResourceBySpInfo, GetTaskByInfo } from \"@/api/api.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      loading: false,  //是否处于加载状态\r\n      finished: false,  //是否已加载完成\r\n      ProjectID: localStorage.getItem('projectid'), //项目ID\r\n      userID: localStorage.getItem(\"userId\"), //用户ID\r\n      activeName: \"\", //默认不展开\r\n      shwoScreen: false, //默认不显示筛选\r\n      buildName: '',//整栋模型\r\n      specialty: '',//专业\r\n      floor: '',//楼层\r\n      taskId: '',//进度节点\r\n      resourceName: '',//资源\r\n      costControlLists: [],\r\n      buildingList: [],//整栋模型列表\r\n      specialtyList: [],//专业列表\r\n      floorList: [],//楼层列表\r\n      taskList: [],//进度节点列表\r\n      resourceList: [],  //资源列表\r\n      colorID: 0  //颜色ID\r\n      // screen_list: [],//筛选列表\r\n    };\r\n  },\r\n  created() {\r\n    this.getCostData()\r\n  },\r\n  methods: {\r\n    /**\r\n     * @name 获取成本管理列表数据\r\n     * @param {string} ProjectID 项目ID\r\n     * @param {string} BuildName 楼栋\r\n     * @param {string} Specialty 专业\r\n     * @param {string} Floor 楼层\r\n     * @param {string} ResourceName 资源名称\r\n     * @param {string} TaskId 进度ID\r\n     * @param {integer} ColorID \t颜色ID\r\n     */\r\n    async getCostData(){\r\n      let params = {\r\n        ProjectID: this.ProjectID,\r\n        BuildName: this.buildName,\r\n        Specialty: this.specialty,\r\n        Floor: this.floor,\r\n        TaskId: this.taskId,\r\n        ResourceName: this.resourceName\r\n        // ColorID: this.colorID\r\n      }\r\n      console.log(\"检索参数\", params)\r\n      try{\r\n        let costData = await this.Request(QueryCostData(params))\r\n        if(costData.StatusCode == 200){\r\n          console.log(\"成本数据\", costData)\r\n          if(costData.Detiel.length > 0){\r\n            this.costControlLists = costData.Detiel\r\n          }else{\r\n            this.$toast({\r\n              message: \"暂无数据\",\r\n              className: \"my-toast\"\r\n            });\r\n            this.costControlLists = [];\r\n          }\r\n          this.loading = false;\r\n          this.finished = true;\r\n\r\n          // 数据全部加载完成\r\n          // if (this.list.length >= 40) {\r\n          //   this.finished = true;\r\n          // }\r\n        }else{\r\n          this.$toast({\r\n            type: 'fail',\r\n            message: costData.message ? costData.message : '后台异常',\r\n            className: \"my-toast\"\r\n          })\r\n        }\r\n      } catch (err) {\r\n        console.log('%c函数 %s 抛出异常：%s', 'color: red;', 'getCostData', err);\r\n      }\r\n    },\r\n    /**\r\n     * @name 获取模型的楼栋数据\r\n     */\r\n    async getBuildingData(){\r\n      let buildingData = await this.Request(GetBuilding({projectid: this.ProjectID}),)\r\n      if(buildingData.StatusCode == 200){\r\n        this.buildingList = [];\r\n        this.buildingList.unshift({label: \"整体楼栋\", value: \"\"})\r\n        for (let i = 0; i < buildingData.Detiel.length; i++) {\r\n          let Option = {};\r\n          Option.label = buildingData.Detiel[i].text;\r\n          Option.value = buildingData.Detiel[i].id;\r\n          this.buildingList.push(Option);\r\n        }\r\n      }else{\r\n        this.$toast({\r\n          type: 'fail',\r\n          message: buildingData.message ? buildingData.message : '后台异常',\r\n          className: \"my-toast\"\r\n        })\r\n      }\r\n    },\r\n    /**\r\n     * @name 根据楼栋获取模型的专业\r\n     */\r\n    async getSpecialtyData(){\r\n      let specialtyData = await this.Request(GetSpecialtybyBuilding({projectid: this.ProjectID, building: this.buildName}),)\r\n      if(specialtyData.StatusCode == 200){\r\n        this.specialtyList = [];\r\n        if(specialtyData.Detiel.length > 0){\r\n          for (let i = 0; i < specialtyData.Detiel.length; i++) {\r\n            let Option = {};\r\n            Option.label = specialtyData.Detiel[i].text;\r\n            Option.value = specialtyData.Detiel[i].id;\r\n            this.specialtyList.push(Option);\r\n          }\r\n        }else{\r\n          this.specialtyList = []\r\n        }\r\n      }else{\r\n        this.$toast({\r\n          type: 'fail',\r\n          message: specialtyData.message ? specialtyData.message : '后台异常',\r\n          className: \"my-toast\"\r\n        })\r\n      }\r\n    },\r\n    /**\r\n     * @name 根据楼栋获取模型的楼层\r\n     */\r\n    async getFloorData(){\r\n      let floorData = await this.Request(\r\n        GetFloorbyBuilding({\r\n          projectid: this.ProjectID, \r\n          building: this.buildName,\r\n          specialty: this.specialty\r\n        })\r\n      )\r\n      if(floorData.StatusCode == 200){\r\n        this.floorList = [];\r\n        if(floorData.Detiel.length > 0){\r\n          for (let i = 0; i < floorData.Detiel.length; i++) {\r\n            let Option = {};\r\n            Option.label = floorData.Detiel[i].text;\r\n            Option.value = floorData.Detiel[i].id;\r\n            this.floorList.push(Option);\r\n          }\r\n        }else{\r\n          this.floorList = []\r\n        }\r\n      }else{\r\n        this.$toast({\r\n          type: 'fail',\r\n          message: floorData.message ? floorData.message : '后台异常',\r\n          className: \"my-toast\"\r\n        })\r\n      }\r\n    },\r\n    /**\r\n     * @name 根据楼栋楼层专业获取物资名称\r\n     */\r\n    async getResourceData(){\r\n      let resourceData = await this.Request(\r\n        GetResourceBySpInfo({\r\n          ProjectID: this.ProjectID, \r\n          BuildName: this.buildName,\r\n          Specialty: this.specialty,\r\n          Floor: this.floor\r\n        })\r\n      )\r\n      if(resourceData.StatusCode == 200){\r\n        this.resourceList = [];\r\n        if(resourceData.Detiel.length > 0){\r\n          for (let i = 0; i < resourceData.Detiel.length; i++) {\r\n            let Option = {};\r\n            Option.label = resourceData.Detiel[i].text;\r\n            Option.value = resourceData.Detiel[i].id;\r\n            this.resourceList.push(Option);\r\n          }\r\n        }else{\r\n          this.resourceList = []\r\n        }\r\n      }else{\r\n        this.$toast({\r\n          type: 'fail',\r\n          message: resourceData.message ? resourceData.message : '后台异常',\r\n          className: \"my-toast\"\r\n        })\r\n      }\r\n    },\r\n    /**\r\n     * @name 根据楼栋楼层专业获取任务（进度）名称\r\n     */\r\n    async getTaskData(){\r\n      let taskData = await this.Request(\r\n        GetTaskByInfo({\r\n          ProjectID: this.ProjectID, \r\n          BuildName: this.buildName,\r\n          Specialty: this.specialty,\r\n          Floor: this.floor,\r\n          ResourceName: this.resourceName\r\n        })\r\n      )\r\n      if(taskData.StatusCode == 200){\r\n        this.taskList = [];\r\n        if(taskData.Detiel.length > 0){\r\n          for (let i = 0; i < taskData.Detiel.length; i++) {\r\n            let Option = {};\r\n            Option.label = taskData.Detiel[i].text;\r\n            Option.value = taskData.Detiel[i].id;\r\n            this.taskList.push(Option);\r\n          }\r\n        }else{\r\n          this.taskList = []\r\n        }\r\n      }else{\r\n        this.$toast({\r\n          type: 'fail',\r\n          message: taskData.message ? taskData.message : '后台异常',\r\n          className: \"my-toast\"\r\n        })\r\n      }\r\n    },\r\n    /**\r\n     * @name 切换折叠面板时触发\r\n     * @param {string | array} activeNames\r\n     */\r\n    changeCollapseItem(activeNames){\r\n      console.log(\"==折叠面板 activeNames==\", activeNames)\r\n      switch (activeNames) {\r\n        case \"1\":\r\n          {\r\n            this.getBuildingData()\r\n          }\r\n          break;\r\n        case \"2\":\r\n          {\r\n            if(this.buildName === \"\"){\r\n              this.$toast({\r\n                message: '请先选择楼栋！',\r\n                className: \"my-toast\"\r\n              });\r\n              return;\r\n            }\r\n          }\r\n          break;\r\n        case \"3\":\r\n          {\r\n            if(this.buildName === \"\" || this.specialty === \"\"){\r\n              this.$toast({\r\n                message: '请先选择楼栋和专业！',\r\n                className: \"my-toast\"\r\n              });\r\n              return;\r\n            }\r\n          }\r\n          break;\r\n        case \"4\":\r\n          {\r\n            if(this.buildName === \"\" || this.specialty === \"\" || this.floor === \"\"){\r\n              this.$toast({\r\n                message: '请先选择楼栋、专业和楼层！',\r\n                className: \"my-toast\"\r\n              });\r\n              return;\r\n            }\r\n          }\r\n          break\r\n        case \"5\":\r\n          {\r\n            if(this.buildName === \"\" || this.specialty === \"\" || this.floor === \"\" || this.resourceName === \"\"){\r\n              this.$toast({\r\n                message: '请先选择楼栋、专业、楼层和资源！',\r\n                className: \"my-toast\"\r\n              });\r\n              return;\r\n            }\r\n          }\r\n          break;\r\n      \r\n        default:\r\n          break;\r\n      }\r\n    },\r\n    //返回\r\n    goBack() {\r\n      this.$router.push({ path: \"/nav/to/index\" });\r\n    },\r\n    //查看详情\r\n    costControlDetails(item) {\r\n      console.log(\"item\", item);\r\n      this.$router.push({ \r\n        path: \"/CostControlDetails\",\r\n        query:{\r\n          BuildName: this.buildName,\r\n          Specialty: this.specialty,\r\n          Floor: this.floor,\r\n          TaskId: this.taskId,\r\n          ResourceName: item.ResorceName\r\n          // AdjustBOQ: item.AdjustBOQ\r\n        } \r\n      });\r\n    },\r\n    //右侧筛选\r\n    changeScreen() {\r\n      this.shwoScreen = !this.shwoScreen;\r\n    },\r\n    // 重置\r\n    resetFunc() {\r\n      this.buildName = ''\r\n      this.specialty = ''\r\n      this.floor = ''\r\n      this.resourceName = ''\r\n      this.taskId = ''\r\n      // this.screen_list = []\r\n    },\r\n    //确认 \r\n    recordCheck() {\r\n      // console.log('确认',this.screen_list)\r\n      this.getCostData()\r\n      this.shwoScreen = false\r\n    },\r\n    //选中楼栋\r\n    clickTung(item) {\r\n      // console.log(item,'clickTung')\r\n      // this.screen_list.push(item)\r\n      this.buildName = item.value;\r\n      this.specialty = ''\r\n      this.floor = ''\r\n      this.resourceName = ''\r\n      this.taskId = ''\r\n      this.getSpecialtyData()\r\n    },\r\n    //选中专业\r\n    clickMajor(item) {\r\n      this.specialty = item.value;\r\n      this.floor = ''\r\n      this.resourceName = ''\r\n      this.taskId = ''\r\n      this.getFloorData()\r\n    },\r\n    //选中楼层\r\n    clickFloor(item) {\r\n      this.floor = item.value;\r\n      this.resourceName = ''\r\n      this.taskId = ''\r\n      this.getResourceData()\r\n    },\r\n    //选中资源\r\n    clickResources(item) {\r\n      this.resourceName = item.value;\r\n      this.taskId = ''\r\n      this.getTaskData()\r\n    },\r\n    //选中进度节点\r\n    clickNode(item) {\r\n      this.taskId = item.value;\r\n    },\r\n  }\r\n};\r\n</script>\r\n<style lang='stylus' scoped rel='stylesheet/stylus'>\r\n.container-cost_control\r\n  width 100%\r\n  height 100%\r\n  .van-nav-bar\r\n    height 88px\r\n    line-height 88px\r\n    border-bottom 1px solid #E5E5E5  /*no*/\r\n    .fontsize\r\n      font-size 42px\r\n      color #333\r\n      display inline-block\r\n      vertical-align middle\r\n    .screen\r\n      width 41px\r\n      height 35px\r\n  .Interlayer\r\n    height 88px\r\n  .wrapper\r\n    .cost_control_box\r\n      height 250px\r\n      padding 0 23px\r\n      background-color #fff\r\n      color #333\r\n      margin-top 12px\r\n      .cost_control_title\r\n        height 88px\r\n        padding 24px 0\r\n        box-sizing border-box\r\n        font-size 30px\r\n        .title_index\r\n          display inline-block\r\n          width 40px\r\n          height 40px\r\n          background-color #5A92FF\r\n          color #fff\r\n          border-radius 50%\r\n          text-align center\r\n          line-height 40px\r\n        .title_content\r\n          margin-left 36px\r\n        .el-icon-arrow-right\r\n          float right\r\n      .cost_control_content\r\n        padding 0 20px\r\n        .content_details\r\n          display inline-block\r\n          width 50%\r\n          line-height 50px\r\n          font-size 28px\r\n</style>\r\n<style>\r\n@import \"~@/assets/css/resetVant.css\";\r\n/* 顶部表头 */\r\n.container-cost_control .van-nav-bar .van-nav-bar__title {\r\n  font-size: 36px;\r\n}\r\n/*右上角点击筛选样式*/ \r\n.select_layer {\r\n  position: fixed;\r\n  top: 80px;\r\n  right: 14px;\r\n  width: 352px;\r\n  box-sizing: border-box;\r\n  background-color: #222832;\r\n  opacity:0.9;\r\n  border-radius:8px;\r\n  padding: 10px 20px;\r\n  z-index: 999;\r\n}\r\n.select_layer .van-hairline--top-bottom::after{\r\n  border: none;\r\n}\r\n.select_layer .van-hairline--top::after {\r\n  border-top: none;\r\n  border-bottom: 1px solid #737577;  /*no*/\r\n}\r\n.select_layer .van-collapse  {\r\n  max-height: 1109px;\r\n}\r\n.select_layer .van-collapse-item .van-collapse-item__title--expanded::after {\r\n  visibility: hidden;\r\n}\r\n.select_layer .van-collapse-item:first-child {\r\n  border-bottom: 1px solid #737577;  /*no*/\r\n}\r\n.select_layer .van-collapse-item__title {\r\n  height: 80px;\r\n  line-height: 80px;\r\n  background-color: #222832;\r\n}\r\n.select_layer .van-cell__title{\r\n  font-size: 30px;\r\n  color: #fff;\r\n  text-align: left;         \r\n}\r\n.select_layer .van-cell__right-icon {\r\n  color: transparent;\r\n}\r\n.select_layer .icon_down {\r\n  position: absolute;\r\n  top: 45px;\r\n  right: 30px;\r\n  width: 16px;\r\n  height: 11px;\r\n}\r\n.select_layer .van-collapse-item__content{\r\n  padding: 0;\r\n  background-color: #222832;\r\n  color: #fff;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n  max-height: 500px;\r\n}\r\n.select_layer .van-cell {\r\n  width: 100%;\r\n  background-color: #222832;\r\n  color: #fff;\r\n}\r\n.select_layer .van-radio {   \r\n  height: 80px;\r\n  line-height: 80px;\r\n  height: 80px;\r\n  /* padding-left:20px; */\r\n  border-bottom: 1px solid #737577;  /*no*/\r\n  font-size: 28px;\r\n}\r\n.select_layer .van-radio:last-child {\r\n  border: 0;\r\n}\r\n.select_layer .van-radio .van-radio__label {\r\n  color: #fff;\r\n  vertical-align: baseline;\r\n}\r\n/* .select_layer .van-radio .van-radio__icon {\r\n  vertical-align: baseline;\r\n} */\r\n/* .select_layer .van-radio .van-radio__icon .van-icon {\r\n  border: 2px solid #fff;\r\n  width: 25px;\r\n  height: 25px;\r\n} */\r\n.select_layer .btn {\r\n  width: 100%;\r\n  height: 88px;\r\n  padding: 19px 0;\r\n  box-sizing: border-box;\r\n}\r\n.select_layer button {\r\n  width:49%;\r\n  height: 50px;\r\n  line-height: 50px;\r\n  background-color: #222934;\r\n  color: #fff;\r\n  font-size: 30px;\r\n  text-align: center;\r\n  border: none;\r\n}\r\n.select_layer .line {\r\n  display: inline-block;\r\n  width: 0px;\r\n  height: 50px;\r\n  border-left: 2px dashed #fff;\r\n  vertical-align: top;\r\n}\r\n.select_layer:after {\r\n  position: absolute;\r\n  top: -0.379rem;\r\n  right: 0.186667rem;\r\n  content: '';\r\n  width: 0px;\r\n  height: 0px;\r\n  border: 15px solid transparent;  /*no*/\r\n  border-bottom: 15px solid #222832;  /*no*/\r\n  z-index: 9999\r\n}\r\n\r\n.my-list .van-list__loading-text, .my-list .van-list__finished-text, .my-list .van-list__error-text{\r\n    line-height: 80px\r\n}\r\n.container-cost_control .van-radio__icon, .container-cost_control .van-radio__label{\r\n  display: inline;\r\n}\r\n</style>\r\n"]}]}