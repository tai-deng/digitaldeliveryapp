{"remainingRequest":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Public\\软件\\app\\src\\components\\wisdom-site\\wisdom-site2.vue?vue&type=style&index=0&id=1e2cc20b&lang=stylus&scoped=true&rel=stylesheet%2Fstylus&","dependencies":[{"path":"C:\\Users\\Public\\软件\\app\\src\\components\\wisdom-site\\wisdom-site2.vue","mtime":1557794425885},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\css-loader\\index.js","mtime":1552270042900},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1552270044128},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\postcss-loader\\src\\index.js","mtime":1552270043529},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\stylus-loader\\index.js","mtime":1552270053417},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1552270044128}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.container-wisdom-site\n    height calc(100% - 200px)\n    overflow auto\n.content-box\n    height 360px\n    background white\n    box-shadow: 0px 4px 8px 0px rgba(180, 180, 180, 0.5);\n    border-radius 20px\n    margin 0 24px 22px\n    text-align center\n    position relative\n    .top\n        position absolute\n        top 40px\n        left 50%\n        transform translateX(-50%)\n        display flex\n        align-items center\n        > p\n            font-size: 34px;\n            color: rgba(78, 79, 81, 1)\n            margin 20px 12px\n    .clock-box\n        position: absolute;\n        left 50%\n        top 140px\n        transform translateX(-50%)\n        width: 160px;\n        height: 160px;\n.team-box\n    .member-box\n        ul\n            li\n                height 150px\n                border-top 1px solid #E5E5E5\n                display flex\n                align-items center\n                .img-box\n                    width 100px\n                    height 100px\n                    img\n                        width 100%\n                        height 100%\n                        border-radius 50%\n                .info-box\n                    flex 1\n                    display flex\n                    flex-direction column\n                    margin-left 20px\n                    p:nth-child(1)\n                        font-size:32px;\n                        color:rgba(51,51,51,1);\n                    p:nth-child(2)\n                        font-size:28px;\n                        color:rgba(102,102,102,1);\n                .select-box\n                    display flex\n                    align-items center\n                    span\n                        font-size:32px;\n                    .sx-arrow-down\n                        border-style:solid dashed dashed dashed;\n                        border-width:11px;\n                        border-color:#9C9A9B transparent transparent transparent;\n                        width:0;\n                        height:0;\n                        margin-top: 6px;\n                        margin-left 16px\n.team-box /deep/\n    padding 0 20px\n    .van-collapse-item__content\n        padding-top 0\n    .van-cell:not(:last-child)::after\n        border 0\n    .van-collapse.van-hairline--top-bottom\n        .van-collapse-item\n            margin-bottom 20px\n            box-shadow: 0px 4px 8px 0px rgba(180, 180, 180, 0.5);\n            .van-collapse-item__title\n                border-radius 10px\n            .van-collapse-item__title.van-collapse-item__title--expanded\n                border-radius 10px 10px 0 0\n            .van-collapse-item__wrapper\n                border-radius 0 0 10px 10px\n            .van-cell\n                color: #323233;\n                font-size: 28px;\n                line-height: 48px;\n                padding: 20px 30px;\n            .van-cell__right-icon\n                margin-left: 10px;\n                color: #969799;\n            .van-cell__left-icon, .van-cell__right-icon {\n                min-width: 1em;\n                height: 48px;\n                font-size: 32px;\n                line-height: 48px;\n            }\n.van-popup--bottom\n    width calc(100% - 32px)\n    bottom 16px\n    border-radius 26px\n    background-color: transparent\n.van-actionsheet__item.van-hairline--top:not(:first-child)\n    .van-actionsheet__name\n        font-size:36px;\n        color:rgba(142,142,147,1)\n.van-actionsheet__item.van-hairline--top:nth-child(5)\n    border-radius 0 0 26px 26px\n.van-actionsheet__cancel\n    margin-top 20px\n    border-radius 26px 26px 0 0\n    font-size:36px;\n    color:rgba(0,122,255,1);\n.van-actionsheet__cancel::before\n    height 0\n.van-actionsheet__item\n    height: 100px;\n.van-actionsheet__item, .van-actionsheet__cancel\n    font-size: 32px;\n    line-height: 100px;\n.a\n    color #04C087;\n.b\n    color #FF7958\n.c\n    color #FCC01B\n.d\n    color #6A9FFE\n",{"version":3,"sources":["wisdom-site2.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"wisdom-site2.vue","sourceRoot":"src/components/wisdom-site","sourcesContent":["<!-- 智慧工地 -->\n<template>\n    <div class='container-wisdom-site'>\n        <div class='content-box'>\n            <div class='top'>\n                <img src=\"./imgs/icon1.png\" width=20>\n                <p>核对班组人员情况</p>\n            </div>\n            <div class='clock-box'>\n                <Clock :type='1' @addClock='addClock'/>\n            </div>\n        </div>\n        <div class=\"team-box\">\n            <van-collapse v-model=\"activeName\" accordion>\n                <van-collapse-item :title=\"n.GroupName\" :name=\"i\"\n                                   v-for='(n,i) in selectList' :key='i'>\n\n                    <div class='member-box'>\n                        <ul>\n                            <li v-for='(k,index) in n.userList' :key='index'>\n                                <div class='img-box'>\n                                    <img :src=\"k.Photo\">\n                                </div>\n                                <div class='info-box'>\n                                    <p>{{k.UserName}}</p>\n                                    <p>{{k.Mobile}}</p>\n                                </div>\n                                <div class='select-box' @click='actionsheetShow(i,index)'>\n                                    <span :class='filterState(k._state)'>\n                                        {{k._state}}\n                                    </span>\n                                    <i class='sx-arrow-down'/>\n                                </div>\n                            </li>\n                        </ul>\n                    </div>\n                </van-collapse-item>\n            </van-collapse>\n        </div>\n        <div>\n            <van-actionsheet\n                    v-model=\"show\"\n                    :actions=\"actions\"\n                    cancel-text=\"取消\"\n                    @select=\"onSelect\"\n                    @cancel=\"onCancel\"\n            />\n        </div>\n    </div>\n</template>\n\n<script>\n    import {GetGroupListWithPersonCount, GetMemberList, AddClock} from '@/api/api'\n    import Clock from './components/clock'\n    export default {\n        data() {\n            return {\n                activeName: '',\n                selectList: [],\n                userList: [],\n                show: false,\n                actions: [\n                    {\n                        name: '选择人员考勤状态'\n                    },\n                    {\n                        name: '正常',\n                    },\n                    {\n                        name: '迟到',\n                    },\n                    {\n                        name: '请假',\n                    },\n                    {\n                        name: '旷工',\n                    }\n                ],\n                index:{\n                    a: 0,\n                    b: 0\n                },\n                count: 0\n            }\n        },\n        components: {\n            Clock\n        },\n        created() {\n            this.init()\n        },\n        mounted() {\n        },\n        methods: {\n            async init() {\n                let res = await this.Request(GetGroupListWithPersonCount({\n                    projectId: localStorage.getItem('projectid'),\n                    isBlackList: false,\n                    keyword: ''\n                }))\n                if (res.StatusCode === 200) {\n                    this.selectList = res.Detiel\n                    var timer = setInterval(() => {\n                        if (this.count >= this.selectList.length) {\n                            clearInterval(timer);\n                            return;\n                        }\n                        this.select(this.selectList[this.count].GroupId, this.count)\n                        this.count++\n                    }, 300);\n                } else {\n                    this.$message({\n                        type: \"error\",\n                        message: res.Message,\n                        center: \"true\"\n                    });\n                }\n            },\n            async select(n, i) {\n                let res = await this.Request(GetMemberList({\n                    projectId: localStorage.getItem('projectid'),\n                    groupId: n,\n                    isBlackList: false,\n                    keyword: '',\n                    pageIndex: 1,\n                    pageSize: 999\n                }))\n                if (res.StatusCode === 200) {\n                    res.Detiel.map(v => {\n                        v._state = '正常'\n                        v._SignType = 1\n                    })\n                    this.selectList[i]['userList'] = res.Detiel\n                } else {\n                    this.$message({\n                        type: \"error\",\n                        message: res.Message,\n                        center: \"true\"\n                    });\n                }\n            },\n            async addClock() {\n                let user = JSON.parse(localStorage.getItem('loginUserInfo')).loginUserInfo\n                let listMemberClock = []\n                this.selectList.forEach(v => {\n                    v.userList.forEach(u => {\n                        listMemberClock.push({\n                            UserType: 2,\n                            MemberID: u.ID,\n                            ClockPerson: user.ID,\n                            SignType: u._SignType,\n                            ProjectID: localStorage.getItem('projectid')\n                        })\n                    })\n                })\n                let data = {\n                    listMemberClock: listMemberClock,\n                    ProjectID: localStorage.getItem('projectid')\n                }\n                let res = await this.Request(AddClock(data))\n                if (res.StatusCode === 200) {\n                    this.$message({\n                        type: \"success\",\n                        message: \"签到成功\",\n                        center: \"true\"\n                    });\n                } else {\n                    this.$message({\n                        type: \"error\",\n                        message: res.Message,\n                        center: \"true\"\n                    });\n                }\n            },\n            onSelect(item) {\n                if (item.name === '选择人员考勤状态') return\n                let _SignType = 1\n                switch (item.name) {\n                    case \"正常\":\n                        _SignType = 1\n                        break\n                    case \"迟到\":\n                        _SignType = 2\n                        break\n                    case \"请假\":\n                        _SignType = 3\n                        break\n                    case \"旷工\":\n                        _SignType = 4\n                        break\n                }\n                this.$set(this.selectList[this.index.a].userList[this.index.b], `_state`, item.name)\n                this.$set(this.selectList[this.index.a].userList[this.index.b], `_SignType`, _SignType)\n                this.show = false;\n            },\n            onCancel () {\n                this.show = false;\n            },\n            actionsheetShow (i,index) {\n                this.index.a = i\n                this.index.b = index\n                this.show = true\n            },\n            filterState (e){\n                switch (e){\n                    case \"正常\":\n                        return 'a'\n                    case \"迟到\":\n                        return 'b'\n                    case \"请假\":\n                        return 'c'\n                    case \"旷工\":\n                        return 'd'\n                }\n            }\n        }\n    }\n\n</script>\n<style lang='stylus' scoped rel='stylesheet/stylus'>\n    .container-wisdom-site\n        height calc(100% - 200px)\n        overflow auto\n    .content-box\n        height 360px\n        background white\n        box-shadow: 0px 4px 8px 0px rgba(180, 180, 180, 0.5);\n        border-radius 20px\n        margin 0 24px 22px\n        text-align center\n        position relative\n        .top\n            position absolute\n            top 40px\n            left 50%\n            transform translateX(-50%)\n            display flex\n            align-items center\n            > p\n                font-size: 34px;\n                color: rgba(78, 79, 81, 1)\n                margin 20px 12px\n        .clock-box\n            position: absolute;\n            left 50%\n            top 140px\n            transform translateX(-50%)\n            width: 160px;\n            height: 160px;\n    .team-box\n        .member-box\n            ul\n                li\n                    height 150px\n                    border-top 1px solid #E5E5E5\n                    display flex\n                    align-items center\n                    .img-box\n                        width 100px\n                        height 100px\n                        img\n                            width 100%\n                            height 100%\n                            border-radius 50%\n                    .info-box\n                        flex 1\n                        display flex\n                        flex-direction column\n                        margin-left 20px\n                        p:nth-child(1)\n                            font-size:32px;\n                            color:rgba(51,51,51,1);\n                        p:nth-child(2)\n                            font-size:28px;\n                            color:rgba(102,102,102,1);\n                    .select-box\n                        display flex\n                        align-items center\n                        span\n                            font-size:32px;\n                        .sx-arrow-down\n                            border-style:solid dashed dashed dashed;\n                            border-width:11px;\n                            border-color:#9C9A9B transparent transparent transparent;\n                            width:0;\n                            height:0;\n                            margin-top: 6px;\n                            margin-left 16px\n    .team-box /deep/\n        padding 0 20px\n        .van-collapse-item__content\n            padding-top 0\n        .van-cell:not(:last-child)::after\n            border 0\n        .van-collapse.van-hairline--top-bottom\n            .van-collapse-item\n                margin-bottom 20px\n                box-shadow: 0px 4px 8px 0px rgba(180, 180, 180, 0.5);\n                .van-collapse-item__title\n                    border-radius 10px\n                .van-collapse-item__title.van-collapse-item__title--expanded\n                    border-radius 10px 10px 0 0\n                .van-collapse-item__wrapper\n                    border-radius 0 0 10px 10px\n                .van-cell\n                    color: #323233;\n                    font-size: 28px;\n                    line-height: 48px;\n                    padding: 20px 30px;\n                .van-cell__right-icon\n                    margin-left: 10px;\n                    color: #969799;\n                .van-cell__left-icon, .van-cell__right-icon {\n                    min-width: 1em;\n                    height: 48px;\n                    font-size: 32px;\n                    line-height: 48px;\n                }\n    .van-popup--bottom\n        width calc(100% - 32px)\n        bottom 16px\n        border-radius 26px\n        background-color: transparent\n    .van-actionsheet__item.van-hairline--top:not(:first-child)\n        .van-actionsheet__name\n            font-size:36px;\n            color:rgba(142,142,147,1)\n    .van-actionsheet__item.van-hairline--top:nth-child(5)\n        border-radius 0 0 26px 26px\n    .van-actionsheet__cancel\n        margin-top 20px\n        border-radius 26px 26px 0 0\n        font-size:36px;\n        color:rgba(0,122,255,1);\n    .van-actionsheet__cancel::before\n        height 0\n    .van-actionsheet__item\n        height: 100px;\n    .van-actionsheet__item, .van-actionsheet__cancel\n        font-size: 32px;\n        line-height: 100px;\n    .a\n        color #04C087;\n    .b\n        color #FF7958\n    .c\n        color #FCC01B\n    .d\n        color #6A9FFE\n</style>\n"]}]}