{"remainingRequest":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Public\\软件\\app\\src\\components\\index\\my-message\\messageCentre.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Public\\软件\\app\\src\\components\\index\\my-message\\messageCentre.vue","mtime":1557902942828},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1552270024016},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1552270044128}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\n//混入\r\nimport interfaces from \"../modules/interfaces.js\"\r\n\r\nimport {QueryNoticeList} from '@/api/api.js'\r\nexport default {\r\n  mixins: [interfaces],\r\n  data() {\r\n    return {\r\n      list: [],//公告列表\r\n      loading: false,//加载中\r\n      finished: false,//是否加载到了最后\r\n      rows:10,//第次加载条数\r\n      page:1,//第几页\r\n    };\r\n  },\r\n  created(){\r\n    this._initData()\r\n  },\r\n  methods: {\r\n    _initData() {\r\n      this.loadNotices()\r\n    },\r\n    loadNotices(){\r\n      let params = {\r\n        UserId: Number(localStorage.getItem(\"userId\")),\r\n        ProjectId: localStorage.getItem(\"projectid\"),\r\n        page: this.page,\r\n        rows: this.rows\r\n      };\r\n      this.loading = true;\r\n      this.queryNoticeList(params).then(res=>{\r\n        this.list.push(...res.Detiel)\r\n        console.log(this.list)\r\n      // 加载状态结束\r\n        this.loading = false;\r\n        // 数据全部加载完成\r\n        if (this.list.length >= res.Count) {\r\n          this.loading = false;\r\n          this.finished = true;\r\n        }\r\n      })\r\n    },\r\n    onLoadMore(){\r\n      this.page++\r\n      this.loadNotices()\r\n    },\r\n    onClickLeft(){this.$router.push({path:'/nav/to/index'})}\r\n  }\r\n};\r\n",{"version":3,"sources":["messageCentre.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"messageCentre.vue","sourceRoot":"src/components/index/my-message","sourcesContent":["<!-- 消息中心 -->\r\n<template>\r\n  <div class=\"container-message-centre\">\r\n    <div class=\"vheader\">\r\n      <van-nav-bar\r\n        title=\"消息中心\"\r\n        left-arrow\r\n        @click-left=\"onClickLeft\"\r\n      />\r\n    </div>\r\n    <div class=\"wrapper\">\r\n      <div class=\"hold\"></div>\r\n      <!-- @load=\"onLoadMore\" -->\r\n      <van-list v-model=\"loading\" :offset=\"30\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoadMore\">\r\n        <van-cell v-for=\"item in list\" :key=\"item.index\"><span class=\"message\">{{item.Message}}</span><p class=\"time\">{{item.Time}}</p></van-cell>\r\n      </van-list>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script type='textecmascript-6'>\r\n//混入\r\nimport interfaces from \"../modules/interfaces.js\"\r\n\r\nimport {QueryNoticeList} from '@/api/api.js'\r\nexport default {\r\n  mixins: [interfaces],\r\n  data() {\r\n    return {\r\n      list: [],//公告列表\r\n      loading: false,//加载中\r\n      finished: false,//是否加载到了最后\r\n      rows:10,//第次加载条数\r\n      page:1,//第几页\r\n    };\r\n  },\r\n  created(){\r\n    this._initData()\r\n  },\r\n  methods: {\r\n    _initData() {\r\n      this.loadNotices()\r\n    },\r\n    loadNotices(){\r\n      let params = {\r\n        UserId: Number(localStorage.getItem(\"userId\")),\r\n        ProjectId: localStorage.getItem(\"projectid\"),\r\n        page: this.page,\r\n        rows: this.rows\r\n      };\r\n      this.loading = true;\r\n      this.queryNoticeList(params).then(res=>{\r\n        this.list.push(...res.Detiel)\r\n        console.log(this.list)\r\n      // 加载状态结束\r\n        this.loading = false;\r\n        // 数据全部加载完成\r\n        if (this.list.length >= res.Count) {\r\n          this.loading = false;\r\n          this.finished = true;\r\n        }\r\n      })\r\n    },\r\n    onLoadMore(){\r\n      this.page++\r\n      this.loadNotices()\r\n    },\r\n    onClickLeft(){this.$router.push({path:'/nav/to/index'})}\r\n  }\r\n};\r\n</script>\r\n<style lang='stylus' scoped rel='stylesheet/stylus'>\r\n.container-message-centre\r\n  width 100%\r\n  height 100%\r\n  .vheader\r\n    width: 100%;\r\n    height 88px\r\n  .wrapper\r\n    width 100%\r\n    // height 200px\r\n    overflow auto\r\n    // height 100%\r\n    // .hold\r\n    //   height 88px\r\n    //   width 100%\r\n    .message\r\n      display block\r\n      line-height 40px\r\n      margin-top 10px\r\n    .time\r\n      font-size 24px\r\n      color #666\r\n      // text-align right\r\n</style>\r\n<style>\r\n.container-message-centre .van-nav-bar{\r\n  height: 88px;\r\n}\r\n.container-message-centre .van-nav-bar__title{\r\n      height: 88px;\r\n    line-height: 88px;\r\n    font-size:36px;\r\nfont-family:PingFang-SC-Medium;\r\nfont-weight:bold;\r\ncolor:rgba(51,51,51,1);\r\n}\r\n.container-message-centre .van-nav-bar .van-icon{\r\n  font-size: 44px;\r\n  color: #333333;\r\n  vertical-align:initial;\r\n  padding: 20px 40px 20px 0\r\n}\r\n.container-message-centre .van-nav-bar .van-nav-bar__title {\r\n  font-size: 36px;\r\n}\r\n.container-message-centre  .van-cell{\r\n  font-size: 28px;\r\n  line-height: 60px;\r\n  border-bottom: 1px solid rgba(0,0,0,.1)\r\n}\r\n.container-message-centre .wrapper{\r\n  height: calc(100% - 88px);\r\n}\r\n</style>"]}]}