{"remainingRequest":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Public\\软件\\app\\src\\components\\issue\\materials\\materials.vue?vue&type=style&index=1&lang=css&","dependencies":[{"path":"C:\\Users\\Public\\软件\\app\\src\\components\\issue\\materials\\materials.vue","mtime":1557999632266},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\css-loader\\index.js","mtime":1552270042900},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1552270044128},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\postcss-loader\\src\\index.js","mtime":1552270043529},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1552270044128}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.container-materials .el-table th > .cell,\n.container-procurement-list .temporary thead th {\n  font-size: 28px;\n}\n.van-actionsheet__item {\n  line-height: 80px;\n  height: 80px;\n}\n.van-picker__toolbar {\n  height: 60px;\n  line-height: 60px;\n}\n/* 顶部表头 */\n.container-materials .van-nav-bar .van-nav-bar__title {\n  font-size: 36px;\n}\n.container-materials .van-nav-bar {\n  height: 88px;\n  line-height: 88px;\n}\n/* 表格样式更改 */\n.container-materials .materials_table .el-table .cell {\n  height: 60px;\n  line-height: 60px;\n  font-size: 24px;\n}\n.container-materials .materials_table .el-table input {\n  border: 3px solid #eeeeee;\n}\n/* 表格样式更改 */\n.container-materials .materials_table_largin .el-table .cell {\n  height: 60px;\n  line-height: 60px;\n  font-size: 24px;\n}\n.ccontainer-materials .materials_table_largin .el-table input {\n  border: 3px solid #eeeeee;\n}\n\n.materials_header_type .van-radio-group .van-radio {\n  display: block;\n  float: left;\n  width: 50%;\n}\n.materials_header_type .van-radio-group {\n  display: block;\n  float: left;\n  width: 77%;\n}\n.materials_header_list .van-radio-group .van-radio {\n  display: block;\n  float: left;\n  width: 50%;\n}\n.materials_header_list .van-radio-group {\n  display: block;\n  float: left;\n  width: 70%;\n}\n",{"version":3,"sources":["materials.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAg+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"materials.vue","sourceRoot":"src/components/issue/materials","sourcesContent":["<!-- materials材料出入库 -->\n<template>\n  <div class=\"container-materials\">\n    <van-nav-bar title=\"材料出入库\" @click-left=\"goBack\" fixed :border=\"true\" :z-index=\"100\">\n      <span class=\"el-icon-arrow-left fontsize\" slot=\"left\"></span>\n    </van-nav-bar>\n    <div class=\"materials_header\" style=\"margin-top:44px;margin-bottom:20px;\">\n      <div class=\"materials_header_type\">\n        <span>类型：</span>\n        <van-radio-group v-model=\"materialsType\">\n          <van-radio name=\"1\">入库</van-radio>\n          <van-radio name=\"2\">出库</van-radio>\n        </van-radio-group>\n      </div>\n\n      <div v-if=\"materialsType==1\" class=\"materials_header_list\">\n        <span>采购方式：</span>\n        <van-radio-group v-model=\"materialsPlan\">\n          <van-radio name=\"1\">计划采购</van-radio>\n          <van-radio name=\"2\">临时采购</van-radio>\n        </van-radio-group>\n      </div>\n\n      <div v-if=\"materialsPlan==1 && materialsType==1\" class=\"materials_list materials_border\">\n        <div>采购批次：</div>\n        <div @click=\"projectSelect\">\n          {{materialsNumber?materialsNumber:'请选择采购批次'}}\n          <van-icon name=\"arrow\" class=\"materials_list_span\"/>\n        </div>\n      </div>\n\n      <div\n        v-if=\"materialsPlan==2 || materialsType==2\"\n        class=\"materials_list_small materials_border\"\n      >\n        <div>楼栋：</div>\n        <div @click=\"glassSelect\">\n          {{options.BuildName?options.BuildName:'请选择楼栋'}}\n          <van-icon name=\"arrow\" class=\"materials_list_span\"/>\n        </div>\n      </div>\n\n      <div v-if=\"materialsPlan==2 || materialsType==2\" class=\"materials_list materials_border\">\n        <div>规格型号：</div>\n        <div @click=\"thingSelect\">\n          {{options.Specialty?options.Specialty:'请选择型号'}}\n          <van-icon name=\"arrow\" class=\"materials_list_span\"/>\n        </div>\n      </div>\n\n      <div v-if=\"materialsType==2\" class=\"materials_list_small materials_border\">\n        <div>楼层：</div>\n        <div @click=\"classSelect\">\n          {{materialclass}}\n          <van-icon name=\"arrow\" class=\"materials_list_span\"/>\n        </div>\n      </div>\n\n      <div\n        v-if=\"materialsType==1 && materialsPlan==2\"\n        class=\"materials_list_small materials_border\"\n      >\n        <div>楼层：</div>\n        <div @click=\"classSelect\">\n          {{options.Floor?options.Floor:'请选择楼层'}}\n          <van-icon name=\"arrow\" class=\"materials_list_span\"/>\n        </div>\n      </div>\n\n      <div v-if=\"materialsPlan==2 || materialsType==2\" class=\"materials_list materials_border\">\n        <div>物资名称：</div>\n        <div @click=\"nameSelect\">\n          {{options.ResourceName?options.ResourceName:'请选择物资'}}\n          <van-icon name=\"arrow\" class=\"materials_list_span\"/>\n        </div>\n      </div>\n\n      <div\n        v-if=\"materialsPlan==2 && materialsType==1\"\n        class=\"materials_list_largin materials_border\"\n      >\n        <div>采购需求量：</div>\n        <div>\n          <input type=\"number\" placeholder=\"采购需求数量\" v-model=\"needNumber\">\n        </div>\n      </div>\n\n      <div v-if=\"materialsPlan==2 && materialsType==1 \" class=\"materials_list materials_border\">\n        <div>需求时间：</div>\n        <div @click=\"getTimeShow\">\n          {{getTime?getTime:'请选择时间'}}\n          <van-icon name=\"arrow\" class=\"materials_list_span\"/>\n        </div>\n      </div>\n\n      <div v-if=\"materialsPlan==2 && materialsType==1\" class=\"materials_list materials_border\">\n        <div>已入库：</div>\n        <div>\n          <input type=\"number\" placeholder=\"已入库数量\" v-model=\"alreadyNumber\">\n        </div>\n      </div>\n\n      <div v-if=\"materialsPlan==2 && materialsType==1\" class=\"materials_list materials_border\">\n        <div>本次入库：</div>\n        <div>\n          <input type=\"number\" placeholder=\"入库数量\" v-model=\"thisNumber\">\n        </div>\n      </div>\n\n      <div v-if=\"materialsType==2\" class=\"materials_list materials_border\">\n        <div>本次出库：</div>\n        <div>\n          <input type=\"number\" placeholder=\"出库数量\" v-model=\"outThing\">\n        </div>\n      </div>\n\n      <div\n        v-if=\"materialsPlan==2 || materialsType==2\"\n        @click=\"addTable\"\n        class=\"materials_list materials_border materials_text\"\n      >\n        <span>\n          <img src=\"../../../assets/imgs/materials_add.png\" alt>添加\n        </span>\n      </div>\n    </div>\n    <!-- 入库--采购 -->\n    <div v-show=\"materialsPlan==1 && materialsType==1 \" class=\"materials_table\">\n      <el-table\n        style=\"width:100%;box-sizing:border-box;\"\n        :data=\"buyThingTable\"\n        :header-cell-style=\"{'background-color':'#5A92FF','color':'#ffffff'}\"\n      >\n        <el-table-column prop=\"ResourceName\" label=\"物资名称\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"ThisPurchaseNum\" label=\"采购需求量\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"InNum\" label=\"已入库\" align=\"center\"></el-table-column>\n        <el-table-column label=\"本次入库\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <input\n              v-model=\"buyThingTable[scope.$index].CurrentInNum\"\n              :placeholder=\"buyThingTable[scope.$index].Unit\"\n              type=\"number\"\n              name=\"num\"\n              class=\"table_input\"\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n\n    <!-- 入库-临时采购 -->\n    <div v-show=\"materialsPlan==2 && materialsType==1\" class=\"materials_table_largin\">\n      <el-table\n        style=\"width:100%;box-sizing:border-box;\"\n        :data=\"addTableNumber\"\n        :header-cell-style=\"{'background-color':'#5A92FF','color':'#ffffff'}\"\n      >\n        <el-table-column label=\"操作\" align=\"center\">\n          <template slot-scope=\"scope2\">\n            <a @click=\"handleDelete(scope2.$index)\">\n              <img\n                class=\"materials_table_img\"\n                src=\"../../../assets/imgs/materials_del.png\"\n                alt=\"图片\"\n              >\n            </a>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"ResourceName\" label=\"物资名称\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"Spec\" label=\"规格型号\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"BuildName\" label=\"楼栋\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"ThisPurchaseNum\" label=\"采购需求量\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"DemandTime\" label=\"需求时间\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"InNum\" label=\"已入库\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"CurrentInNum\" label=\"本次入库\" align=\"center\"></el-table-column>\n      </el-table>\n    </div>\n\n    <!-- 出库表格 -->\n    <div v-show=\"materialsType==2\" class=\"materials_table_largin\">\n      <el-table\n        style=\"width:100%;box-sizing:border-box;\"\n        :data=\"delTableNumber\"\n        :header-cell-style=\"{'background-color':'#5A92FF','color':'#ffffff'}\"\n      >\n        <el-table-column>\n          <template slot-scope=\"scope1\">\n            <a @click=\"delDelete(scope1.$index)\">\n              <img\n                class=\"materials_table_img\"\n                src=\"../../../assets/imgs/materials_del.png\"\n                alt=\"图片\"\n              >\n            </a>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"ResourceName\" label=\"物资名称\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"Spec\" label=\"规格型号\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"BuildName\" label=\"楼栋\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"classNumber\" label=\"楼层\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"allNumber\" label=\"施工预算量\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"already\" label=\"已出库\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"hasNumber\" label=\"库存\" align=\"center\"></el-table-column>\n        <el-table-column prop=\"thisnumber\" label=\"本次出库\" align=\"center\"></el-table-column>\n      </el-table>\n    </div>\n\n    <div class=\"project-title flex\">原始凭证</div>\n    <div class=\"uploader m20 flex\">\n      <template v-if=\"photoList.length\">\n        <div\n          v-for=\"(item,index) in photoList\"\n          :key=\"index\"\n          class=\"van-uploader-list\"\n          @click=\"cancelPhoto(index)\"\n        >\n          <img :src=\"item.TokenUrL+item.smallPhotoURL\">\n        </div>\n      </template>\n      <div v-if=\"photoList.length<3\" class=\"van-uploader\" @click=\"selectPhoto\">\n        <img src=\"../../user/user_assets/imgs/up-proof.png\">\n      </div>\n      <div v-if=\"photoList.length<2\" class=\"uploader-tip\">最多上传3张</div>\n    </div>\n\n    <div v-if=\"materialsType==1\" class=\"materials_list materials_border\">\n      <div>入库时间：</div>\n      <div @click=\"beginTimeSelect\">\n        {{beginTime ? beginTime:'请选择入库时间'}}\n        <van-icon name=\"arrow\" class=\"materials_list_span\"/>\n      </div>\n    </div>\n\n    <div v-if=\"materialsType==2\" class=\"materials_list materials_border materials_margin\">\n      <div>出库时间：</div>\n      <div @click=\"outTimeSelect\">\n        {{outTime?outTime:'请选择出库时间'}}\n        <van-icon name=\"arrow\" class=\"materials_list_span\"/>\n      </div>\n    </div>\n\n    <div v-if=\" materialsType==2\" class=\"materials_list materials_border\">\n      <div>领料人：</div>\n      <div @click=\"peopleSelect\">\n        {{getpeople?getpeople:'请选择领料人'}}\n        <van-icon name=\"arrow\" class=\"materials_list_span\"/>\n      </div>\n    </div>\n\n    <div v-if=\"materialsType==1\" class=\"materials_foot\">\n      <van-button class=\"btn\" square type=\"primary\" block @click=\"searchAllTable\">确认入库</van-button>\n    </div>\n\n    <div v-if=\"materialsType==2\" class=\"materials_foot\">\n      <van-button class=\"btn\" square type=\"primary\" block @click=\"searchoutTable\">确认出库</van-button>\n    </div>\n\n    <van-popup v-model=\"timeShow\" position=\"bottom\">\n      <van-datetime-picker\n        v-model=\"currentDate\"\n        @confirm=\"closeTime\"\n        @cancel=\"cancel\"\n        :formatter=\"formatter\"\n        type=\"date\"\n      />\n    </van-popup>\n\n    <!-- 上拉菜单--每次点击事件-传入可以选择的值-然后再把值传入 -->\n    <van-actionsheet v-model=\"showSelect\" :actions=\"actions\" item-height=\"60\" @select=\"onSelect\"/>\n\n    <van-actionsheet v-model=\"phone_show\">\n      <van-uploader\n        :after-read=\"onRead\"\n        accept=\"image/jpeg\"\n        capture=\"camera\"\n        class=\"upload-file-item\"\n      >\n        <div>拍摄</div>\n      </van-uploader>\n      <van-uploader :after-read=\"onRead\" class=\"upload-file-item\">\n        <div>从手机相册选择</div>\n      </van-uploader>\n      <div class=\"upload-file-item cancel\" @click=\"uploadCancel\">取消</div>\n    </van-actionsheet>\n  </div>\n</template>\n\n<script type='textecmascript-6'>\nimport {\n  getPurchaseBatch,\n  getBatchDetails,\n  submitIn,\n  uploadingPic,\n  getBuildList,\n  getSpecialtyList,\n  getFloorList,\n  getResourceList,\n  storeOut,\n  getStewardList\n} from \"../../../assets/js/scopeManage.js\";\nexport default {\n  data() {\n    return {\n      options: {\n        BuildName: \"\", // 楼栋\n        Specialty: \"\", // 专业\n        Floor: \"\", // 楼层\n        ResourceName: \"\" // 物资类别\n      },\n      SpecialtyList: [],\n      BuildNameList: [],\n      purchaseBatchList: [],\n      stewardList: [],\n      purachseid: \"\",\n      materialsType: \"1\", //入库/出库\n      materialsPlan: \"1\", //计划采购/临时采购\n      materialsNumber: \"\",\n      actions: [], //上拉菜单--总的数据集合\n      showSelect: false, //上拉菜单--显示\n      selectNumer: 1,\n      //入库采购\n      buyThingTable: [],\n      phone_show: false,\n\n      photoList: [],\n      timeShow: false, //时间模态框\n      currentDate: new Date(),\n      beginTime: \"\", //入库时间\n      timeNumber: 1,\n      materialsName: \"请选择名称\", //物资名称\n      materialsThing: \"请选择规格型号\",\n      materialsGlass: \"请选择楼栋\",\n      needNumber: \"\", //采购需求量\n      getTime: \"\", //需求时间\n      alreadyNumber: \"\", //已入库\n      thisNumber: \"\", //本次入库\n      materialclass: \"请选择楼层\",\n      outThing: \"\", //本次出库\n      getpeople: \"\",\n      outTime: \"\", //出库时间\n      //入库临时采购\n      addTableNumber: [],\n      //出库表格\n      delTableNumber: []\n    };\n  },\n  created() {\n    getBuildList(this, res => {\n      this.BuildNameList = res.map(item => {\n        return {\n          name: item.text,\n          value: item.text\n        };\n      });\n      this.BuildNameList.splice(0, 1);\n    });\n    getPurchaseBatch(this, res => {\n      this.purchaseBatchList = res.map(item => {\n        return {\n          name: item.Code,\n          value: item.ID\n        };\n      });\n    });\n    getStewardList(this);\n  },\n  methods: {\n    // 提交入库\n    searchAllTable() {\n      if (this.beginTime == \"\") {\n        this.$message({\n          message: \"入库时间不能为空！\",\n          type: \"warning\"\n        });\n        return;\n      }\n      let listItems = [];\n      if (this.materialsPlan == 1) {\n        listItems = this.buyThingTable.filter(item => {\n          return item.CurrentInNum !== \"\";\n        });\n      } else if (this.materialsPlan == 2) {\n        listItems = this.addTableNumber;\n      }\n\n      let par = {\n        model: {\n          InType: this.materialsPlan, // 入库类型\n          InDate: this.beginTime, // 入库时间\n          PurchaseID: this.purachseid, // 批次ID\n          PurchaseCode: this.materialsNumber // 批次code\n        },\n        listItems,\n        infiles: this.photoList\n      };\n      submitIn(this, par, () => {});\n    },\n    //删除照片\n    cancelPhoto(index) {\n      this.$dialog\n        .confirm({\n          title: \"删除确认\",\n          message: \"确认删除照片？\",\n          className: \"delecet_photo\"\n        })\n        .then(() => {\n          // on confirm\n          this.photoList.splice(index, 1);\n        })\n        .catch(() => {\n          // on cancel\n        });\n    },\n    //获取照片\n    selectPhoto() {\n      if (!this.phone_show) {\n        this.phone_show = true;\n      } else {\n        this.phone_show = false;\n      }\n    },\n    uploadCancel() {\n      this.phone_show = false;\n    },\n    // 上传图片\n    onRead(file, detail) {\n      uploadingPic(this, file, detail);\n    },\n    //采购批次\n    projectSelect() {\n      this.showSelect = true;\n      this.selectNumer = 1;\n      this.actions = this.purchaseBatchList;\n    },\n    //物资名称\n    nameSelect() {\n      this.showSelect = true;\n      this.selectNumer = 2;\n      this.actions = this.ResorceNameList;\n    },\n    //物资型号\n    thingSelect() {\n      this.showSelect = true;\n      this.selectNumer = 3;\n      this.actions = this.SpecialtyList;\n    },\n    //楼栋\n    glassSelect() {\n      this.showSelect = true;\n      this.selectNumer = 4;\n      this.actions = this.BuildNameList;\n    },\n    //楼层\n    classSelect() {\n      this.showSelect = true;\n      this.selectNumer = 5;\n      this.actions = this.FloorbyList;\n    },\n    //领料人\n    peopleSelect() {\n      this.showSelect = true;\n      this.selectNumer = 6;\n      this.actions = this.stewardList;\n    },\n    //需求时间\n    getTimeShow() {\n      this.timeShow = true;\n      this.timeNumber = 2;\n    },\n    //出库时间\n    outTimeSelect() {\n      this.timeShow = true;\n      this.timeNumber = 3;\n    },\n    //点击上拉菜单的选项时候\n    onSelect(item) {\n      if (this.selectNumer == 1) {\n        this.materialsNumber = item.name; //采购批次\n        this.purachseid = item.value;\n      } else if (this.selectNumer == 2) {\n        this.options.ResourceName = item.name; //物资名称\n      } else if (this.selectNumer == 3) {\n        this.options.Specialty = item.name; //物资型号\n      } else if (this.selectNumer == 4) {\n        this.options.BuildName = item.name; //楼栋\n      } else if (this.selectNumer == 5) {\n        this.options.Floor = item.name; //楼层\n      } else if (this.selectNumer == 6) {\n        this.getpeople = item.name; //领料人\n      }\n      this.showSelect = false;\n    },\n    goBack() {\n      this.$router.push({ path: \"/#\" });\n    },\n    //上传图片的时候\n    handleRemove(file, fileList) {\n      console.log(file, fileList);\n    },\n    //上传图片的时候\n    handlePictureCardPreview(file) {\n      this.dialogImageUrl = file.url;\n      this.dialogVisible = true;\n    },\n    //点击入库时间\n    beginTimeSelect() {\n      this.timeShow = true;\n      this.timeNumber = 1;\n    },\n    //时间上拉菜单上的--确定\n    closeTime(value) {\n      if (this.timeNumber == \"1\") {\n        console.log(\"110\");\n        this.beginTime =\n          value.getFullYear() +\n          \"/\" +\n          (value.getMonth() + 1) +\n          \"/\" +\n          value.getDate();\n      } else if (this.timeNumber == \"2\") {\n        this.getTime =\n          value.getFullYear() +\n          \"/\" +\n          (value.getMonth() + 1) +\n          \"/\" +\n          value.getDate();\n      } else if (this.timeNumber == \"3\") {\n        this.outTime =\n          value.getFullYear() +\n          \"/\" +\n          (value.getMonth() + 1) +\n          \"/\" +\n          value.getDate();\n      }\n      this.timeShow = false;\n    },\n    //时间上拉菜单上的--取消\n    cancel() {\n      this.timeShow = false;\n    },\n    formatter(type, value) {\n      if (type === \"year\") {\n        return `${value}年`;\n      } else if (type === \"month\") {\n        return `${value}月`;\n      } else if (type === \"day\") {\n        return `${value}日`;\n      }\n      return value;\n    },\n    //点击-临时采购表格中的删除\n    handleDelete(index) {\n      this.addTableNumber.splice(index, 1);\n    },\n    delDelete(index) {\n      this.delTableNumber.splice(index, 1);\n    },\n    //点击-临时采购添加按钮\n    addTable() {\n      if (this.materialsType == 2) {\n        //出库--表格添加\n        let text = {\n          ResourceName: this.options.ResourceName, //物资名称\n          Spec: this.options.Specialty, //型号\n          BuildName: this.options.BuildName, //楼栋\n          Floor: this.options.Floor, //楼层\n          DemandNum: \"\", //施工预算总量\n          already: \"\", //已出库\n          hasNumber: \"\", //库存\n          thisnumber: this.outThing //本次出库\n        };\n        this.delTableNumber.push(text);\n      } else {\n        //入库临时采购-添加\n        let text = {\n          ResourceName: this.options.ResourceName, //物资名称\n          Spec: this.options.Specialty, //型号\n          BuildName: this.options.BuildName, //楼栋\n          Floor: this.options.Floor, //楼层\n\n          DemandTime: this.getTime, //需求时间\n          DemandNum: this.needNumber, //需求总量\n          InNum: this.alreadyNumber, //已入库\n          CurrentInNum: this.thisNumber //本次入库\n        };\n        this.addTableNumber.push(text);\n      }\n    },\n    //点击出库按钮\n    searchoutTable() {\n      let listItems = this.delTableNumber;\n      let par = {\n        model: {\n          OutDate: this.outTime, // 出库时间\n          UsePerson: this.getpeople // 领料人\n        },\n        listItems,\n        infiles: this.photoList,\n      };\n      storeOut(this, par);\n    },\n    // 数据复原\n    recoverData(val) {\n      this.photoList = [];\n      this.options = {\n        BuildName: \"\", // 楼栋\n        Specialty: \"\", // 专业\n        Floor: \"\", // 楼层\n        ResourceName: \"\" // 物资类别\n      };\n      if (val == 1) {\n        this.outThing = \"\";\n        this.delTableNumber = [];\n        this.getpeople = \"\";\n        this.outTime = \"\";\n      }\n      if (val == 2) {\n        this.beginTime = \"\";\n        this.materialsNumber = \"\";\n        this.buyThingTable = [];\n\n        this.addTableNumber = [];\n        this.needNumber = \"\";\n        this.getTime = \"\";\n        this.alreadyNumber = \"\";\n        this.outThing = \"\";\n      }\n      if (val == 3) {\n        this.beginTime = \"\";\n        this.materialsNumber = \"\";\n        this.buyThingTable = [];\n      }\n      if (val == 4) {\n        this.beginTime = \"\";\n        this.addTableNumber = [];\n        this.needNumber = \"\";\n        this.getTime = \"\";\n        this.alreadyNumber = \"\";\n        this.outThing = \"\";\n      }\n    }\n  },\n  watch: {\n    // 楼层\n    \"options.Floor\": {\n      handler(val, oldval) {\n        if (val != \"\") {\n          this.ResorceNameList = [];\n          this.options.ResourceName = \"\";\n          getResourceList(this, res => {\n            this.ResorceNameList = res.map(item => {\n              return {\n                name: item.text,\n                value: item.text\n              };\n            });\n          });\n          this.ResorceNameList.splice(0, 1);\n        }\n      }\n    },\n    // 专业\n    \"options.Specialty\": {\n      handler(val, oldval) {\n        if (val != \"\") {\n          this.FloorbyList = [];\n          this.options.Floor = \"\";\n\n          this.ResorceNameList = [];\n          this.options.ResourceName = \"\";\n          getFloorList(this, res => {\n            this.FloorbyList = res.map(item => {\n              return {\n                name: item.text,\n                value: item.text\n              };\n            });\n          });\n          this.FloorbyList.splice(0, 1);\n        }\n      }\n    },\n    \"options.BuildName\"(val) {\n      this.SpecialtyList = [];\n      this.options.Specialty = \"\";\n\n      this.FloorbyList = [];\n      this.options.Floor = \"\";\n\n      this.ResorceNameList = [];\n      this.options.ResourceName = \"\";\n\n      getSpecialtyList(this, res => {\n        this.SpecialtyList = res.map(item => {\n          return {\n            name: item.text,\n            value: item.text\n          };\n        });\n        this.SpecialtyList.splice(0, 1);\n      });\n    },\n    materialsNumber(val) {\n      if (val !== \"\") {\n        getBatchDetails(this, { purachseid: this.purachseid });\n      }\n    },\n    materialsType(val) {\n      this.recoverData(val);\n    },\n    materialsPlan(val) {\n      if (val == 1) {\n        this.recoverData(3);\n      }\n      if (val == 2) {\n        this.recoverData(4);\n      }\n    }\n  }\n};\n</script>\n<style lang='stylus' scoped rel='stylesheet/stylus'>\n@import '../../user/user_assets/base.css';\n\n.container-materials {\n  width: 100%;\n  background-color: #F6F8FA;\n  font-size: 30px;\n\n  .m20 {\n    padding: 0 0.32rem;\n  }\n\n  .project-title {\n    font-size: 28px;\n    font-family: SourceHanSansCN-Medium;\n    font-weight: 500;\n    color: rgba(51, 51, 51, 1);\n    height: 1.18rem;\n    padding: 0 0.32rem;\n    background-color: #f6f8fa;\n  }\n\n  .upload-file-item {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 88px;\n    font-size: 32px;\n    color: #333;\n  }\n\n  .cancel {\n    color: #666 !important;\n  }\n\n  .uploader {\n    background-color: #F6F8FA;\n    padding-bottom: 20px;\n\n    .van-uploader {\n      margin-right: 10px;\n      width: 2.66rem;\n      height: 2.66rem;\n      background: rgba(255, 255, 255, 1);\n      border-radius: 0.11rem;\n      border: 0.027rem solid rgba(189, 193, 198, 1);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n\n      img {\n        width: 0.9rem;\n        height: 0.9rem;\n        display: block;\n      }\n    }\n\n    .van-uploader-list {\n      margin-right: 10px;\n      width: 200px;\n      height: 200px;\n      background: rgba(255, 255, 255, 1);\n      border-radius: 0.11rem;\n      border: 0.027rem solid rgba(189, 193, 198, 1);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n\n      img {\n        width: 200px;\n        height: 200px;\n        display: block;\n      }\n    }\n\n    .uploader-tip {\n      font-size: 26px;\n      font-family: SourceHanSansCN-Regular;\n      font-weight: 400;\n      color: rgba(153, 153, 153, 1);\n      align-self: flex-end;\n      margin-left: 0.16rem;\n    }\n  }\n\n  .materials_header {\n    width: 100%;\n  }\n\n  .materials_header_type {\n    height: 88px;\n    line-height: 88px;\n    border-bottom: 2px solid #EDEDED;\n    box-sizing: border-box;\n    background-color: #ffffff;\n    padding: 0px 20px;\n    margin-bottom: 20px;\n  }\n\n  .materials_header_type>span {\n    display: inline-block;\n    float: left;\n    width: 15%;\n  }\n\n  .materials_header_list {\n    height: 88px;\n    line-height: 88px;\n    border-bottom: 2px solid #EDEDED;\n    box-sizing: border-box;\n    background-color: #ffffff;\n    padding: 0px 20px;\n  }\n\n  .materials_header_list>span {\n    display: inline-block;\n    float: left;\n    width: 30%;\n  }\n\n  .materials_list {\n    height: 88px;\n    line-height: 88px;\n    font-size: 30px;\n    box-sizing: border-box;\n    background-color: #ffffff;\n    padding: 0px 20px;\n  }\n\n  .materials_border {\n    border-bottom: 2px solid #EDEDED;\n  }\n\n  .materials_list>div:first-child {\n    width: 24%;\n    display: inline-block;\n    float: left;\n  }\n\n  .materials_list>div:last-child {\n    width: 76%;\n    display: inline-block;\n    float: left;\n    padding-left: 20px;\n    box-sizing: border-box;\n    color: #A7A7A7;\n  }\n\n  .materials_list_largin {\n    height: 88px;\n    line-height: 88px;\n    font-size: 30px;\n    box-sizing: border-box;\n    background-color: #ffffff;\n    padding: 0px 20px;\n  }\n\n  .materials_list_largin>div:first-child {\n    width: 28%;\n    display: inline-block;\n    float: left;\n  }\n\n  .materials_list_largin>div:last-child {\n    width: 72%;\n    display: inline-block;\n    float: left;\n    padding-left: 20px;\n    box-sizing: border-box;\n    color: #A7A7A7;\n  }\n\n  .materials_list_small {\n    height: 88px;\n    line-height: 88px;\n    font-size: 30px;\n    box-sizing: border-box;\n    background-color: #ffffff;\n    padding: 0px 20px;\n  }\n\n  .materials_list_small>div:first-child {\n    width: 16%;\n    display: inline-block;\n    float: left;\n  }\n\n  .materials_list_small>div:last-child {\n    width: 84%;\n    display: inline-block;\n    float: left;\n    padding-left: 20px;\n    box-sizing: border-box;\n    color: #A7A7A7;\n  }\n\n  .materials_list_span {\n    float: right;\n    margin-right: 20px;\n    line-height: 88px;\n  }\n\n  .materials_table {\n    margin-top: 20px;\n  }\n\n  .materials_img p {\n    line-height: 60px;\n    padding-left: 20px;\n  }\n\n  .materials_img>div {\n    background-color: #F6F8FA;\n  }\n\n  .materials_margin {\n    margin-top: 20px;\n  }\n\n  .materials_foot {\n    padding: 0.4rem 0.32rem;\n    background: rgba(246, 248, 250, 1);\n\n    .van-button--primary {\n      height: 1.18rem;\n      background: rgba(90, 147, 255, 1);\n      border-radius: 0.15rem;\n      font-size: 28px;\n      font-family: SourceHanSansCN-Medium;\n      font-weight: 500;\n      color: rgba(255, 255, 255, 1);\n    }\n  }\n\n  .materials_button {\n    background: rgba(100, 155, 255, 1);\n    box-shadow: 0px 3px 7px 0px rgba(91, 140, 237, 0.13);\n    border-radius: 8px;\n    font-size: 28px;\n    font-family: PingFang-SC-Bold;\n    font-weight: bold;\n    color: rgba(255, 255, 255, 1);\n    padding: 17px 146px;\n    border: 0;\n  }\n\n  .materials_list img {\n    width: 30px;\n    height: 30px;\n    margin-right: 20px;\n  }\n\n  .materials_text {\n    color: #A6A6A6;\n  }\n\n  .materials_table_largin {\n    width: 100%;\n    overflow: scroll;\n    max-height: 400px;\n  }\n\n  .materials_table_img {\n    width: 30px;\n  }\n\n  height: 30px;\n}\n</style>\n<style>\n.container-materials .el-table th > .cell,\n.container-procurement-list .temporary thead th {\n  font-size: 28px;\n}\n.van-actionsheet__item {\n  line-height: 80px;\n  height: 80px;\n}\n.van-picker__toolbar {\n  height: 60px;\n  line-height: 60px;\n}\n/* 顶部表头 */\n.container-materials .van-nav-bar .van-nav-bar__title {\n  font-size: 36px;\n}\n.container-materials .van-nav-bar {\n  height: 88px;\n  line-height: 88px;\n}\n/* 表格样式更改 */\n.container-materials .materials_table .el-table .cell {\n  height: 60px;\n  line-height: 60px;\n  font-size: 24px;\n}\n.container-materials .materials_table .el-table input {\n  border: 3px solid #eeeeee;\n}\n/* 表格样式更改 */\n.container-materials .materials_table_largin .el-table .cell {\n  height: 60px;\n  line-height: 60px;\n  font-size: 24px;\n}\n.ccontainer-materials .materials_table_largin .el-table input {\n  border: 3px solid #eeeeee;\n}\n\n.materials_header_type .van-radio-group .van-radio {\n  display: block;\n  float: left;\n  width: 50%;\n}\n.materials_header_type .van-radio-group {\n  display: block;\n  float: left;\n  width: 77%;\n}\n.materials_header_list .van-radio-group .van-radio {\n  display: block;\n  float: left;\n  width: 50%;\n}\n.materials_header_list .van-radio-group {\n  display: block;\n  float: left;\n  width: 70%;\n}\n</style>\n"]}]}