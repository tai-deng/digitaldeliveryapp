{"remainingRequest":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Public\\软件\\app\\src\\components\\issue\\purchase\\modules\\allPurchase.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Public\\软件\\app\\src\\components\\issue\\purchase\\modules\\allPurchase.vue","mtime":1558164566606},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1552270024016},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1552270044128}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport EchartImg from \"./EchartImg\";\r\nimport {\r\n  getBuildList,\r\n  getSpecialtyList,\r\n  getFloorList,\r\n  getResourceList,\r\n  getCollectList,\r\n  clearSel,\r\n  getResourceInfo,\r\n  getResourceName\r\n} from \"../../../../assets/js/scopeManage.js\";\r\n\r\nexport default {\r\n  components: { EchartImg },\r\n  data() {\r\n    return {\r\n      BuildNameList: [],\r\n      SpecialtyList: [],\r\n      FloorbyList: [],\r\n      ResorceNameList: [],\r\n      options: {\r\n        BuildName: \"\",\r\n        Specialty: \"\",\r\n        Floor: \"\",\r\n        CatagoryName: \"\"\r\n      },\r\n      buyThingTable: [],\r\n      ResourceName: \"\",\r\n      ResourceList: [],\r\n\r\n      active: 0, //左右滑块\r\n      showMeTable: false, //导航右边图标---显示查询条件\r\n      activeName: \"1\", //导航右边图标---显示模板的手风琴\r\n      selectName: \"\", //专业\r\n      contextBySelect: \"\", // 物资类别\r\n      glassBySelect: \"\", //楼栋\r\n      classBySelect: \"\", //楼层\r\n      buyingSelect: \"\", //已完成采购\r\n      //专业\r\n      textNameColl: [\r\n        { value: \"1\", name: \"全部\" },\r\n        { value: \"2\", name: \"建筑专业\" },\r\n        { value: \"3\", name: \"结构专业\" },\r\n        { value: \"4\", name: \"暖通系统\" },\r\n        { value: \"5\", name: \"通风系统\" },\r\n        { value: \"6\", name: \"弱电系统\" },\r\n        { value: \"7\", name: \"强电系统\" }\r\n      ],\r\n      // 物资类别\r\n      contextSelect: [\r\n        { value: \"1\", name: \"全部\" },\r\n        { value: \"2\", name: \"门\" },\r\n        { value: \"3\", name: \"混泥土\" },\r\n        { value: \"4\", name: \"水泥\" },\r\n        { value: \"5\", name: \"钢筋\" }\r\n      ],\r\n      // 楼栋\r\n      glassSelect: [\r\n        { value: \"1\", name: \"A1\" },\r\n        { value: \"2\", name: \"A2\" },\r\n        { value: \"3\", name: \"A3\" },\r\n        { value: \"4\", name: \"A4\" },\r\n        { value: \"5\", name: \"A5\" }\r\n      ],\r\n      // 楼层\r\n      classSelect: [\r\n        { value: \"1\", name: \"1楼\" },\r\n        { value: \"2\", name: \"2楼\" },\r\n        { value: \"3\", name: \"3楼\" },\r\n        { value: \"4\", name: \"4楼\" },\r\n        { value: \"5\", name: \"5楼\" }\r\n      ],\r\n      //已完成采购\r\n      buyingThing: [\r\n        { value: \"1\", name: \"采购中\" },\r\n        { value: \"2\", name: \"未采购\" }\r\n      ],\r\n      //物资种类--Echart图\r\n      allThing: \"\",\r\n      allThingList: [\r\n        { value: \"1\", name: \"c20混凝土\" },\r\n        { value: \"2\", name: \"门\" },\r\n        { value: \"3\", name: \"c30混凝土\" }\r\n      ],\r\n\r\n      //echarts数据格式\r\n      table3: {\r\n        title: \"总产值分析\", //主标题\r\n        subtext: \"单位（万元）\", //副标题\r\n        legend: [\"出库量\", \"采购量\"], //折线名字\r\n        xData: [\r\n          \"1月\",\r\n          \"2月\",\r\n          \"3月\",\r\n          \"4月\",\r\n          \"5月\",\r\n          \"6月\",\r\n          \"7月\",\r\n          \"8月\",\r\n          \"9月\",\r\n          \"10月\",\r\n          \"11月\",\r\n          \"12月\"\r\n        ], //x轴数据\r\n        yData: [\r\n          {\r\n            name: \"出库量\",\r\n            type: \"line\",\r\n            color: \"#2C77CE\",\r\n            data: [10, 16, 15, 83, 92, 63, 40, 35, 22, 80, 92, 63]\r\n          },\r\n          {\r\n            name: \"采购量\",\r\n            type: \"line\",\r\n            color: \"#499341\",\r\n            data: [1, 18, 24, 53, 35, 22, 80, 35, 22, 80, 15, 18]\r\n          }\r\n        ]\r\n      },\r\n      //出入库材料表格\r\n      allTable: [\r\n        {\r\n          getTime: \"2019/01/02\",\r\n          outTime: \"2019/01/06\",\r\n          getNumber: \"66666\",\r\n          outNumber: \"33333\",\r\n          allhas: \"300\",\r\n          allout: \"520\"\r\n        },\r\n        {\r\n          getTime: \"2019/01/02\",\r\n          outTime: \"2019/01/06\",\r\n          getNumber: \"66666\",\r\n          outNumber: \"33333\",\r\n          allhas: \"300\",\r\n          allout: \"520\"\r\n        },\r\n        {\r\n          getTime: \"2019/01/02\",\r\n          outTime: \"2019/01/06\",\r\n          getNumber: \"66666\",\r\n          outNumber: \"33333\",\r\n          allhas: \"300\",\r\n          allout: \"520\"\r\n        },\r\n        {\r\n          getTime: \"2019/01/02\",\r\n          outTime: \"2019/01/06\",\r\n          getNumber: \"66666\",\r\n          outNumber: \"33333\",\r\n          allhas: \"300\",\r\n          allout: \"520\"\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  created() {\r\n    this.getDataList();\r\n    getBuildList(this, res => {\r\n      this.BuildNameList = res.map(item => {\r\n        return {\r\n          name: item.text,\r\n          value: item.id\r\n        };\r\n      });\r\n      this.BuildNameList.splice(0, 1);\r\n    });\r\n    getResourceName(this, res => {\r\n      this.ResourceList = res.map(item => {\r\n        return {\r\n          name: item,\r\n          value: item\r\n        };\r\n      });\r\n    });\r\n  },\r\n  watch: {\r\n    \"options.BuildName\"(val) {\r\n      if (val != \"\") {\r\n        clearSel(this, 1);\r\n        getSpecialtyList(this, res => {\r\n          this.SpecialtyList = res.map(item => {\r\n            return {\r\n              name: item.text,\r\n              value: item.id\r\n            };\r\n          });\r\n          this.SpecialtyList.splice(0, 1);\r\n        });\r\n      }\r\n    },\r\n    \"options.Specialty\"(val) {\r\n      if (val != \"\") {\r\n        clearSel(this, 2);\r\n        getFloorList(this, res => {\r\n          this.FloorbyList = res.map(item => {\r\n            return {\r\n              name: item.text,\r\n              value: item.id\r\n            };\r\n          });\r\n          this.FloorbyList.splice(0, 1);\r\n        });\r\n      }\r\n    },\r\n    \"options.Floor\"(val) {\r\n      if (val != \"\") {\r\n        clearSel(this, 3);\r\n        getResourceList(this, res => {\r\n          this.ResorceNameList = res.map(item => {\r\n            return {\r\n              name: item.text,\r\n              value: item.id\r\n            };\r\n          });\r\n        });\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // 获取数据\r\n    getDataList() {\r\n      let par = {};\r\n      if (this.options.BuildName !== \"全部\") {\r\n        par = this.options;\r\n      } else {\r\n        par.ProjectID = projectid;\r\n        par.BuildName = \"\";\r\n        par.Specialty = this.options.Specialty;\r\n        par.Floor = this.options.Floor;\r\n        par.CatagoryName = this.options.CatagoryName;\r\n        par.Name = this.options.Name;\r\n      }\r\n      getCollectList(this, par, res => {\r\n        this.showMeTable = false;\r\n        this.total = Number(res.Count);\r\n        this.buyThingTable = res;\r\n      });\r\n    },\r\n    //返回\r\n    goBack() {\r\n      this.$router.push({ path: \"/nav/to/index\" });\r\n    },\r\n    //右侧导航栏的图标点击\r\n    showTable() {\r\n      this.showMeTable = !this.showMeTable;\r\n    },\r\n    //根据页面的滑动--清掉某些值(模态框)\r\n    resetFrom() {\r\n      if (this.active == 0) {\r\n        this.options = {\r\n          BuildName: \"\",\r\n          Specialty: \"\",\r\n          Floor: \"\",\r\n          CatagoryName: \"\"\r\n        };\r\n      } else {\r\n        this.allThing = \"\"; //物资种类--Echart图\r\n        this.ResourceName = \"\";\r\n      }\r\n    },\r\n    //根据页面的滑动--模态框--点击确定查询\r\n    searchFrom() {\r\n      if (this.active) {\r\n        this.getYearInfo();\r\n      } else {\r\n        this.buyThingTable = [];\r\n        this.getDataList();\r\n      }\r\n    },\r\n    //材料出入库表格---合并项\r\n    objectSpanMethod({ rowIndex, columnIndex }) {\r\n      if (columnIndex === 4 || columnIndex === 5) {\r\n        if (rowIndex == 0) {\r\n          return {\r\n            rowspan: this.allTable.length + 2,\r\n            colspan: 1\r\n          };\r\n        } else {\r\n          return {\r\n            rowspan: 0,\r\n            colspan: 0\r\n          };\r\n        }\r\n      }\r\n    },\r\n    //材料出入库表格---总计合并\r\n    getSummaries(param) {\r\n      const { columns, data } = param;\r\n      const sums = [];\r\n      columns.forEach((column, index) => {\r\n        if (index === 0 || index === 2) {\r\n          sums[index] = \"总量\";\r\n          return;\r\n        } else if (index === 4 || index === 5) {\r\n          sums[index] = \"\";\r\n          return;\r\n        }\r\n        const values = data.map(item => Number(item[column.property]));\r\n        if (!values.every(value => isNaN(value))) {\r\n          sums[index] = values.reduce((prev, curr) => {\r\n            const value = Number(curr);\r\n            if (!isNaN(value)) {\r\n              return prev + curr;\r\n            } else {\r\n              return prev;\r\n            }\r\n          }, 0);\r\n        } else {\r\n          sums[index] = \"\";\r\n        }\r\n      });\r\n      return sums;\r\n    },\r\n    // 获取年度物资采购信息\r\n    getYearInfo() {\r\n      getResourceInfo(this, res => {\r\n        this.showMeTable = false;\r\n        console.log(res);\r\n      });\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["allPurchase.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"allPurchase.vue","sourceRoot":"src/components/issue/purchase/modules","sourcesContent":["<template>\r\n  <div class=\"purchase_echart\">\r\n    <van-nav-bar\r\n      title=\"采购管理\"\r\n      @click-left=\"goBack\"\r\n      @click-right=\"showTable\"\r\n      fixed\r\n      :border=\"true\"\r\n      :z-index=\"100\"\r\n    >\r\n      <span class=\"el-icon-arrow-left fontsize\" slot=\"left\"></span>\r\n      <span class=\"van-nav-bar__right ai_report_nav_img\" slot=\"right\">\r\n        <img src=\"../../../../assets/imgs/screen.png\" alt>\r\n      </span>\r\n    </van-nav-bar>\r\n    <!-- 导航右侧图标--模态框 -->\r\n    <div v-show=\"showMeTable\" class=\"purchase_echart_model\">\r\n      <van-collapse v-model=\"activeName\" accordion v-show=\"active==0\">\r\n        <van-collapse-item name=\"1\">\r\n          <div slot=\"title\">楼栋</div>\r\n          <van-radio-group v-model=\"options.BuildName\">\r\n            <van-cell-group>\r\n              <van-radio\r\n                v-for=\"(item ,index) in BuildNameList\"\r\n                v-bind:key=\"index\"\r\n                :name=\"item.value\"\r\n              >{{item.name}}</van-radio>\r\n            </van-cell-group>\r\n          </van-radio-group>\r\n        </van-collapse-item>\r\n\r\n        <van-collapse-item name=\"2\">\r\n          <div slot=\"title\">专业</div>\r\n          <van-radio-group v-model=\"options.Specialty\">\r\n            <van-cell-group>\r\n              <van-radio\r\n                v-for=\"(item ,index) in SpecialtyList\"\r\n                v-bind:key=\"index\"\r\n                :name=\"item.value\"\r\n              >{{item.name}}</van-radio>\r\n            </van-cell-group>\r\n          </van-radio-group>\r\n        </van-collapse-item>\r\n\r\n        <van-collapse-item name=\"3\">\r\n          <div slot=\"title\">楼层</div>\r\n          <van-radio-group v-model=\"options.Floor\">\r\n            <van-cell-group>\r\n              <van-radio\r\n                v-for=\"(item ,index) in FloorbyList\"\r\n                v-bind:key=\"index\"\r\n                :name=\"item.value\"\r\n              >{{item.name}}</van-radio>\r\n            </van-cell-group>\r\n          </van-radio-group>\r\n        </van-collapse-item>\r\n\r\n        <van-collapse-item name=\"4\">\r\n          <div slot=\"title\">物资名称</div>\r\n          <van-radio-group v-model=\"options.CatagoryName\">\r\n            <van-cell-group>\r\n              <van-radio\r\n                v-for=\"(item ,index) in ResorceNameList\"\r\n                v-bind:key=\"index\"\r\n                :name=\"item.value\"\r\n              >{{item.name}}</van-radio>\r\n            </van-cell-group>\r\n          </van-radio-group>\r\n        </van-collapse-item>\r\n\r\n        <!-- <van-collapse-item name=\"5\">\r\n              <div slot=\"title\">已完成采购</div>\r\n              <van-radio-group v-model=\"buyingSelect\">\r\n                <van-cell-group>                \r\n                   <van-radio v-for='(item ,index) in buyingThing' v-bind:key='index' :name=\"item.value\">{{item.name}}</van-radio> \r\n                </van-cell-group>\r\n              </van-radio-group>\r\n        </van-collapse-item>-->\r\n      </van-collapse>\r\n\r\n      <van-radio-group v-model=\"ResourceName\" v-show=\"active==1\">\r\n        <van-cell-group>\r\n          <van-radio\r\n            v-for=\"(item ,index) in ResourceList\"\r\n            v-bind:key=\"index\"\r\n            :name=\"item.value\"\r\n          >{{item.name}}</van-radio>\r\n        </van-cell-group>\r\n      </van-radio-group>\r\n\r\n      <div class=\"ai_report_order_foot\">\r\n        <div @click=\"resetFrom()\">重置</div>\r\n        <div @click=\"searchFrom()\">确定</div>\r\n      </div>\r\n    </div>\r\n    <!-- 关闭左右滑动--swipeable -->\r\n    <van-tabs v-model=\"active\" :line-width=\"70\">\r\n      <van-tab title=\"物资采购总览\" class=\"purchase_echart_tabs\">\r\n        <el-table\r\n          style=\"width:100%;\"\r\n          :data=\"buyThingTable\"\r\n          :header-cell-style=\"{'background-color':'#5A92FF','color':'#ffffff'}\"\r\n        >\r\n          <el-table-column prop=\"ResourceName\" label=\"物资名称\" align=\"center\"></el-table-column>\r\n          <el-table-column prop=\"AdjustBOQ\" label=\"施工预算量\" align=\"center\"></el-table-column>\r\n          <el-table-column prop=\"InDate\" label=\"采购总量\" align=\"center\"></el-table-column>\r\n          <el-table-column prop=\"StoreNum\" label=\"库存\" align=\"center\"></el-table-column>\r\n          <el-table-column prop=\"OverNum\" label=\"节超\" align=\"center\"></el-table-column>\r\n        </el-table>\r\n      </van-tab>\r\n      <van-tab title=\"物资统计分析\" class=\"purchase_echart_tabs\">\r\n        <div class=\"purchase_span\">\r\n          <span>{{ResourceName}}</span>\r\n        </div>\r\n        <!-- 折线图组件 -->\r\n        <div class=\"purchaseImg\">\r\n          <EchartImg :plan_table=\"table3\"></EchartImg>\r\n        </div>\r\n\r\n        <div class=\"purchase_span\">\r\n          <span>材料出入库情况</span>\r\n        </div>\r\n        <el-table\r\n          style=\"width:100%;font-size:28px;box-sizing:border-box;\"\r\n          :summary-method=\"getSummaries\"\r\n          show-summary\r\n          :span-method=\"objectSpanMethod\"\r\n          :data=\"allTable\"\r\n          :header-cell-style=\"{'background-color':'#5A92FF','color':'#ffffff'}\"\r\n        >\r\n          <el-table-column label=\"入库\" align=\"center\">\r\n            <el-table-column prop=\"getTime\" label=\"时间\" align=\"center\"></el-table-column>\r\n            <el-table-column prop=\"getNumber\" label=\"数量\" align=\"center\"></el-table-column>\r\n          </el-table-column>\r\n          <el-table-column label=\"出库\" align=\"center\">\r\n            <el-table-column prop=\"outTime\" label=\"时间\" align=\"center\"></el-table-column>\r\n            <el-table-column prop=\"outNumber\" label=\"数量\" align=\"center\"></el-table-column>\r\n          </el-table-column>\r\n          <el-table-column prop=\"allhas\" label=\"存库\" align=\"center\"></el-table-column>\r\n          <el-table-column prop=\"allout\" label=\"节超\" align=\"center\"></el-table-column>\r\n        </el-table>\r\n      </van-tab>\r\n    </van-tabs>\r\n  </div>\r\n</template>\r\n<script>\r\nimport EchartImg from \"./EchartImg\";\r\nimport {\r\n  getBuildList,\r\n  getSpecialtyList,\r\n  getFloorList,\r\n  getResourceList,\r\n  getCollectList,\r\n  clearSel,\r\n  getResourceInfo,\r\n  getResourceName\r\n} from \"../../../../assets/js/scopeManage.js\";\r\n\r\nexport default {\r\n  components: { EchartImg },\r\n  data() {\r\n    return {\r\n      BuildNameList: [],\r\n      SpecialtyList: [],\r\n      FloorbyList: [],\r\n      ResorceNameList: [],\r\n      options: {\r\n        BuildName: \"\",\r\n        Specialty: \"\",\r\n        Floor: \"\",\r\n        CatagoryName: \"\"\r\n      },\r\n      buyThingTable: [],\r\n      ResourceName: \"\",\r\n      ResourceList: [],\r\n\r\n      active: 0, //左右滑块\r\n      showMeTable: false, //导航右边图标---显示查询条件\r\n      activeName: \"1\", //导航右边图标---显示模板的手风琴\r\n      selectName: \"\", //专业\r\n      contextBySelect: \"\", // 物资类别\r\n      glassBySelect: \"\", //楼栋\r\n      classBySelect: \"\", //楼层\r\n      buyingSelect: \"\", //已完成采购\r\n      //专业\r\n      textNameColl: [\r\n        { value: \"1\", name: \"全部\" },\r\n        { value: \"2\", name: \"建筑专业\" },\r\n        { value: \"3\", name: \"结构专业\" },\r\n        { value: \"4\", name: \"暖通系统\" },\r\n        { value: \"5\", name: \"通风系统\" },\r\n        { value: \"6\", name: \"弱电系统\" },\r\n        { value: \"7\", name: \"强电系统\" }\r\n      ],\r\n      // 物资类别\r\n      contextSelect: [\r\n        { value: \"1\", name: \"全部\" },\r\n        { value: \"2\", name: \"门\" },\r\n        { value: \"3\", name: \"混泥土\" },\r\n        { value: \"4\", name: \"水泥\" },\r\n        { value: \"5\", name: \"钢筋\" }\r\n      ],\r\n      // 楼栋\r\n      glassSelect: [\r\n        { value: \"1\", name: \"A1\" },\r\n        { value: \"2\", name: \"A2\" },\r\n        { value: \"3\", name: \"A3\" },\r\n        { value: \"4\", name: \"A4\" },\r\n        { value: \"5\", name: \"A5\" }\r\n      ],\r\n      // 楼层\r\n      classSelect: [\r\n        { value: \"1\", name: \"1楼\" },\r\n        { value: \"2\", name: \"2楼\" },\r\n        { value: \"3\", name: \"3楼\" },\r\n        { value: \"4\", name: \"4楼\" },\r\n        { value: \"5\", name: \"5楼\" }\r\n      ],\r\n      //已完成采购\r\n      buyingThing: [\r\n        { value: \"1\", name: \"采购中\" },\r\n        { value: \"2\", name: \"未采购\" }\r\n      ],\r\n      //物资种类--Echart图\r\n      allThing: \"\",\r\n      allThingList: [\r\n        { value: \"1\", name: \"c20混凝土\" },\r\n        { value: \"2\", name: \"门\" },\r\n        { value: \"3\", name: \"c30混凝土\" }\r\n      ],\r\n\r\n      //echarts数据格式\r\n      table3: {\r\n        title: \"总产值分析\", //主标题\r\n        subtext: \"单位（万元）\", //副标题\r\n        legend: [\"出库量\", \"采购量\"], //折线名字\r\n        xData: [\r\n          \"1月\",\r\n          \"2月\",\r\n          \"3月\",\r\n          \"4月\",\r\n          \"5月\",\r\n          \"6月\",\r\n          \"7月\",\r\n          \"8月\",\r\n          \"9月\",\r\n          \"10月\",\r\n          \"11月\",\r\n          \"12月\"\r\n        ], //x轴数据\r\n        yData: [\r\n          {\r\n            name: \"出库量\",\r\n            type: \"line\",\r\n            color: \"#2C77CE\",\r\n            data: [10, 16, 15, 83, 92, 63, 40, 35, 22, 80, 92, 63]\r\n          },\r\n          {\r\n            name: \"采购量\",\r\n            type: \"line\",\r\n            color: \"#499341\",\r\n            data: [1, 18, 24, 53, 35, 22, 80, 35, 22, 80, 15, 18]\r\n          }\r\n        ]\r\n      },\r\n      //出入库材料表格\r\n      allTable: [\r\n        {\r\n          getTime: \"2019/01/02\",\r\n          outTime: \"2019/01/06\",\r\n          getNumber: \"66666\",\r\n          outNumber: \"33333\",\r\n          allhas: \"300\",\r\n          allout: \"520\"\r\n        },\r\n        {\r\n          getTime: \"2019/01/02\",\r\n          outTime: \"2019/01/06\",\r\n          getNumber: \"66666\",\r\n          outNumber: \"33333\",\r\n          allhas: \"300\",\r\n          allout: \"520\"\r\n        },\r\n        {\r\n          getTime: \"2019/01/02\",\r\n          outTime: \"2019/01/06\",\r\n          getNumber: \"66666\",\r\n          outNumber: \"33333\",\r\n          allhas: \"300\",\r\n          allout: \"520\"\r\n        },\r\n        {\r\n          getTime: \"2019/01/02\",\r\n          outTime: \"2019/01/06\",\r\n          getNumber: \"66666\",\r\n          outNumber: \"33333\",\r\n          allhas: \"300\",\r\n          allout: \"520\"\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  created() {\r\n    this.getDataList();\r\n    getBuildList(this, res => {\r\n      this.BuildNameList = res.map(item => {\r\n        return {\r\n          name: item.text,\r\n          value: item.id\r\n        };\r\n      });\r\n      this.BuildNameList.splice(0, 1);\r\n    });\r\n    getResourceName(this, res => {\r\n      this.ResourceList = res.map(item => {\r\n        return {\r\n          name: item,\r\n          value: item\r\n        };\r\n      });\r\n    });\r\n  },\r\n  watch: {\r\n    \"options.BuildName\"(val) {\r\n      if (val != \"\") {\r\n        clearSel(this, 1);\r\n        getSpecialtyList(this, res => {\r\n          this.SpecialtyList = res.map(item => {\r\n            return {\r\n              name: item.text,\r\n              value: item.id\r\n            };\r\n          });\r\n          this.SpecialtyList.splice(0, 1);\r\n        });\r\n      }\r\n    },\r\n    \"options.Specialty\"(val) {\r\n      if (val != \"\") {\r\n        clearSel(this, 2);\r\n        getFloorList(this, res => {\r\n          this.FloorbyList = res.map(item => {\r\n            return {\r\n              name: item.text,\r\n              value: item.id\r\n            };\r\n          });\r\n          this.FloorbyList.splice(0, 1);\r\n        });\r\n      }\r\n    },\r\n    \"options.Floor\"(val) {\r\n      if (val != \"\") {\r\n        clearSel(this, 3);\r\n        getResourceList(this, res => {\r\n          this.ResorceNameList = res.map(item => {\r\n            return {\r\n              name: item.text,\r\n              value: item.id\r\n            };\r\n          });\r\n        });\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // 获取数据\r\n    getDataList() {\r\n      let par = {};\r\n      if (this.options.BuildName !== \"全部\") {\r\n        par = this.options;\r\n      } else {\r\n        par.ProjectID = projectid;\r\n        par.BuildName = \"\";\r\n        par.Specialty = this.options.Specialty;\r\n        par.Floor = this.options.Floor;\r\n        par.CatagoryName = this.options.CatagoryName;\r\n        par.Name = this.options.Name;\r\n      }\r\n      getCollectList(this, par, res => {\r\n        this.showMeTable = false;\r\n        this.total = Number(res.Count);\r\n        this.buyThingTable = res;\r\n      });\r\n    },\r\n    //返回\r\n    goBack() {\r\n      this.$router.push({ path: \"/nav/to/index\" });\r\n    },\r\n    //右侧导航栏的图标点击\r\n    showTable() {\r\n      this.showMeTable = !this.showMeTable;\r\n    },\r\n    //根据页面的滑动--清掉某些值(模态框)\r\n    resetFrom() {\r\n      if (this.active == 0) {\r\n        this.options = {\r\n          BuildName: \"\",\r\n          Specialty: \"\",\r\n          Floor: \"\",\r\n          CatagoryName: \"\"\r\n        };\r\n      } else {\r\n        this.allThing = \"\"; //物资种类--Echart图\r\n        this.ResourceName = \"\";\r\n      }\r\n    },\r\n    //根据页面的滑动--模态框--点击确定查询\r\n    searchFrom() {\r\n      if (this.active) {\r\n        this.getYearInfo();\r\n      } else {\r\n        this.buyThingTable = [];\r\n        this.getDataList();\r\n      }\r\n    },\r\n    //材料出入库表格---合并项\r\n    objectSpanMethod({ rowIndex, columnIndex }) {\r\n      if (columnIndex === 4 || columnIndex === 5) {\r\n        if (rowIndex == 0) {\r\n          return {\r\n            rowspan: this.allTable.length + 2,\r\n            colspan: 1\r\n          };\r\n        } else {\r\n          return {\r\n            rowspan: 0,\r\n            colspan: 0\r\n          };\r\n        }\r\n      }\r\n    },\r\n    //材料出入库表格---总计合并\r\n    getSummaries(param) {\r\n      const { columns, data } = param;\r\n      const sums = [];\r\n      columns.forEach((column, index) => {\r\n        if (index === 0 || index === 2) {\r\n          sums[index] = \"总量\";\r\n          return;\r\n        } else if (index === 4 || index === 5) {\r\n          sums[index] = \"\";\r\n          return;\r\n        }\r\n        const values = data.map(item => Number(item[column.property]));\r\n        if (!values.every(value => isNaN(value))) {\r\n          sums[index] = values.reduce((prev, curr) => {\r\n            const value = Number(curr);\r\n            if (!isNaN(value)) {\r\n              return prev + curr;\r\n            } else {\r\n              return prev;\r\n            }\r\n          }, 0);\r\n        } else {\r\n          sums[index] = \"\";\r\n        }\r\n      });\r\n      return sums;\r\n    },\r\n    // 获取年度物资采购信息\r\n    getYearInfo() {\r\n      getResourceInfo(this, res => {\r\n        this.showMeTable = false;\r\n        console.log(res);\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style>\r\n.purchase_echart {\r\n  width: 100%;\r\n  height: 100%;\r\n  padding-top: 88px;\r\n  box-sizing: border-box;\r\n}\r\n/* 表格样式更改 */\r\n\r\n.purchase_echart .el-table th > .cell,\r\n.container-procurement-list .temporary thead th {\r\n  font-size: 28px;\r\n}\r\n.purchase_echart .purchase_echart_tabs {\r\n  height: 60px;\r\n  line-height: 60px;\r\n  font-size: 30px;\r\n}\r\n/* 顶部表头 */\r\n.purchase_echart .van-nav-bar .van-nav-bar__title {\r\n  font-size: 36px;\r\n}\r\n.purchase_echart .van-nav-bar {\r\n  height: 88px;\r\n  line-height: 88px;\r\n}\r\n.purchase_echart .ai_report_nav_img img {\r\n  height: 37px;\r\n  width: 41px;\r\n}\r\n.purchase_echart .ai_report_nav_img {\r\n  float: right;\r\n  position: relative;\r\n  top: 10px;\r\n}\r\n.purchase_echart_tabs {\r\n  height: 1130px;\r\n  width: 100%;\r\n  background-color: #ffffff;\r\n}\r\n\r\n/* 左右滑动标签页的样式更改 */\r\n.purchase_echart .van-tabs__line {\r\n  background-color: #5b8dee;\r\n}\r\n.purchase_echart .van-tabs--line .van-tabs__wrap {\r\n  height: 88px;\r\n}\r\n.purchase_echart .van-tabs--line .van-tabs__nav {\r\n  height: 88px;\r\n}\r\n.purchase_echart .van-ellipsis {\r\n  width: 100%;\r\n  color: #6b6b6b;\r\n  height: 88px;\r\n  font-size: 28px;\r\n  line-height: 88px;\r\n  /* font-weight:bold; */\r\n  font-family: PingFang-SC-Bold;\r\n}\r\n.purchase_echart .van-tabs__nav .van-tab--active .van-ellipsis {\r\n  color: rgba(91, 140, 238, 1);\r\n}\r\n.purchase_echart .van-tabs--line {\r\n  padding-top: 110px;\r\n}\r\n/* 表格样式更改 */\r\n.purchase_echart .el-table .cell {\r\n  height: 60px;\r\n  line-height: 60px;\r\n  font-size: 24px;\r\n}\r\n.purchase_echart .el-table .table_input {\r\n  border: 2px solid #5893ff;\r\n}\r\n\r\n/* 右图标弹框样式 */\r\n.purchase_echart_model {\r\n  position: fixed;\r\n  width: 356px;\r\n  z-index: 200;\r\n  max-height: 940px;\r\n  right: 20px;\r\n  top: 88px;\r\n  background-color: rgba(34, 40, 50, 1);\r\n  border-radius: 8px;\r\n  padding: 20px;\r\n  color: #ffffff;\r\n  font-size: 30px;\r\n  overflow: auto;\r\n}\r\n.purchase_echart_model .ai_report_border {\r\n  width: 0;\r\n  height: 0;\r\n  border-width: 0 16px 16px;\r\n  border-style: solid;\r\n  border-color: transparent transparent #222832; /*透明 透明  灰*/\r\n  position: relative;\r\n  display: inline-block;\r\n  top: -48px;\r\n  left: 330px;\r\n}\r\n.purchase_echart_model .ai_report_list {\r\n  width: 100%;\r\n  height: 88px;\r\n  line-height: 88px;\r\n  box-sizing: border-box;\r\n}\r\n.purchase_echart_model .ai_report_list_border {\r\n  border-bottom: 2px solid #ffffff;\r\n}\r\n.purchase_echart_model .ai_report_list_time > span {\r\n  display: block;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #eaebed;\r\n  color: #333;\r\n  padding-left: 8px;\r\n  border-radius: 6px;\r\n}\r\n.purchase_echart_model .ai_report_list_time {\r\n  width: 100%;\r\n  height: 70px;\r\n  line-height: 70px;\r\n  box-sizing: border-box;\r\n  padding: 5px 0;\r\n}\r\n\r\n.purchase_echart_model .van-cell {\r\n  background-color: #222832;\r\n  color: #ffffff;\r\n  line-height: 45px;\r\n  height: 60px;\r\n  border-top: 2px solid #55595e;\r\n  box-sizing: border-box;\r\n  font-size: 30px;\r\n}\r\n.purchase_echart_model .van-collapse-item__content {\r\n  background-color: #222832;\r\n  color: #ffffff;\r\n}\r\n\r\n.purchase_echart_model .van-cell-group {\r\n  background-color: #222832;\r\n}\r\n.purchase_echart_model .van-radio__label {\r\n  line-height: 70px;\r\n  font-size: 28px;\r\n  color: #ffffff;\r\n}\r\n.purchase_echart_model .van-radio__icon .van-icon {\r\n  border: 2px solid #ffffff;\r\n}\r\n\r\n.purchase_echart_model .van-hairline--top-bottom::after {\r\n  border: 0;\r\n}\r\n.purchase_echart_model .van-radio {\r\n  border-top: 2px solid #55595e;\r\n}\r\n.purchase_echart_model .ai_report_order_foot {\r\n  height: 80px;\r\n  line-height: 40px;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  border-top: 2px solid #ffffff;\r\n  border-bottom: 2px solid #ffffff;\r\n  padding: 20px 0;\r\n}\r\n.purchase_echart_model .ai_report_order_foot > div:first-child {\r\n  float: left;\r\n  width: 50%;\r\n  box-sizing: border-box;\r\n  border-right: 2px dashed #ffffff;\r\n  text-align: center;\r\n  cursor: pointer;\r\n}\r\n.purchase_echart_model .ai_report_order_foot > div:last-child {\r\n  float: left;\r\n  width: 50%;\r\n  box-sizing: border-box;\r\n  text-align: center;\r\n  cursor: pointer;\r\n}\r\n.purchaseImg {\r\n  width: 100%;\r\n  height: 500px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.purchase_span {\r\n  height: 80px;\r\n  line-height: 80px;\r\n  font-size: 30px;\r\n\r\n  padding: 15px 0;\r\n}\r\n.purchase_span span {\r\n  margin-left: 20px;\r\n  display: inline;\r\n  border-left: 8px solid #5a92ff;\r\n  padding-left: 20px;\r\n}\r\n</style>\r\n"]}]}