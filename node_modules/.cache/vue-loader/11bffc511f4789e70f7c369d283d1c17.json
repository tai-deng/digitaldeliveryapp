{"remainingRequest":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Public\\软件\\app\\src\\components\\index\\time\\timeManagement.vue?vue&type=style&index=0&id=4c46b956&lang=stylus&scoped=true&rel=stylesheet%2Fstylus&","dependencies":[{"path":"C:\\Users\\Public\\软件\\app\\src\\components\\index\\time\\timeManagement.vue","mtime":1557910166287},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\css-loader\\index.js","mtime":1552270042900},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1552270044128},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\postcss-loader\\src\\index.js","mtime":1552270043529},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\stylus-loader\\index.js","mtime":1552270053417},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1552270044128}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.container-time-management {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color #fff;\r\n}\r\n",{"version":3,"sources":["timeManagement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuPA;AACA;AACA;AACA;AACA","file":"timeManagement.vue","sourceRoot":"src/components/index/time","sourcesContent":["<!-- 时间管理timeManagement -->\r\n<template>\r\n  <div class='container-time-management' id=\"time-container\" >\r\n    <div class='wrapper' >\r\n      <van-nav-bar\r\n        title=\"时间管理\"\r\n        left-arrow\r\n        @click-left=\"onClickLeft\"\r\n        @click-right=\"onClickRight\"\r\n      >\r\n      <div class=\"nav_right\" slot=\"right\"><img src=\"../../../assets/imgs/screen.png\" alt=\"\"></div>\r\n      </van-nav-bar>\r\n      <!-- 整体进度表 -->\r\n      <div class=\"progress_table\">\r\n        <div class=\"pro_title\">\r\n          <img src=\"../../../assets/imgs/totall_of_progress.png\" alt=\"\">\r\n          <span>整体进度</span>\r\n        </div>\r\n        <div v-loading=\"loading\" class=\"pro_content\">\r\n          <div class=\"pro_content_left\">\r\n            <!-- 进度 -->\r\n            <div class=\"circle_big\">\r\n              <div class=\"circle_small\">\r\n               <!-- <van-circle\r\n                v-model=\"currentRate\"\r\n                color=\"#07c160\"\r\n                fill=\"#fff\"\r\n                size=\"95px\"\r\n                layer-color=\"#EBF5FF\"\r\n                :text=\"text\"\r\n                :rate=\"75\"\r\n                :speed=\"100\"\r\n                :stroke-width=\"100\"\r\n              /> -->\r\n              <div class=\"schedule-img\">\r\n                <el-progress type=\"circle\" :percentage=\"projectOverview.allProgress\" :width=\"104\" :stroke-width=\"12\"></el-progress>\r\n                <!-- <img src=\"./1.png\" class=\"img\"> -->\r\n                <div class=\"percent\">\r\n                  <!-- <span class=\"percent-num\">{{projectOverview.allProgress}}</span> -->\r\n                  <span class=\"title\">工程进度</span>\r\n                </div>\r\n              </div>\r\n              </div>\r\n            </div>\r\n  \r\n          </div>\r\n          <div class=\"pro_content_right\">\r\n            <div class=\"list\">\r\n              计划工期（天）：{{projectOverview.planDays}}\r\n            </div>\r\n            <div class=\"list\">\r\n              剩余工期（天）：{{projectOverview.actualDays}}\r\n            </div>\r\n            <div class=\"list\">\r\n              完工时间：{{projectOverview.completTime}}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- 列表信息 -->\r\n      <div class=\"progress_info\">\r\n        <div class=\"progress_info_title\">\r\n          <span>任务</span>\r\n          <span>完工时间</span>\r\n          <span>状态</span>\r\n        </div>\r\n        <ul v-loading=\"loading\" class=\"progress_info_items\">\r\n          <li v-for=\"(item, index) in porgressOptions\" :key=\"index\" @click=\"getSchedulItem(item)\">\r\n            <span>{{item.TaskName}}</span>\r\n            <span>{{item.BaseFinishTime.substr(0,10)}}</span>\r\n            <span>{{item.StatesInfo}}</span>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n\r\n <!-- 筛选内容 -->\r\n  <div class=\"modelStyle\" v-show=\"sel_show\" @click=\"sel_show = false\">\r\n    <div class=\"select_layer\" >\r\n      <ul>\r\n        <li v-for=\"(item,index) in typeOptions\" :key=\"index\" @click=\"selectItem(item)\">{{item.text}}</li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script type='textecmascript-6'>\r\n// import pregress from \"./modules/pregress\"\r\nimport {GetBuilding,\r\nGetACSchedulePlanListAPP,\r\nGetElementIDByInfo,\r\n} from '@/api/api.js'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      data: \"time\",\r\n      sel_show: false,\r\n      currentRate: 0,\r\n      projectOverview:{\r\n        allProgress: 0, //整体进度\r\n        completTime: '', //完工时间\r\n        planDays: 0, //计划天数\r\n        actualDays: 0,  //剩余天数\r\n      },\r\n      loading: false,\r\n      projectid: localStorage.getItem('projectid'), //项目ID\r\n      typeOptions: [], //建筑列表\r\n      type: '', // 所选的建筑模型  默认是‘全部’\r\n      // ElementList: [], // 模型构建结构ID列表\r\n\r\n      lagging: 0,  // 滞后天数\r\n      /**[进度子任务所有数据] */\r\n      porgressOptions: [],\r\n    };\r\n  },\r\n  components: {\r\n    // pregress\r\n  },\r\n  computed: {\r\n    text() {\r\n      return this.currentRate.toFixed(0) + '%'\r\n    }\r\n  },\r\n  created(){\r\n    this.GetBuildingInfo(this.projectid)  //获取建筑列表信息\r\n  },\r\n  methods: {\r\n     onClickLeft() {\r\n      this.$router.go(-1)\r\n      // this.$route\r\n\r\n    },\r\n    onClickRight() {\r\n      this.sel_show = !this.sel_show;\r\n    },\r\n    selectItem(e){\r\n      this.type = e.text===\"全部\"?'':e.text\r\n      this.sel_show = false\r\n      console.log(e)\r\n    },\r\n    //点击跳转认证详情\r\n    getSchedulItem(it){\r\n      if(it.StatesInfo === \"提前完成\"){\r\n        this.$toast({\r\n          message: '任务已完成',\r\n          duration: 800,\r\n          className: 'my_toast'\r\n        })\r\n      }else {\r\n        this.$router.push({path:'Progress', query: it})\r\n      }\r\n      \r\n    },\r\n    /**\r\n     * API接口\r\n     */\r\n      //  获取建筑模型列表信息\r\n      async GetBuildingInfo (projectid) {\r\n        let res = await this.Request(GetBuilding({projectid}))\r\n        if (res.StatusCode == 200) {\r\n          this.typeOptions = res.Detiel\r\n          this.typeOptions.unshift({\r\n            id: \"\",\r\n            text: \"全部\"\r\n          })\r\n          this.ACSchedulePlanList(this.type)\r\n          // this.type = res.Detiel[0].text\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: res.Message,\r\n            center: \"true\"\r\n          })\r\n        }\r\n      },\r\n      // 查看认证任务列表\r\n      async ACSchedulePlanList (B_Name) {\r\n        this.loading = true\r\n        // if (!B_Name) return this.$toast('没有选择模型')\r\n        let res = await this.Request(GetACSchedulePlanListAPP({ ProjectID: this.projectid, BuildingName: B_Name }))\r\n        if (res.StatusCode === 200) {\r\n          console.log(res)\r\n          if(res.Detiel.length){\r\n            this.projectOverview.allProgress = parseInt(res.Detiel[0].ActualPercentage)\r\n            this.projectOverview.completTime = res.Detiel[0].BaseFinishTime\r\n            this.projectOverview.planDays = res.Detiel[0].SurplusDuration\r\n            this.projectOverview.actualDays = res.Detiel[0].TotalDuration\r\n            this.porgressOptions = res.Detiel[0].TaskList\r\n          } else {\r\n            this.$message({ type: 'error', message: res.Message, center: \"true\" })\r\n          }\r\n          \r\n          // this.porgressOptions = []\r\n          // progressInfo.forEach((item) => {\r\n          //   let option = {}\r\n          //   option.TaskName = item.TaskName\r\n          //   option.title = item.TaskName\r\n          //   option.start_time = item.BaseStartTime.substr(0, 10)\r\n          //   option.ElementList = item.ElementList\r\n\r\n          //   if (!item.UploadTime) {\r\n          //     option.message = \"success add\"\r\n          //     option.isAdd = true\r\n          //   } else if (item.states == \"正常\" || item.states == null) {\r\n          //     option.message = \"success reverse\"\r\n          //     option.isAdd = false\r\n          //   } else {\r\n          //     option.message = \" error\"\r\n          //     option.isAdd = false\r\n          //   }\r\n          //   option.end_time = item.UploadTime ? item.UploadTime.substr(0, 10) : ''\r\n          //   option.PicturePath = item.UploadTime ? item.PicturePath : ''\r\n          //   option.TaskId = item.TaskId\r\n          //   // option.message\r\n          //   this.porgressOptions.push(option)\r\n          // })\r\n          this.loading = false\r\n        } else {\r\n          this.$message({ type: 'error', message: res.Message, center: \"true\" })\r\n          this.loading = false\r\n        }\r\n      },\r\n      // 根据楼栋获取当前楼栋下所有ElementID\r\n      // ElementIDByInfo () {\r\n      //   let param = {\r\n      //     ProjectID: this.projectId,\r\n      //     BuildName: this.type\r\n      //   }\r\n      //   GetElementIDByInfo(param).then(data => {\r\n      //     this.ElementList = data.Detiel\r\n      //   })\r\n      // },\r\n  },\r\n  watch: {\r\n    type(val){\r\n      if(val){\r\n        this.ACSchedulePlanList(val)\r\n      }\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style lang='stylus' scoped rel='stylesheet/stylus'>\r\n.container-time-management {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color #fff;\r\n}\r\n</style>\r\n<style lang='stylus' rel='stylesheet/stylus'>\r\n@import '../../../assets/stylus/variable'\r\n  #time-container {\r\n    position: relative;\r\n    .modelStyle {\r\n      position: absolute;\r\n      top: 0px;\r\n      left: 0px;\r\n      width: 100%;\r\n      height: 100%\r\n      background-color: rgba(255, 255, 255, 0)\r\n      z-index: 100\r\n    }\r\n    .wrapper {\r\n      width:100%;\r\n      height: 100%\r\n    }\r\n    .van-nav-bar {\r\n      width: 100%;  \r\n      height: 88px;\r\n      background-color: $color-bgc-1;\r\n\r\n      .van-nav-bar__title,\r\n      .van-nav-bar__left,\r\n      .van-nav-bar__right {\r\n        color: #fff;\r\n        height: 87px;\r\n        // padding-top: 41px;\r\n        line-height: 87px;\r\n        font-size $font-size-title;\r\n        z-index 10000;\r\n      }\r\n    } \r\n\r\n    // 右上角点击筛选样式\r\n    .select_layer {\r\n      position: fixed;\r\n      top: 86px;\r\n      right: 24px;\r\n      width 240px;\r\n      box-sizing: border-box;\r\n      background-color $color-bgc-2;\r\n      opacity:0.9;\r\n      border-radius:8px\r\n      padding 10px 20px;\r\n      z-index: 999\r\n      ul {\r\n        li {\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          white-space: nowrap;\r\n          height 86px;\r\n          line-height 86px;\r\n          font-size 36px;\r\n          text-align center;\r\n          color #fff;\r\n          height 86px;\r\n          border-bottom: 1px solid #737577;\r\n        }\r\n        li:last-child {\r\n          border-bottom: none;\r\n        }\r\n      }\r\n    \r\n    }\r\n    .select_layer:after {\r\n      position: absolute;\r\n      top: -0.379rem;\r\n      right: 0.186667rem;\r\n      content: '';\r\n      width: 0px;\r\n      height 0px;\r\n\r\n      border: 15px solid transparent;\r\n      border-bottom: 15px solid $color-bgc-2;\r\n      z-index: 9999\r\n    }\r\n\r\n    // 整体进度样式\r\n    .progress_table {\r\n      margin: 20px 30px 30px 30px;\r\n      width: 690px;\r\n      height 320px;\r\n      box-shadow:0px 3px 7px 0px rgba(222,234,246,1);\r\n      border-radius:8px;\r\n      .pro_title {\r\n        margin: 24px 40px;\r\n        padding-top: 24px;\r\n        font-size $font-size-28;\r\n        img {\r\n          width: 41px;\r\n          height 35px;\r\n          \r\n        }\r\n        span {\r\n          padding-left: 10px;\r\n          font-size:30px;\r\n          font-family:PingFang-SC-Medium;\r\n          vertical-align: top;\r\n          font-weight:500;\r\n          color:rgba(51,51,51,1);\r\n        }\r\n      }\r\n      .pro_content {\r\n        display flex;\r\n        justify-content center;\r\n        flex-direction row;\r\n        flex-flow: 1;\r\n        flex-grow :0;\r\n        \r\n        .pro_content_left {\r\n          margin-right: 40px;\r\n          width: 208px;\r\n          height 214px;\r\n          .circle_big {\r\n            width: 208px;\r\n            //环形进度样式\r\n             .schedule-img {\r\n              position: relative;\r\n              background-color white\r\n              width 220px\r\n              height 220px\r\n              .percent {\r\n                position:absolute\r\n                top: 120px;\r\n                left: 0px;\r\n                width 220px\r\n                span {\r\n                  display block\r\n                  text-align center\r\n                  color: #333;\r\n                }\r\n                  \r\n                .percent-num {\r\n                  font-size:36px;\r\n                  font-family:PingFang-SC-Heavy;\r\n                  font-weight:800;\r\n                  line-height 36px\r\n                  color:rgba(37,119,227,1);\r\n                }\r\n                 \r\n                .title {\r\n                  font-size:24px;\r\n                  font-family:PingFang-SC-Bold;\r\n                  font-weight:bold;\r\n                  color:rgba(51,51,51,1);\r\n                }\r\n                  \r\n              }\r\n              .el-progress__text {\r\n                font-weight:bold;\r\n                font-size: 36px!important;\r\n                color:rgba(37,119,227,1);\r\n              }\r\n                \r\n            }\r\n\r\n          }\r\n\r\n        }\r\n        .pro_content_right {\r\n          display: flex;\r\n          flex-direction column;\r\n          justify-content space-between;\r\n          width: 354px;\r\n          height 194px;\r\n          .list {\r\n            width 354px;\r\n            height 50px;\r\n            line-height 50px;\r\n            color: #fff;\r\n            text-align center;\r\n            font-size $font-size-30;\r\n            background-color $color-bgc-1;\r\n            border-radius: 10px;\r\n          }\r\n        }\r\n\r\n      }\r\n    }\r\n\r\n    // 任务进度信息样式\r\n    .progress_info {\r\n      height: calc( 100% - 500px )\r\n      .progress_info_title {\r\n        display: flex;\r\n        justify-content space-between;\r\n        width: 100%;\r\n        height 88px;\r\n        padding: 0 45px;\r\n        box-sizing border-box;\r\n        line-height 88px;\r\n        color: #fff;\r\n        font-size: $font-size-30;\r\n        background-color $color-bgc-3;\r\n          span {\r\n            width: 33%;\r\n            text-align: center;\r\n          }\r\n          span:first-child {\r\n            text-align: left!important;\r\n          }\r\n          span:last-child {\r\n              text-align: right!important; \r\n          }\r\n\r\n      }\r\n      .progress_info_items {\r\n        height: calc(100% - 88px)\r\n        overflow-y: auto;\r\n        li {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          margin: 0 24px;\r\n          height 88px;\r\n          line-height 88px;\r\n          font-size: $font-size-30;\r\n          border-bottom: 1px solid #E5E5E5;\r\n          span {\r\n            width: 33%;\r\n            text-align: center;\r\n          }\r\n          span:first-child {\r\n            text-align: left!important;\r\n          }\r\n          span:last-child {\r\n              text-align: right!important; \r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .container-time-management .van-icon-arrow-left {\r\n    color: #fff ;\r\n    font-size $font-size-title;\r\n  }\r\n  .container-time-management .van-nav-bar__text {\r\n    color: #fff;\r\n    font-size $font-size-title;\r\n  }\r\n  //顶部导航右侧图标\r\n  .nav_right {\r\n        img {\r\n            width: 41px;\r\n          height 35px;\r\n          \r\n        }\r\n      }\r\n  .my_toast.van-toast {\r\n      font-size: 30px;\r\n  }\r\n  .my_toast.van-toast--default{\r\n      width: 180px;\r\n      padding: 30px;\r\n  }\r\n  .my_toast.van-toast--text {\r\n      padding: 40px 40px\r\n  }\r\n  .my_toast.van-toast--default .van-toast__icon{\r\n      font-size: 96px;\r\n  }\r\n</style>\r\n"]}]}