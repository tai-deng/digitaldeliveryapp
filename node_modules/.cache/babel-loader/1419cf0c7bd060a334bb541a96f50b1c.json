{"remainingRequest":"C:\\Users\\Public\\软件\\app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Public\\软件\\app\\src\\components\\dynamic\\dynamic.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Public\\软件\\app\\src\\components\\dynamic\\dynamic.vue","mtime":1557902942679},{"path":"C:\\Users\\Public\\软件\\app\\.babelrc","mtime":1553246877633},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1552270024016},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1552270044128}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Public\\\\\\u8F6F\\u4EF6\\\\app\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport appraise from \"./dynamic_components/appraise/appraise\";\nimport { GetConstruction, GetTaskList, QueryPublishList } from \"../../api/api.js\"; // import { Message } from \"element-ui\";\n\nexport default {\n  data: function data() {\n    return {\n      ProjectID: localStorage.getItem('projectid'),\n      buildingList: [],\n      //建筑列表 \n      curTaskList: [],\n      //当前作业任务列表\n      leng: 0,\n      //长度\n      Normal: 0,\n      //正常数\n      lag: 0,\n      //滞后数\n      RiskLevel: '--',\n      ProjectPart: '--',\n      SourceName: '--',\n      CtrlMethod: '--',\n      name: '--',\n      PlanEndTime: '--',\n      Status: '--',\n      list: [],\n      // 动态列表\n      now: \"--\",\n      //今天的日期\n      islikedanduser: [],\n      //每个动态的点赞用户和本人是否点赞\n      // CurUserIsLike:false,//本人是否已点赞\n      pageIndex: 1,\n      pageSize: 4,\n      flag: true,\n      //禁上刷新时滑动\n      pathImages: [],\n      //放大图片地址列表\n      messageSwitch: true,\n      //切换上部分信息 0：轮播\n      isShowBuild: false,\n      //是否显示卡片\n      isShowBuildLoading: true,\n      //卡片加载中\n      initialSlide: 0,\n      //卡片索引\n      myswiper: {}\n    };\n  },\n  components: {\n    appraise: appraise\n  },\n  created: function created() {\n    // this.load(); //调用加载中蒙层\n    // 页面tar状态\n    localStorage.setItem(\"index\", 1);\n    this.getList();\n  },\n  methods: {\n    getList: function () {\n      var _getList = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        var list, params;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.Request(GetConstruction({\n                  ProjectID: this.ProjectID\n                }));\n\n              case 2:\n                list = _context.sent;\n\n                if (list.StatusCode === 200) {\n                  this.buildingList = list.Detiel;\n                  this.$nextTick(function () {\n                    _this.myswiper = new _this.$Swiper(\".swiper-container\", {\n                      effect: \"coverflow\",\n                      coverflowEffect: {\n                        rotate: 0,\n                        stretch: 0,\n                        depth: 100,\n                        modifier: 3,\n                        slideShadows: false\n                      },\n                      pagination: {\n                        el: \".swiper-pagination\"\n                      }\n                    });\n                  });\n                } else {\n                  this.buildingList = [];\n                }\n\n                this.isShowBuild = true;\n                this.isShowBuildLoading = false; // 根据项目ID查询发布问题 动态列表\n\n                params = {\n                  ProjectID: localStorage.getItem('projectid'),\n                  BuildName: this.buildingList[0].BuildingName,\n                  //默认第一个楼栋的动态\n                  UserID: Number(localStorage.getItem('userId')),\n                  page: 1,\n                  rows: 5\n                };\n                this.queryPublishList(params);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getList() {\n        return _getList.apply(this, arguments);\n      }\n\n      return getList;\n    }(),\n\n    /**\n     * 根据项目ID查询发布问题   动态列表\n     */\n    queryPublishList: function queryPublishList(params) {\n      this.Request(QueryPublishList(params)).then(function (res) {\n        console.log(res);\n      });\n    },\n    // 分页获取动态\n    getScheduleList: function () {\n      var _getScheduleList = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(pageIndex, pageSize) {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                console.log(pageIndex, pageSize); // this.load(); //调用加载中蒙层\n                // const ScheduleList = await this.Request(\n                //   GetList({ pageIndex, pageSize })\n                // );\n                // console.log(ScheduleList);\n                // if (ScheduleList.StatusCode == 300) {\n                //   this.$toast.clear(); // 清除蒙层\n                //   Message({ message: \"加载失败\", type: \"error\" });\n                // } else {\n                //   this.$toast.clear(); // 清除蒙层\n                //   console.log(JSON.stringify(ScheduleList.Detiel).length);\n                //   return ScheduleList.Detiel;\n                // }\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getScheduleList(_x, _x2) {\n        return _getScheduleList.apply(this, arguments);\n      }\n\n      return getScheduleList;\n    }(),\n    handleScroll: function () {\n      var _handleScroll = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(e) {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                console.log(e); // var scrollTop =\n                //   document.documentElement.scrollTop || document.body.scrollTop;\n                // if (typeof this.$refs.totalHeight.offsetHeight == undefined) {\n                //   return;\n                // }\n                // console.log(\"div高度\", this.$refs.totalHeight.offsetHeight);\n                // console.log(\"屏幕距离顶部距离\", scrollTop);\n                // console.log(\"屏幕高度：\", Number(localStorage.getItem(\"screenHeight\")));\n                // let pageTotalHeight = this.$refs.totalHeight.offsetHeight, //页面总高度\n                //   scrollTopDistance = scrollTop, //屏幕距离顶部距离\n                //   screenHeight = Number(localStorage.getItem(\"screenHeight\")); // 屏幕实际高度\n                // if (scrollTopDistance + 60 >= pageTotalHeight - screenHeight) {\n                //   if (this.flag) {\n                //     this.flag = false;\n                //     console.log(\"刷新\");\n                //     let l = await this.getScheduleList(this.pageIndex + 1, this.pageSize);\n                //     this.pageIndex++;\n                //     this.list.push(...l);\n                //     console.log(\"this.list\", this.list);\n                //     // 刷新加载，重新\n                //     this.pathImages = []; //清空\n                //     this.list.forEach(i => {\n                //       i.PhotoList.forEach(j => {\n                //         console.log(j.Path);\n                //         this.pathImages.push(j.Path);\n                //       });\n                //     });\n                //     this.flag = true;\n                //   }\n                // }\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function handleScroll(_x3) {\n        return _handleScroll.apply(this, arguments);\n      }\n\n      return handleScroll;\n    }(),\n    // 切换信息页面\n    toMore: function toMore(BuildingName) {\n      var _this2 = this;\n\n      console.log(\"切换信息页面\");\n      this.isShowBuildLoading = true;\n      this.messageSwitch = !this.messageSwitch;\n      this.isShowBuild = !this.isShowBuild; // 根据项目id和楼栋名称获取任务列表（APP）\n\n      this.Request(GetTaskList({\n        ProjectID: localStorage.getItem('projectid'),\n        BuildingName: BuildingName\n      })).then(function (res) {\n        console.log(res);\n\n        if (res.StatusCode === 200) {\n          _this2.curTaskList = res.Detiel;\n        } else {\n          _this2.$message({\n            type: 'error',\n            message: '未获取数据',\n            center: 'true'\n          });\n        }\n\n        _this2.isShowBuildLoading = false;\n      });\n    },\n    // 切换信息页面\n    toMore2: function toMore2() {\n      console.log(\"切换信息页面\");\n      this.messageSwitch = !this.messageSwitch;\n      this.isShowBuild = !this.isShowBuild; // this.mySwiper.pagination.update()\n    }\n  }\n};",{"version":3,"sources":["dynamic.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"container-dynamic-build\" ref=\"totalHeight\" @touchmove=\"handleScroll\">\n    <!-- <vue-touch @swipeup='handleScroll(data)'> -->\n    <div class=\"title\">\n      <span>建造动态</span>\n    </div>\n    <div class=\"message\"  v-loading=\"isShowBuildLoading\">\n      <div class=\"message-title\">\n        <!-- <span>当前作业任务</span> -->\n      </div>\n      <div class=\"time-axis\">\n        <!-- 轮播 -->\n        <div class=\"swiper-container\"   v-show=\"isShowBuild\">\n          <div class=\"swiper-wrapper\" >\n\n\n\n              <!-- 建造动态 -->\n            <div class=\"swiper-slide\"  v-for=\"building in buildingList\" :key=\"building.index\">\n              <div class=\"in-slide\">\n                <div class=\"in-slide-up\">\n                  <div class=\"in-slide-up-l\">\n                    <p class=\"in-slide-up-l-title\">进度总览（{{building.BuildingName}}）</p>\n                    <p class=\"in-slide-up-l-title-2\">\n                      <span class=\"in-slide-title-2\">任务总数：</span>\n                      <span class=\"in-slide-number\">{{building.TaskCount}}</span>\n                    </p>\n                    <p class=\"in-slide-up-l-title-3\">\n                      <span class=\"in-slide-title-2\">正常：</span>\n                      <span class=\"in-slide-number\">{{building.TaskNormal}}</span>\n                      <span class=\"in-slide-title-2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;滞后：</span>\n                      <span class=\"in-slide-number\">{{building.TaskLagging}}</span>\n                    </p>\n                  </div>\n                  <div class=\"in-slide-up-r\">\n                    <div class=\"in-slide-up-r-img\"></div>\n                  </div>\n                </div>\n\n                <div class=\"in-slide-down\">\n                  <p class=\"in-slide-down-title\">\n                    <span class=\"in-slide-title-2\">班组数量：</span>\n                    <span class=\"in-slide-number\">{{building.TeamCount}}</span>\n                    <span class=\"in-slide-title-2\">&nbsp;&nbsp;&nbsp;班组人数：</span>\n                    <span class=\"in-slide-number\">{{building.TeamNumber}}</span>\n                  </p>\n                </div>\n                <div class=\"in-slide-3-r\">\n                  <span class=\"tomore\" @click=\"toMore(building.BuildingName)\">查看更多&nbsp;≫</span>\n                </div>\n              </div>\n            </div>\n\n             <!-- <div class=\"swiper-slide\">\n              <div class=\"in-slide\">\n                <div class=\"in-slide-up\">\n                  <div class=\"in-slide-up-l\">\n                    <p class=\"in-slide-up-l-title\">当前作业任务</p>\n                    <p class=\"in-slide-up-l-title-2\">\n                      <span class=\"in-slide-title-2\">任务总数：</span>\n                      <span class=\"in-slide-number\">{{leng}}</span>\n                    </p>\n                    <p class=\"in-slide-up-l-title-3\">\n                      <span class=\"in-slide-title-2\">正常：</span>\n                      <span class=\"in-slide-number\">{{Normal}}</span>\n                      <span class=\"in-slide-title-2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;滞后：</span>\n                      <span class=\"in-slide-number\">{{lag}}</span>\n                    </p>\n                  </div>\n                  <div class=\"in-slide-up-r\">\n                    <div class=\"in-slide-up-r-img\"></div>\n                  </div>\n                </div>\n\n                <div class=\"in-slide-down\">\n                  <p class=\"in-slide-down-title\">\n                    <span class=\"in-slide-title-2\">班组数量：</span>\n                    <span class=\"in-slide-number\">{{curTaskList.classgroupCount}}</span>\n                    <span class=\"in-slide-title-2\">&nbsp;&nbsp;&nbsp;班组人数：</span>\n                    <span class=\"in-slide-number\">{{curTaskList.classmemberCount}}</span>\n                  </p>\n                </div>\n                <div class=\"in-slide-3-r\">\n                  <span class=\"tomore\" @click=\"toMore\">查看更多&nbsp;≫</span>\n                </div>\n              </div>\n            </div>\n\n           \n\n            <div class=\"swiper-slide\">\n              <div class=\"in-slide\">\n                <div class=\"in-slide-up\">\n                  <div class=\"in-slide-up-l\">\n                    <p class=\"in-slide-up-l-title\">当前作业任务</p>\n                    <p class=\"in-slide-up-l-title-2\">\n                      <span class=\"in-slide-title-2\">任务总数：</span>\n                      <span class=\"in-slide-number\">{{leng}}</span>\n                    </p>\n                    <p class=\"in-slide-up-l-title-3\">\n                      <span class=\"in-slide-title-2\">正常：</span>\n                      <span class=\"in-slide-number\">{{Normal}}</span>\n                      <span class=\"in-slide-title-2\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;滞后：</span>\n                      <span class=\"in-slide-number\">{{lag}}</span>\n                    </p>\n                  </div>\n                  <div class=\"in-slide-up-r\">\n                    <div class=\"in-slide-up-r-img\"></div>\n                  </div>\n                </div>\n\n                <div class=\"in-slide-down\">\n                  <p class=\"in-slide-down-title\">\n                    <span class=\"in-slide-title-2\">班组数量：</span>\n                    <span class=\"in-slide-number\">{{curTaskList.classgroupCount}}</span>\n                    <span class=\"in-slide-title-2\">&nbsp;&nbsp;&nbsp;班组人数：</span>\n                    <span class=\"in-slide-number\">{{curTaskList.classmemberCount}}</span>\n                  </p>\n                </div>\n              </div>\n            </div> -->\n\n            \n\n            \n          </div>\n        </div>\n\n\n        <!-- 分页器 -->\n        <div class=\"pagination\"  v-show=\"isShowBuild\">\n          <div class=\"swiper-pagination\"></div>\n        </div>\n\n        \n        <!-- 建造动态列表详情 -->\n        <div class=\"d-detail\" v-show=\"!messageSwitch\">\n          <p class=\"d-detail-p1\">\n            <span class=\"d-detail-p1-title\">当前作业任务列表</span>\n            <span class=\"d-line\"></span>\n            <span class=\"d-btn\" @click=\"toMore2\">切换</span>\n          </p>\n          <!-- 状态表 -->\n          <div class=\"state-table\">\n            <table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n              <thead>\n                <tr class=\"thead-style\">\n                  <th>任务名称</th>\n                  <th>计划完工时间</th>\n                  <th>状态</th>\n                </tr>\n              </thead>\n              <tbody class=\"data-tb\" v-if=\"curTaskList.length>0\">\n                <tr v-for=\"items in curTaskList\" :key=\"items.index\">\n                  <td>{{items.TaskName}}</td>\n                  <td>{{items.BaseFinishTime.split('T')[0]}}</td>\n                  <td style=\"color:#1EFFB7\" v-if=\"items.Status=='正常'\">正常</td>\n                  <td style=\"color:#FF5150\" v-else>滞后</td>\n                </tr>\n              </tbody>\n              <div class=\"defult-tb\" v-else>\n                <p>暂无数据</p>\n              </div>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 动态 -->\n    <div v-if=\"list.length>0\">\n      <div class=\"datas\" v-for=\"item in list\" :key=\"item.index\">\n        <div class=\"datas-in\">\n          <keep-alive>\n            <appraise\n              :name=\"item.PublishUserList[0].cUserName\"\n              :iphoto=\"item.PublishUserList[0].PhotoPath\"\n              :content=\"item.Dynamic.Problem\"\n              :WorkArea=\"item.Dynamic.WorkArea\"\n              :time=\"item.Dynamic.dCreateTime?item.Dynamic.dCreateTime.split('T')[0]:''\"\n              :type=\"item.Dynamic.Type\"\n              :part=\"item.Dynamic.Part\"\n              :photolist=\"item.PhotoList\"\n              :id=\"item.Dynamic.ID\"\n              :likelist=\"item.LikeList\"\n              :CurUserIsLiked=\"item.CurUserIsLike\"\n              :pathImages=\"pathImages\"\n            ></appraise>\n          </keep-alive>\n        </div>\n      </div>\n    </div>\n    <p class=\"defult-img\" v-else>\n      <img src=\"./imgs/defult.jpg\" alt=\"\"><br/>\n      <span class=\"defult-title\">暂无建造动态</span>\n    </p>\n    <!-- 底部导航 :likedanduser='islikedanduser[index]'-->\n    <!-- <div class=\"ifooter-placeholder\"></div> -->\n    <!-- <div class=\"ifooter\">\n      <ifooter/>\n    </div> -->\n    <!-- </vue-touch> -->\n  </div>\n</template>\n<script>\nimport appraise from \"./dynamic_components/appraise/appraise\";\nimport { GetConstruction, GetTaskList,QueryPublishList} from \"../../api/api.js\";\n// import { Message } from \"element-ui\";\nexport default {\n  data() {\n    return {\n      ProjectID:localStorage.getItem('projectid'),\n      buildingList:[],//建筑列表 \n      curTaskList: [], //当前作业任务列表\n      \n      leng:0,//长度\n      Normal:0,//正常数\n      lag:0,//滞后数\n      RiskLevel:'--',\n      ProjectPart:'--',\n      SourceName:'--',\n      CtrlMethod:'--',\n      name:'--',\n      PlanEndTime:'--',\n      Status:'--',\n      list: [], // 动态列表\n      now: \"--\", //今天的日期\n      islikedanduser: [], //每个动态的点赞用户和本人是否点赞\n      // CurUserIsLike:false,//本人是否已点赞\n      pageIndex: 1,\n      pageSize: 4,\n      flag: true, //禁上刷新时滑动\n      pathImages: [], //放大图片地址列表\n      messageSwitch: true, //切换上部分信息 0：轮播\n      isShowBuild:false,//是否显示卡片\n      isShowBuildLoading:true,//卡片加载中\n      initialSlide:0,//卡片索引\n      myswiper:{}\n    };\n  },\n  components: {\n    appraise\n  },\n  created() {\n    // this.load(); //调用加载中蒙层\n    // 页面tar状态\n    localStorage.setItem(\"index\", 1);\n    this.getList();\n    \n  },\n  methods: {\n    async getList() {\n      //卡片列表\n      const list = await this.Request(GetConstruction({ProjectID:this.ProjectID}))\n      if(list.StatusCode===200){\n        this.buildingList = list.Detiel\n        this.$nextTick(() => {\n        this.myswiper =  new this.$Swiper(\".swiper-container\", {\n            effect: \"coverflow\",\n            coverflowEffect: {\n              rotate: 0,\n              stretch: 0,\n              depth: 100,\n              modifier: 3,\n              slideShadows: false\n            },\n            pagination: {\n              el: \".swiper-pagination\",\n            }\n          });\n      });\n      }else{\n        this.buildingList = []\n      }\n      this.isShowBuild = true\n      this.isShowBuildLoading = false\n      \n      // 根据项目ID查询发布问题 动态列表\n      let params = {\n        ProjectID:localStorage.getItem('projectid'),\n        BuildName:this.buildingList[0].BuildingName,//默认第一个楼栋的动态\n        UserID:Number(localStorage.getItem('userId')),\n        page:1,\n        rows:5\n      }\n      this.queryPublishList(params)\n    },\n    /**\n     * 根据项目ID查询发布问题   动态列表\n     */\n    queryPublishList(params){\n      this.Request(QueryPublishList(params)).then(res=>{\n        console.log(res)\n      })\n    },\n    // 分页获取动态\n    async getScheduleList(pageIndex, pageSize) {\n      console.log(pageIndex, pageSize)\n      // this.load(); //调用加载中蒙层\n      // const ScheduleList = await this.Request(\n      //   GetList({ pageIndex, pageSize })\n      // );\n      // console.log(ScheduleList);\n      // if (ScheduleList.StatusCode == 300) {\n      //   this.$toast.clear(); // 清除蒙层\n      //   Message({ message: \"加载失败\", type: \"error\" });\n      // } else {\n      //   this.$toast.clear(); // 清除蒙层\n      //   console.log(JSON.stringify(ScheduleList.Detiel).length);\n      //   return ScheduleList.Detiel;\n      // }\n    },\n    async handleScroll(e) {\n      console.log(e);\n      // var scrollTop =\n      //   document.documentElement.scrollTop || document.body.scrollTop;\n      // if (typeof this.$refs.totalHeight.offsetHeight == undefined) {\n      //   return;\n      // }\n      // console.log(\"div高度\", this.$refs.totalHeight.offsetHeight);\n      // console.log(\"屏幕距离顶部距离\", scrollTop);\n      // console.log(\"屏幕高度：\", Number(localStorage.getItem(\"screenHeight\")));\n      // let pageTotalHeight = this.$refs.totalHeight.offsetHeight, //页面总高度\n      //   scrollTopDistance = scrollTop, //屏幕距离顶部距离\n      //   screenHeight = Number(localStorage.getItem(\"screenHeight\")); // 屏幕实际高度\n      // if (scrollTopDistance + 60 >= pageTotalHeight - screenHeight) {\n      //   if (this.flag) {\n      //     this.flag = false;\n      //     console.log(\"刷新\");\n      //     let l = await this.getScheduleList(this.pageIndex + 1, this.pageSize);\n      //     this.pageIndex++;\n      //     this.list.push(...l);\n      //     console.log(\"this.list\", this.list);\n      //     // 刷新加载，重新\n      //     this.pathImages = []; //清空\n      //     this.list.forEach(i => {\n      //       i.PhotoList.forEach(j => {\n      //         console.log(j.Path);\n      //         this.pathImages.push(j.Path);\n      //       });\n      //     });\n\n      //     this.flag = true;\n      //   }\n      // }\n    },\n\n    // 切换信息页面\n    toMore(BuildingName) {\n      console.log(\"切换信息页面\");\n      this.isShowBuildLoading = true\n      this.messageSwitch = !this.messageSwitch;\n      this.isShowBuild = !this.isShowBuild\n      // 根据项目id和楼栋名称获取任务列表（APP）\n      this.Request(GetTaskList({ProjectID:localStorage.getItem('projectid'),BuildingName})).then(res=>{\n        console.log(res)\n        if(res.StatusCode===200){\n          this.curTaskList = res.Detiel\n        }else{\n          this.$message({type:'error',message:'未获取数据',center:'true'})\n        }\n        this.isShowBuildLoading = false\n      })\n    },\n    // 切换信息页面\n    toMore2() {\n      console.log(\"切换信息页面\");\n      this.messageSwitch = !this.messageSwitch;\n      this.isShowBuild = !this.isShowBuild\n      // this.mySwiper.pagination.update()\n    }\n  }\n};\n</script>\n<style lang=\"stylus\" scoped>\n.container-dynamic-build\n  width 100%\n  background-color #F1F3F6\n  .title\n    width 100%\n    background-color white\n    height 80px\n    text-align center\n    color #333333\n    line-height 80px\n    font-size 36px\n  .message\n    background-color #2577E3\n    .message-title\n      width 100%\n      height 30px\n      text-align center\n      color white\n      line-height 60px\n      font-size 30px\n      font-weight 400\n    .time-axis\n      width 100%\n      height 366px\n      // overflow scroll\n      .swiper-slide\n        width: 750px !important;\n        height: 328px;\n        \n        .in-slide\n          position relative\n          width 580px\n          height 328px\n          margin 0 auto\n          background-color #FFFFFF\n          box-shadow:0px 14px 13px 0px rgba(0, 0, 0, 0.18);\n          border-radius:24px;\n          .in-slide-up\n            display flex\n            .in-slide-up-l\n              flex 1\n              padding-left 30px\n              padding-top 30px\n              border-bottom 1px solid #E5E5E5\n              \n              .in-slide-up-l-title-2\n                margin 30px 0\n                width 276px\n                padding-bottom 12px\n                border-bottom 1px solid #E5E5E5\n              .in-slide-up-l-title-3\n                padding-bottom 12px\n                \n            \n            .in-slide-up-r\n              width 190px\n              padding-top 23px\n              .in-slide-up-r-img\n                width 116px\n                height 127px\n                background-image url('./imgs/thumbnail.png')\n                background-repeat no-repeat\n                background-size:100% 100%;  \n          .in-slide-title-2\n            font-size:30px;\n            font-family:SourceHanSansCN-Regular;\n            font-weight:400;\n            color:rgba(51,51,51,1);\n          .in-slide-number\n            font-size:30px;\n            font-family:PingFang-SC-Heavy;\n            font-weight:800;\n            color:rgba(39,128,229,1);\n            line-height 30px\n          .in-slide-up-l-title\n            font-size:32px;\n            font-family:PingFang-SC-Bold;\n            font-weight:bold;\n            color:rgba(51,51,51,1);\n            line-height 32px\n          \n          .in-slide-down\n            padding-left 30px\n            .in-slide-down-title\n              margin-top 30px\n              \n          .mes\n            padding 30px 0 0 30px\n            .mes-p1\n              position relative\n              .level\n                display inline-block\n                position absolute\n                top -12px\n                right 0\n                width 200px\n                height 55px\n                .level-in\n                  display inline-block\n                  width 200px\n                  height 55px\n                  background-color #ffe3e3\n                  border-top-left-radius 50px\n                  border-bottom-left-radius 50px\n                  text-align center\n                  .level-t\n                    display inline-block\n                    font-size:30px;\n                    font-family:PingFang-SC-Medium;\n                    font-weight:500;\n                    color:rgba(51,51,51,1);\n                    line-height 30px\n                    padding  14px 0 0 10px\n            .mes-p2,.mes-p3,.mes-p4\n              padding-top 30px\n              padding-bottom 12px\n              border-bottom 1px solid #E5E5E5\n              width 520px\n\n          .in-slide-3\n            padding 30px 0 0 30px\n            display flex\n            .in-slide-3-l\n              flex 1\n              .m-1\n                span\n                  font-size:32px;\n                  font-family:PingFang-SC-Bold;\n                  font-weight:bold;\n                  color:rgba(51,51,51,1);\n                  line-height 32px\n              .m-2,.m-3,.m-4,.m-5\n                font-size:30px;\n                font-family:PingFang-SC-Medium;\n                color:rgba(51,51,51,1);\n                line-height 30px\n                margin-top 30px\n                .cent\n                  color #333333\n                  font-weight 700\n                .state\n                  display inline-block\n                  width 188px\n                  height 40px\n                  background:rgba(255,115,114,1);\n                  border-radius:10px;\n                  font-size:28px;\n                  font-family:PingFang-SC-Medium;\n                  font-weight:500;\n                  color:rgba(255,255,255,1);\n                  text-align center\n                  line-height 28px\n                  padding-top 6px\n          \n          .tomore\n            position absolute\n            right 34px\n            bottom 12px\n            font-size:30px;\n            white-space nowrap  \n            font-family:SourceHanSansCN-Regular;\n            font-weight:400;\n            color:rgba(100,147,247,1);  \n                    \n  .pagination\n    position relative\n    width 100%\n    height 40px      \n      \n  .d-detail\n    position relative\n    width 690px\n\n    margin 0 auto\n    top 0\n    .d-detail-p1\n      .d-detail-p1-title\n        font-size:30px;\n        font-family:PingFang-SC-Bold;\n        font-weight:bold;\n        color:rgba(43,66,96,1);\n        line-height 30px\n      .d-line\n        display inline-block\n        width 320px\n        height 2px\n        border-bottom 1px solid #80BDFC\n        margin 0 0 8px 8px\n      .d-btn\n        display inline-block\n        width 120px\n        height 58px\n        background:linear-gradient(33deg,rgba(46,185,236,1),rgba(41,134,231,1),rgba(52,124,211,1));\n        border-radius:29px;\n        font-size:30px;\n        font-family:PingFang-SC-Medium;\n        font-weight:500;\n        color:rgba(255,255,255,1);\n        line-height 58px\n        box-sizing border-box\n        // padding-top 24px\n        text-align center\n    .state-table\n      width 690px\n      margin 16px auto\n      height: 292px;\n      overflow: auto;\n      background:linear-gradient(-64deg,rgba(58,209,247,0.5),rgba(40,131,230,0.5));\n    .thead-style\n      \n      background-color rgba(255,255,255,0.38)\n      font-size:28px;\n      font-family:PingFang-SC-Medium;\n      font-weight:500;\n      color:rgba(255,255,255,1);\n      line-height 50px\n      height 50px\n      border none\n    .data-tb\n      tr\n        height 80px\n        text-align center\n        font-size:30px;\n        font-family:PingFang-SC-Medium;\n        font-weight:500;\n        color:rgba(255,255,255,1);\n        line-height 30px\n        padding-top 25px\n        td\n          border-bottom: 1px solid rgba(229,229,229,0.5)\n          line-height 80px\n    .defult-tb\n      position absolute\n      top 140px\n      width 100%\n      text-align center\n      color white\n      margin-top 20px\n      font-size 20px\n  \n  .datas\n    width 100%\n    margin-top 20px\n    .datas-in\n      width 100%\n      background-color white\n  .defult-img\n    width 100%\n    box-sizing border-box\n    padding-top 136px\n    text-align center\n    background-color: #f6f8fa;\n    img\n      display inline-block\n      width 350px\n      height 330px\n      margin 0 auto\n    .defult-title\n      text-align center\n      font-size:30px;\n      font-family:SourceHanSansCN-Regular;\n      font-weight:400;\n      color:rgba(172,178,190,1);\n      \n  .ifooter-placeholder\n    width 100%\n    height 120px\n  .ifooter\n    position fixed\n    bottom 0\n    left 0\n    width 100%\n    height 100px\n    background-color white\n</style>\n<style lang=\"stylus\">\n.van-toast__text\n  white-space nowrap\n  display inline-block\n.van-toast\n  padding 0 120px\n.van-switch\n  width 90px\n  height 50px\n  border 1px solid #9e9e9e\n.van-switch__node\n  width 50px\n  height 50px\n</style>\n<style>\n[class*=\" el-icon-\"],\n[class^=\"el-icon-\"] {\n  font-size: 30px;\n  color: #ff4350;\n}\n.message .swiper-pagination {\n  position: inherit;\n}\n.message .swiper-pagination-bullet-active {\n  background: #98c9ff !important;\n  width: 20px !important;\n  height: 10px !important;\n  border-radius: 5px !important;\n}\n.message .swiper-pagination-bullet {\n  background: #7db7f9;\n  opacity: 1;\n  margin-left: 16px;\n  width: 10px;\n  height: 10px;\n}\n</style>\n"],"sourceRoot":"src/components/dynamic"}]}