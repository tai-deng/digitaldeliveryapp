{"remainingRequest":"C:\\Users\\Public\\软件\\app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Public\\软件\\app\\src\\components\\index\\Range\\rangeManagement.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Public\\软件\\app\\src\\components\\index\\Range\\rangeManagement.vue","mtime":1557901385091},{"path":"C:\\Users\\Public\\软件\\app\\.babelrc","mtime":1553246877633},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1552270024016},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1552270044128}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getPurchaseList, getBuildList, getSpecialtyList, getFloorList, getChangeList, clearSel } from \"../../../assets/js/scopeManage.js\";\nexport default {\n  data: function data() {\n    return {\n      options: {\n        BuildName: \"\",\n        Specialty: \"\",\n        Floor: \"\",\n        Name: \"\",\n        page: 1,\n        rows: 5\n      },\n      rangeList: [],\n      ispull: true,\n      BuildNameList: [],\n      // 楼栋下拉\n      SpecialtyList: [],\n      // 专业下拉\n      FloorbyList: [],\n      // 楼层下拉\n      sel_show: false,\n      active: 0,\n      changeActive: 0,\n      activeNames: [\"0\"],\n      isLoading: false,\n      finished: false,\n      changeLoading1: false,\n      changeInished1: false,\n      changeLoading2: false,\n      changeInished2: false,\n      changeLoading3: false,\n      changeInished3: false,\n      ingChangePage: 1,\n      handleChangePage: 1,\n      overChangePage: 1,\n      //变更数据\n      dataIng: [],\n      dataHandle: [],\n      dataOver: []\n    };\n  },\n  created: function created() {\n    getPurchaseList(this);\n    getBuildList(this);\n  },\n  methods: {\n    getChangeData: function getChangeData(p) {\n      console.log(\"页面调用\");\n      getChangeList(this, p);\n    },\n    // tab\n    onActive: function onActive() {\n      this.options = {\n        BuildName: \"\",\n        Specialty: \"\",\n        Floor: \"\",\n        Name: \"\",\n        page: 1,\n        rows: 5\n      };\n      this.SpecialtyList = []; // 专业下拉\n\n      this.FloorbyList = [];\n\n      if (this.active == 1) {// this.dataIng = [];\n        // this.dataHandle = [];\n        // this.dataOver = [];\n        // getChangeList(this, 0);\n        // getChangeList(this, 1);\n        // getChangeList(this, 2);\n      } else {\n        this.rangeList = [];\n        getPurchaseList(this);\n      }\n    },\n    // 楼层选项\n    onSelFloor: function onSelFloor(e) {\n      this.options.Floor = e.text;\n    },\n    // 专业选项\n    onSelSpec: function onSelSpec(e) {\n      this.options.Specialty = e.text;\n    },\n    // 楼栋选项\n    onSelBuild: function onSelBuild(e) {\n      this.options.BuildName = e.text;\n    },\n    // 下拉加载\n    onRefresh: function onRefresh() {\n      // if (this.ispull) {\n      //   this.options.page = this.options.page += 1;\n      getPurchaseList(this); // } else {\n      //   let timer = setTimeout(() => {\n      //     this.isLoading = false;\n      //     clearTimeout(timer);\n      //     this.$message({\n      //       type: \"warning\",\n      //       message: \"已没有更多数据\",\n      //       center: \"true\"\n      //     });\n      //   }, 200);\n      // }\n    },\n    // 返回按钮\n    onClickLeft: function onClickLeft() {\n      this.$router.go(-1);\n    },\n    // 筛选按钮\n    onClickRight: function onClickRight() {\n      this.sel_show = !this.sel_show;\n    },\n    // 重置函数\n    resetFunc: function resetFunc() {\n      this.options = {\n        BuildName: \"\",\n        Specialty: \"\",\n        Floor: \"\",\n        Name: \"\",\n        page: 1,\n        rows: 5\n      };\n    },\n    // 确认选择\n    recordCheck: function recordCheck() {\n      this.options.page = 1;\n\n      if (this.active == 1) {\n        this.dataIng = [];\n        this.dataHandle = [];\n        this.dataOver = [];\n        getChangeList(this, 0);\n        getChangeList(this, 1);\n        getChangeList(this, 2);\n      } else {\n        this.rangeList = [];\n        getPurchaseList(this);\n      }\n    },\n    //搜索函数\n    searchFunc: function searchFunc() {\n      this.rangeList = [];\n      this.options.page = 1;\n      getPurchaseList(this);\n    },\n    // 变更数据处理\n    pushData: function pushData(data, func) {\n      data.Detiel.forEach(function (element) {\n        var item = {\n          Code: element.Code,\n          Building: element.Building ? element.Building : \"/\",\n          Specialty: element.Specialty ? element.Specialty : \"/\",\n          Floor: element.Floor ? element.Floor : \"/\",\n          Theme: element.Theme ? element.Theme : \"/\",\n          EndTime: element.EndTime ? require(\"moment\")(element.EndTime).format(\"YYYY/MM/DD\") : \"/\",\n          DoNum: element.DoNum + \"/\" + element.TotalDoNum,\n          ID: element.ID\n        };\n        func(item);\n      });\n    },\n    // 采购详情\n    onPurchase: function onPurchase(id) {\n      this.$router.push({\n        path: \"/purchaseDetails\",\n        query: {\n          id: id\n        }\n      });\n    },\n    // 变更详情\n    onChangeDetel: function onChangeDetel(id) {\n      this.$router.push({\n        path: \"/projectChangeDetails\",\n        query: {\n          id: id\n        }\n      });\n    }\n  },\n  watch: {\n    \"options.BuildName\": function optionsBuildName(val) {\n      if (val != \"\") {\n        clearSel(this, 1);\n        getSpecialtyList(this);\n      }\n    },\n    \"options.Specialty\": function optionsSpecialty(val) {\n      if (val != \"\") {\n        clearSel(this, 2);\n        getFloorList(this);\n      }\n    }\n  }\n};",{"version":3,"sources":["rangeManagement.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- Range Management 范围管理 -->\r\n<template>\r\n  <div class=\"container-material-purchasing\">\r\n    <div class=\"wrapper\" id=\"wrapper\">\r\n      <!-- 头部 -->\r\n      <van-nav-bar\r\n        title=\"范围管理\"\r\n        right-text=\"按钮\"\r\n        left-arrow\r\n        @click-left=\"onClickLeft\"\r\n        @click-right=\"onClickRight\"\r\n      >\r\n        <div class=\"nav_right\" slot=\"right\">\r\n          <img src=\"../../../assets/imgs/screen.png\" alt>\r\n        </div>\r\n      </van-nav-bar>\r\n      <!-- tab栏 -->\r\n      <van-tabs v-model=\"active\" :line-width=\"186\" :line-height=\"3\" @change=\"onActive\">\r\n        <van-tab title=\"采购列表\">\r\n          <!-- 采购列表 -->\r\n          <van-list\r\n            v-model=\"isLoading\"\r\n            :finished=\"finished\"\r\n            finished-text=\"没有更多了\"\r\n            :offset=\"100\"\r\n            @load=\"onRefresh\"\r\n            class=\"buy_lists\"\r\n          >\r\n            <van-cell class=\"li\" v-for=\"(item,index) in rangeList\" :key=\"index\">\r\n              <div class=\"lis_left\">\r\n                <span>采购批次：{{item.Code}}</span>\r\n                <span>发起日期:{{item.dCreateTime}}</span>\r\n                <span>需用日期:{{item.DemandTime}}</span>\r\n              </div>\r\n\r\n              <div class=\"lis_right\" @click=\"onPurchase(item.ID)\">\r\n                <button>采购详情</button>\r\n                <span>申请人:{{item.ApplyPersonName}}</span>\r\n              </div>\r\n            </van-cell>\r\n          </van-list>\r\n        </van-tab>\r\n        <van-tab title=\"变更列表\" class=\"change\">\r\n          <van-tabs v-model=\"changeActive\" type=\"card\">\r\n            <van-tab :title=\"`待接收（${dataIng.length}）`\">\r\n              <van-row justify=\"space-between\">\r\n                <van-col span=\"6\">编码</van-col>\r\n                <van-col span=\"2\">楼栋</van-col>\r\n                <van-col span=\"4\">专业</van-col>\r\n                <van-col span=\"2\">楼层</van-col>\r\n                <van-col span=\"5\">变更主题</van-col>\r\n                <van-col span=\"5\">截止日期</van-col>\r\n              </van-row>\r\n              <div class=\"change_content\">\r\n                <van-list\r\n                  v-model=\"changeLoading1\"\r\n                  :finished=\"changeInished1\"\r\n                  finished-text=\"没有更多了\"\r\n                  :offset=\"100\"\r\n                  @load=\"getChangeData(0)\"\r\n                  class=\"change_con_list active\"\r\n                >\r\n                  <van-row v-for=\"(item, index) in dataIng\" :key=\"index\">\r\n                    <div class=\"content-w\" @click.stop=\"onChangeDetel(item.ID)\">\r\n                      <van-col span=\"6\">{{item.Code}}</van-col>\r\n                      <van-col span=\"2\">{{item.Building}}</van-col>\r\n                      <van-col span=\"4\">{{item.Specialty}}</van-col>\r\n                      <van-col span=\"2\">{{item.Floor}}</van-col>\r\n                      <van-col span=\"5\">{{item.Theme}}</van-col>\r\n                      <van-col span=\"5\">{{item.EndTime}}</van-col>\r\n                    </div>\r\n                  </van-row>\r\n                </van-list>\r\n              </div>\r\n            </van-tab>\r\n            <van-tab :title=\"`处理中（${dataHandle.length}）`\">\r\n              <van-row justify=\"space-between\">\r\n                <van-col span=\"6\">编码</van-col>\r\n                <van-col span=\"2\">楼栋</van-col>\r\n                <van-col span=\"4\">专业</van-col>\r\n                <van-col span=\"2\">楼层</van-col>\r\n                <van-col span=\"5\">变更主题</van-col>\r\n                <van-col span=\"5\">截止日期</van-col>\r\n              </van-row>\r\n              <div class=\"change_content\">\r\n                <van-list\r\n                  v-model=\"changeLoading2\"\r\n                  :finished=\"changeInished2\"\r\n                  finished-text=\"没有更多了\"\r\n                  :offset=\"100\"\r\n                  @load=\"getChangeData(1)\"\r\n                  class=\"change_con_list active\"\r\n                >\r\n                  <van-row v-for=\"(item, index) in dataHandle\" :key=\"index\">\r\n                    <div class=\"content-w\" @click.stop=\"onChangeDetel(item.ID)\">\r\n                      <van-col span=\"6\">{{item.Code}}</van-col>\r\n                      <van-col span=\"2\">{{item.Building}}</van-col>\r\n                      <van-col span=\"4\">{{item.Specialty}}</van-col>\r\n                      <van-col span=\"2\">{{item.Floor}}</van-col>\r\n                      <van-col span=\"5\">{{item.Theme}}</van-col>\r\n                      <van-col span=\"5\">{{item.EndTime}}</van-col>\r\n                    </div>\r\n                  </van-row>\r\n                </van-list>\r\n              </div>\r\n            </van-tab>\r\n            <van-tab :title=\"`已处理（${dataOver.length}）`\">\r\n              <van-row justify=\"space-between\">\r\n                <van-col span=\"6\">编码</van-col>\r\n                <van-col span=\"2\">楼栋</van-col>\r\n                <van-col span=\"4\">专业</van-col>\r\n                <van-col span=\"2\">楼层</van-col>\r\n                <van-col span=\"5\">变更主题</van-col>\r\n                <van-col span=\"5\">截止日期</van-col>\r\n              </van-row>\r\n              <div class=\"change_content\">\r\n                <van-list\r\n                  v-model=\"changeLoading3\"\r\n                  :finished=\"changeInished3\"\r\n                  finished-text=\"没有更多了\"\r\n                  :offset=\"100\"\r\n                  @load=\"getChangeData(2)\"\r\n                  class=\"change_con_list active\"\r\n                >\r\n                  <van-row v-for=\"(item, index) in dataOver\" :key=\"index\">\r\n                    <div class=\"content-w\" @click.stop=\"onChangeDetel(item.ID)\">\r\n                      <van-col span=\"6\">{{item.Code}}</van-col>\r\n                      <van-col span=\"2\">{{item.Building}}</van-col>\r\n                      <van-col span=\"4\">{{item.Specialty}}</van-col>\r\n                      <van-col span=\"2\">{{item.Floor}}</van-col>\r\n                      <van-col span=\"5\">{{item.Theme}}</van-col>\r\n                      <van-col span=\"5\">{{item.EndTime}}</van-col>\r\n                    </div>\r\n                  </van-row>\r\n                </van-list>\r\n              </div>\r\n            </van-tab>\r\n          </van-tabs>\r\n        </van-tab>\r\n      </van-tabs>\r\n      <!-- 搜索模块 -->\r\n      <div class=\"search_model\">\r\n        <van-icon class=\"search_icon\" name=\"search\"></van-icon>\r\n        <input class=\"search_text\" type=\"text\" value=\"楼栋、专业、楼层、资源\" v-model=\"options.Name\">\r\n        <button class=\"search_btn\" @click.prevent=\"searchFunc\">搜索</button>\r\n      </div>\r\n\r\n      <!-- 筛选内容 -->\r\n      <div class=\"select_layer\" v-show=\"sel_show\">\r\n        <van-collapse v-model=\"activeNames\">\r\n          <van-collapse-item title=\"楼栋\" name=\"1\">\r\n            <div slot=\"icon\">\r\n              <img class=\"icon_down\" src=\"../../../assets/imgs/select_down.png\">\r\n            </div>\r\n            <ul>\r\n              <li\r\n                v-for=\"(item,index) in BuildNameList\"\r\n                :key=\"index\"\r\n                @click.stop=\"onSelBuild(item)\"\r\n              >{{item.text}}</li>\r\n            </ul>\r\n          </van-collapse-item>\r\n          <van-collapse-item title=\"专业\" name=\"2\">\r\n            <div slot=\"icon\">\r\n              <img class=\"icon_down\" src=\"../../../assets/imgs/select_down.png\">\r\n            </div>\r\n            <ul>\r\n              <li\r\n                v-for=\"(item,index) in SpecialtyList\"\r\n                :key=\"index\"\r\n                @click.stop=\"onSelSpec(item)\"\r\n              >{{item.text}}</li>\r\n            </ul>\r\n          </van-collapse-item>\r\n          <van-collapse-item title=\"楼层\" name=\"3\">\r\n            <div slot=\"icon\">\r\n              <img class=\"icon_down\" src=\"../../../assets/imgs/select_down.png\">\r\n            </div>\r\n            <ul>\r\n              <li\r\n                v-for=\"(item,index) in FloorbyList\"\r\n                :key=\"index\"\r\n                @click.stop=\"onSelFloor(item)\"\r\n              >{{item.text}}</li>\r\n            </ul>\r\n          </van-collapse-item>\r\n        </van-collapse>\r\n        <div class=\"btn\">\r\n          <button class=\"reset\" @click=\" resetFunc\">重置</button>\r\n          <div class=\"line\"></div>\r\n          <button class=\"check\" @click=\"recordCheck\">确认</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script type='textecmascript-6'>\r\nimport {\r\n  getPurchaseList,\r\n  getBuildList,\r\n  getSpecialtyList,\r\n  getFloorList,\r\n  getChangeList,\r\n  clearSel\r\n} from \"../../../assets/js/scopeManage.js\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      options: {\r\n        BuildName: \"\",\r\n        Specialty: \"\",\r\n        Floor: \"\",\r\n        Name: \"\",\r\n        page: 1,\r\n        rows: 5\r\n      },\r\n      rangeList: [],\r\n      ispull: true,\r\n      BuildNameList: [], // 楼栋下拉\r\n      SpecialtyList: [], // 专业下拉\r\n      FloorbyList: [], // 楼层下拉\r\n      sel_show: false,\r\n      active: 0,\r\n      changeActive: 0,\r\n      activeNames: [\"0\"],\r\n\r\n      isLoading: false,\r\n      finished: false,\r\n      changeLoading1: false,\r\n      changeInished1: false,\r\n      changeLoading2: false,\r\n      changeInished2: false,\r\n      changeLoading3: false,\r\n      changeInished3: false,\r\n      ingChangePage: 1,\r\n      handleChangePage: 1,\r\n      overChangePage: 1,\r\n\r\n      //变更数据\r\n      dataIng: [],\r\n      dataHandle: [],\r\n      dataOver: []\r\n    };\r\n  },\r\n  created() {\r\n    getPurchaseList(this);\r\n    getBuildList(this);\r\n  },\r\n  methods: {\r\n    getChangeData(p) {\r\n      console.log(\"页面调用\");\r\n      getChangeList(this, p);\r\n    },\r\n    // tab\r\n    onActive() {\r\n      this.options = {\r\n        BuildName: \"\",\r\n        Specialty: \"\",\r\n        Floor: \"\",\r\n        Name: \"\",\r\n        page: 1,\r\n        rows: 5\r\n      };\r\n      this.SpecialtyList = []; // 专业下拉\r\n      this.FloorbyList = [];\r\n      if (this.active == 1) {\r\n        // this.dataIng = [];\r\n        // this.dataHandle = [];\r\n        // this.dataOver = [];\r\n        // getChangeList(this, 0);\r\n        // getChangeList(this, 1);\r\n        // getChangeList(this, 2);\r\n      } else {\r\n        this.rangeList = [];\r\n        getPurchaseList(this);\r\n      }\r\n    },\r\n    // 楼层选项\r\n    onSelFloor(e) {\r\n      this.options.Floor = e.text;\r\n    },\r\n    // 专业选项\r\n    onSelSpec(e) {\r\n      this.options.Specialty = e.text;\r\n    },\r\n    // 楼栋选项\r\n    onSelBuild(e) {\r\n      this.options.BuildName = e.text;\r\n    },\r\n    // 下拉加载\r\n    onRefresh() {\r\n      // if (this.ispull) {\r\n      //   this.options.page = this.options.page += 1;\r\n      getPurchaseList(this);\r\n      // } else {\r\n      //   let timer = setTimeout(() => {\r\n      //     this.isLoading = false;\r\n      //     clearTimeout(timer);\r\n      //     this.$message({\r\n      //       type: \"warning\",\r\n      //       message: \"已没有更多数据\",\r\n      //       center: \"true\"\r\n      //     });\r\n      //   }, 200);\r\n      // }\r\n    },\r\n    // 返回按钮\r\n    onClickLeft() {\r\n      this.$router.go(-1);\r\n    },\r\n    // 筛选按钮\r\n    onClickRight() {\r\n      this.sel_show = !this.sel_show;\r\n    },\r\n    // 重置函数\r\n    resetFunc() {\r\n      this.options = {\r\n        BuildName: \"\",\r\n        Specialty: \"\",\r\n        Floor: \"\",\r\n        Name: \"\",\r\n        page: 1,\r\n        rows: 5\r\n      };\r\n    },\r\n    // 确认选择\r\n    recordCheck() {\r\n      this.options.page = 1;\r\n      if (this.active == 1) {\r\n        this.dataIng = [];\r\n        this.dataHandle = [];\r\n        this.dataOver = [];\r\n        getChangeList(this, 0);\r\n        getChangeList(this, 1);\r\n        getChangeList(this, 2);\r\n      } else {\r\n        this.rangeList = [];\r\n        getPurchaseList(this);\r\n      }\r\n    },\r\n    //搜索函数\r\n    searchFunc() {\r\n      this.rangeList = [];\r\n      this.options.page = 1;\r\n      getPurchaseList(this);\r\n    },\r\n    // 变更数据处理\r\n    pushData(data, func) {\r\n      data.Detiel.forEach(element => {\r\n        let item = {\r\n          Code: element.Code,\r\n          Building: element.Building ? element.Building : \"/\",\r\n          Specialty: element.Specialty ? element.Specialty : \"/\",\r\n          Floor: element.Floor ? element.Floor : \"/\",\r\n          Theme: element.Theme ? element.Theme : \"/\",\r\n          EndTime: element.EndTime\r\n            ? require(\"moment\")(element.EndTime).format(\"YYYY/MM/DD\")\r\n            : \"/\",\r\n          DoNum: element.DoNum + \"/\" + element.TotalDoNum,\r\n          ID: element.ID\r\n        };\r\n        func(item);\r\n      });\r\n    },\r\n    // 采购详情\r\n    onPurchase(id) {\r\n      this.$router.push({ path: \"/purchaseDetails\", query: { id } });\r\n    },\r\n    // 变更详情\r\n    onChangeDetel(id) {\r\n      this.$router.push({ path: \"/projectChangeDetails\", query: { id } });\r\n    }\r\n  },\r\n  watch: {\r\n    \"options.BuildName\"(val) {\r\n      if (val != \"\") {\r\n        clearSel(this, 1);\r\n        getSpecialtyList(this);\r\n      }\r\n    },\r\n    \"options.Specialty\"(val) {\r\n      if (val != \"\") {\r\n        clearSel(this, 2);\r\n        getFloorList(this);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang='stylus' scoped rel='stylesheet/stylus'>\r\n.container-material-purchasing {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.change_content .van-col {\r\n  overflow: hidden;\r\n}\r\n</style>\r\n<style lang=\"stylus\" rel=\"stylesheet/stylus\" >\r\n@import '../../../assets/stylus/variable';\r\n\r\n#wrapper {\r\n  width: 100%;\r\n  // height: 100%;\r\n  background-color: #fff;\r\n\r\n  // 头部样式\r\n  .van-nav-bar {\r\n    width: 100%;\r\n    height: 128px;\r\n    border-bottom: 1px solid #E5E5E5;\r\n\r\n    .van-nav-bar__title, .van-nav-bar__left, .van-nav-bar__right {\r\n      color: #000;\r\n      height: 87px;\r\n      padding-top: 41px;\r\n      line-height: 87px;\r\n      font-size: $font-size-title;\r\n      z-index: 10000;\r\n    }\r\n\r\n    .van-icon-arrow-left {\r\n      color: #000;\r\n      font-size: $font-size-title;\r\n    }\r\n\r\n    .van-nav-bar__text {\r\n      color: #000;\r\n      font-size: $font-size-title;\r\n    }\r\n\r\n    .nav_right {\r\n      img {\r\n        width: 41px;\r\n        height: 35px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .van-tab {\r\n    height: 88px;\r\n    border: none !important;\r\n  }\r\n\r\n  .change {\r\n    .van-tab--active {\r\n      background-color: #5892ff !important;\r\n      color: #fff !important;\r\n    }\r\n  }\r\n\r\n  .van-tabs {\r\n    height: 100%;\r\n\r\n    .change .van-tabs__content {\r\n      padding-top: 65px;\r\n    }\r\n\r\n    .van-tabs__content {\r\n      padding-top: 88px;\r\n    }\r\n\r\n    .van-tabs__wrap {\r\n      height: 88px;\r\n\r\n      .van-tabs__line {\r\n        background-color: $color-bgc-1;\r\n      }\r\n\r\n      .van-tab {\r\n        line-height: 88px;\r\n        color: #5892FF;\r\n        font-size: $font-size-28;\r\n      }\r\n    }\r\n\r\n    // tab栏内容样式\r\n    .van-tabs__content {\r\n      height: 100%;\r\n\r\n      .van-tab__pane {\r\n        height: 100%;\r\n      }\r\n    }\r\n  }\r\n\r\n  .van-tabs--line {\r\n    padding-top: 88px;\r\n  }\r\n\r\n  .search_model {\r\n    position: absolute;\r\n    top: 233px;\r\n    left: 24px;\r\n    z-index: 10;\r\n\r\n    .search_icon {\r\n      position: absolute;\r\n      top: 20px;\r\n      left: 28px;\r\n      font-size: 34px;\r\n    }\r\n\r\n    .search_text {\r\n      float: left;\r\n      width: 7.52rem;\r\n      height: 64px;\r\n      padding-left: 65px;\r\n      color: #999999;\r\n      background-color: #F5F5F5;\r\n      font-size: 28px;\r\n      box-sizing: border-box;\r\n    }\r\n\r\n    .search_btn {\r\n      float: right;\r\n      width: 120px;\r\n      height: 64px;\r\n      color: #fff;\r\n      background-color: #5892FF;\r\n      border: none;\r\n      border-radius: 8px;\r\n    }\r\n  }\r\n\r\n  // 采购栏样式\r\n  .buy_lists {\r\n    background-color: #F5F5F5;\r\n    height: calc(100vh - 345px);\r\n    padding: 20px 24px;\r\n    overflow-x: hidden;\r\n    overflow-y: auto;\r\n\r\n    .van-cell {\r\n      margin-bottom: 20px;\r\n      padding: 24px 20px;\r\n      box-sizing: border-box;\r\n      width: 702px;\r\n      height: 180px;\r\n      box-shadow: 0px 3px 7px 0px rgba(222, 234, 246, 0.75);\r\n      border-radius: 8px;\r\n\r\n      .van-cell__value {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        background: rgba(255, 255, 255, 1);\r\n      }\r\n\r\n      .lis_left {\r\n        span {\r\n          display: block;\r\n          font-size: $font-size-26;\r\n          color: #666666;\r\n        }\r\n\r\n        span:first-child {\r\n          font-size: $font-size-30;\r\n          margin-bottom: 20px;\r\n          margin-top: 10px;\r\n          color: #333333;\r\n        }\r\n\r\n        span:last-child {\r\n          margin-top: 15px;\r\n        }\r\n      }\r\n\r\n      .lis_right {\r\n        display: flex;\r\n        justify-content: center;\r\n        flex-direction: column;\r\n\r\n        button {\r\n          width: 180px;\r\n          height: 50px;\r\n          line-height: 50px;\r\n          font-size: $font-size-30;\r\n          color: #fff;\r\n          background: rgba(88, 146, 255, 1);\r\n          border: none;\r\n          border-radius: 8px;\r\n        }\r\n\r\n        span {\r\n          padding-top: 10px;\r\n          padding-left: 20px;\r\n          font-size: 24px;\r\n          color: #999999;\r\n          box-sizing: border-box;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // 变更\r\n  .change_lists {\r\n    background-color: #F5F5F5;\r\n    height: calc(100vh - 375px);\r\n\r\n    ul {\r\n      height: 100%;\r\n      overflow-y: auto;\r\n      overflow-x: hidden;\r\n    }\r\n  }\r\n\r\n  .select_layer {\r\n    position: fixed;\r\n    top: 126px;\r\n    right: 24px;\r\n    width: 352px;\r\n    box-sizing: border-box;\r\n    background-color: $color-bgc-2;\r\n    opacity: 0.9;\r\n    border-radius: 8px;\r\n    padding: 10px 20px;\r\n    z-index: 999;\r\n\r\n    .van-hairline--top-bottom::after {\r\n      border: none;\r\n    }\r\n\r\n    .van-hairline--top::after {\r\n      border-top: none;\r\n      border-bottom: 1px solid #737577;\r\n    }\r\n\r\n    .van-collapse {\r\n      max-height: 909px;\r\n      overflow-y: auto;\r\n    }\r\n\r\n    .van-collapse-item {\r\n      .van-collapse-item__title--expanded::after {\r\n        visibility: hidden;\r\n      }\r\n    }\r\n\r\n    .van-collapse-item:first-child {\r\n      border-bottom: 1px solid #737577;\r\n    }\r\n\r\n    .van-collapse-item__title {\r\n      height: 86px;\r\n      line-height: 86px;\r\n      height: 86px;\r\n      background-color: $color-bgc-2;\r\n\r\n      .van-cell__title {\r\n        font-size: 30px;\r\n        color: #fff;\r\n        text-align: left;\r\n      }\r\n\r\n      .van-cell__right-icon {\r\n        color: transparent;\r\n      }\r\n    }\r\n\r\n    .icon_down {\r\n      position: absolute;\r\n      top: 45px;\r\n      right: 30px;\r\n      width: 16px;\r\n      height: 11px;\r\n    }\r\n\r\n    .van-collapse-item__content {\r\n      pdding: 0;\r\n      background-color: $color-bgc-2;\r\n\r\n      .van-cell {\r\n        width: 100%;\r\n        background-color: $color-bgc-2;\r\n        color: #fff;\r\n      }\r\n\r\n      ul {\r\n        li {\r\n          height: 86px;\r\n          line-height: 86px;\r\n          height: 86px;\r\n          padding-left: 20px;\r\n          border-bottom: 1px solid #737577;\r\n        }\r\n\r\n        li:first-child {\r\n          background-color: #222934;\r\n          opacity: 0.9;\r\n        }\r\n      }\r\n    }\r\n\r\n    .btn {\r\n      width: 100%;\r\n      height: 88px;\r\n      padding: 19px 0;\r\n      box-sizing: border-box;\r\n\r\n      button {\r\n        width: 49%;\r\n        height: 50px;\r\n        line-height: 50px;\r\n        background-color: #222934;\r\n        color: #fff;\r\n        font-size: 30px;\r\n        text-align: center;\r\n        border: none;\r\n      }\r\n\r\n      .reset {\r\n        // border-right: 1px dashed #fff;\r\n      }\r\n\r\n      .line {\r\n        display: inline-block;\r\n        width: 0px;\r\n        height: 50px;\r\n        border-left: 2px dashed #fff;\r\n        vertical-align: top;\r\n      }\r\n    }\r\n  }\r\n\r\n  .select_layer:after {\r\n    position: absolute;\r\n    top: -0.379rem;\r\n    right: 0.186667rem;\r\n    content: '';\r\n    width: 0px;\r\n    height: 0px;\r\n    border: 15px solid transparent;\r\n    border-bottom: 15px solid $color-bgc-2;\r\n    z-index: 9999;\r\n  }\r\n\r\n  // 列表样式\r\n  .van-row {\r\n    text-align: center;\r\n    background-color: #5A92FF;\r\n    padding: 22px 0;\r\n    color: #FEFEFF;\r\n    font-size: 26px;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  .van-tabs__content {\r\n    .change_content {\r\n      .change_con_list {\r\n        .listHeader {\r\n          height: 50px;\r\n          line-height: 50px;\r\n          padding-left: 24px;\r\n          background: rgba(229, 238, 255, 1);\r\n          font-size: 24px;\r\n        }\r\n\r\n        .van-row {\r\n          position: relative;\r\n          background-color: #fff;\r\n          height: 78px;\r\n          // line-height: 56px;\r\n          color: #333333;\r\n          border-bottom: 1px solid #E5EEFF;\r\n        }\r\n\r\n        .van-row:last-child {\r\n          border-bottom: none;\r\n        }\r\n      }\r\n\r\n      // 左上角图标样式\r\n      .active {\r\n        .van-row:nth-child(2):before, .van-row:nth-child(3):before {\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          content: '';\r\n          width: 0;\r\n          height: 0;\r\n          border: 28px solid transparent;\r\n          border-top: 28px solid #5A92FF;\r\n          border-left: 28px solid #5A92FF;\r\n        }\r\n\r\n        .van-row:nth-child(2):after, .van-row:nth-child(3):after {\r\n          position: absolute;\r\n          top: 2px;\r\n          left: 5px;\r\n          content: '滞';\r\n          font-size: 20px;\r\n          color: #fff;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/index/Range"}]}