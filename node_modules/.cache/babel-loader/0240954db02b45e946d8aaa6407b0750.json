{"remainingRequest":"C:\\Users\\Public\\软件\\app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Public\\软件\\app\\src\\components\\user\\Modify.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Public\\软件\\app\\src\\components\\user\\Modify.vue","mtime":1557998374665},{"path":"C:\\Users\\Public\\软件\\app\\.babelrc","mtime":1553246877633},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1552270024016},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1552270044128}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { MdfUser, GetLoginUserInfo, GetRoleList as _GetRoleList, UpdateRole, SaveUserRole } from '@/api/api.js';\nexport default {\n  data: function data() {\n    return {\n      post: {},\n      operationCategory_show: false,\n      //部门下拉是否显示\n      operationCategory_columns: [{\n        value: '1',\n        text: '测试员'\n      }, {\n        value: '2',\n        text: '消防员'\n      }],\n      operationCategory: ''\n    };\n  },\n  created: function created() {\n    // var text=localStorage.getItem('loginUserInfo');\n    // this.post=JSON.parse(text).loginUserInfo;\n    // console.log(JSON.parse(text));\n    this.getLogin();\n    this.GetRoleList();\n  },\n  methods: {\n    onClickLeft: function onClickLeft() {\n      this.$router.back(-1);\n    },\n    //失去焦点的时候修改个人信息---部门/岗位？？  cRoleName\n    changeAll: function changeAll() {\n      var _this = this;\n\n      var projectid = localStorage.getItem('projectid');\n      var post = {\n        CurUserID: this.post.ID,\n        UserName: this.post.cUserName,\n        Name: this.post.cName,\n        Tel: this.post.cPhone,\n        Email: this.post.Email,\n        WeChatNo: this.post.WeChatNo,\n        iSys_Dep_ID: this.post.iSys_Dep_ID,\n        iSys_Company_ID: this.post.iSys_Company_ID,\n        ProjectID: projectid,\n        Building: this.post.Building,\n        UserType: this.post.iUpdator\n      };\n      this.Request(MdfUser(post)).then(function (res) {\n        if (res.StatusCode == '200') {\n          _this.$dialog.alert({\n            message: '修改成功！'\n          });\n        } else {\n          _this.$dialog.alert({\n            message: res.Message\n          });\n        }\n      });\n    },\n    //根据登陆者的id查询个人信息\n    getLogin: function getLogin() {\n      var _this2 = this;\n\n      var text = localStorage.getItem('userId');\n      this.Request(GetLoginUserInfo({\n        curUserId: text\n      })).then(function (res) {\n        if (res.StatusCode == '200') {\n          _this2.post = res.Detiel[0].loginUserInfo;\n          _this2.post.ProjectID = res.Detiel[0].loginUserRoles[0].ProjectID;\n        } else {\n          _this2.$dialog.alert({\n            message: res.Message\n          });\n        }\n      });\n    },\n    //点击选择部门\n    choiceDep: function choiceDep() {\n      if (!this.operationCategory_show) {\n        this.operationCategory_show = true;\n      } else {\n        this.operationCategory_show = false;\n      }\n    },\n    //选择部门\n    onOperationCategoryConfirm: function onOperationCategoryConfirm(value) {\n      this.post.cRoleName = value.id;\n      this.operationCategory = value.text;\n      this.UpdateRole();\n      this.operationCategory_show = false;\n    },\n    //取消选择部门\n    onOperationCategoryCancel: function onOperationCategoryCancel() {\n      this.operationCategory_show = false;\n    },\n    //获取所有的岗位列表\n    GetRoleList: function GetRoleList() {\n      var _this3 = this;\n\n      var projectid = localStorage.getItem('projectid');\n      this.Request(_GetRoleList({\n        ProjectID: projectid\n      })).then(function (res) {\n        if (res.StatusCode == '200') {\n          _this3.operationCategory_columns = res.Detiel; // this.operationCategory=this.post.cRoleName;\n          // var list=this.operationCategory_columns.filter(i=>{\n          //   i.id=this.post.cRoleName;\n          // })\n\n          console.log('岗位', res.Detiel); //cRoleName\n          //登录的时候，页面显示问题\n\n          for (var i = 0; i < _this3.operationCategory_columns.length; i++) {\n            if (_this3.operationCategory_columns[i].text == _this3.post.cRoleName) {\n              _this3.operationCategory = _this3.operationCategory_columns[i].text;\n            }\n          }\n\n          console.log('登录显示', _this3.post);\n        } else {\n          _this3.$dialog.alert({\n            message: res.Message\n          });\n        }\n      });\n    },\n    //修改角色  SaveUserRole ids角色id  uID用户 ID\n    UpdateRole: function UpdateRole() {\n      this.Request(SaveUserRole({\n        ids: this.post.cRoleName,\n        uID: this.post.ID,\n        isCancel: '1'\n      })).then(function (res) {\n        console.log(res);\n      });\n    }\n  }\n};",{"version":3,"sources":["Modify.vue"],"names":[],"mappings":"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","sourcesContent":["\n<!-- 设置页面 Modify -->\n<template>\n  <div class=\"container-Modify\">\n    <van-nav-bar title=\"个人信息\" left-arrow border @click-left=\"onClickLeft\"></van-nav-bar>\n    <van-cell-group>\n      <van-field v-model=\"post.cName\" clearable input-align=\"right\" @blur=\"changeAll\" label=\"姓名\"/>\n      <div class=\"line\"></div>\n      <van-field v-model=\"post.cPhone\" clearable input-align=\"right\" @blur=\"changeAll\" label=\"手机号\"/>\n      <div class=\"line\"></div>\n\n      <van-field v-model=\"post.cDepName\"  input-align=\"right\" readonly label=\"部门\"/>\n      \n\n      <div class=\"line\"></div>\n      <!-- <van-field v-model=\"post.cRoleName\" input-align=\"right\" readonly label=\"岗位\"/> -->\n      <van-field  label=\"岗位\" right-icon=\"arrow\" input-align=\"right\"  disabled  v-model=\"operationCategory\"  @click-right-icon=\"choiceDep\"/>\n      <div class=\"line\"></div>\n      <van-field v-model=\"post.WeChatNo\" clearable input-align=\"right\" @blur=\"changeAll\" label=\"微信号\"/>\n      <div class=\"line\"></div>\n      <van-field v-model=\"post.Email\" clearable input-align=\"right\" @blur=\"changeAll\" label=\"邮箱\"/>\n    </van-cell-group>\n\n\n    <van-popup v-model=\"operationCategory_show\" position=\"bottom\" class=\"iPopup\">\n          <van-picker\n            show-toolbar\n            title=\"岗位选择\"\n            :columns=\"operationCategory_columns\"\n            @cancel=\"onOperationCategoryCancel\"\n            @confirm=\"onOperationCategoryConfirm\"/>\n    </van-popup>\n  </div>\n</template>\n\n<script type='textecmascript-6'> \nimport {MdfUser,GetLoginUserInfo,GetRoleList,UpdateRole,SaveUserRole} from '@/api/api.js'\nexport default {\n  data() {\n    return {\n      post:{},\n      operationCategory_show:false,//部门下拉是否显示\n      operationCategory_columns:[{value:'1',text:'测试员'},{value:'2',text:'消防员'}],\n      operationCategory:'',\n    };\n  },\n  created(){\n    // var text=localStorage.getItem('loginUserInfo');\n    // this.post=JSON.parse(text).loginUserInfo;\n    // console.log(JSON.parse(text));\n    this.getLogin();\n    this.GetRoleList();\n  },\n  methods: {\n    onClickLeft() {\n      this.$router.back(-1);\n    },\n    //失去焦点的时候修改个人信息---部门/岗位？？  cRoleName\n    changeAll(){\n      var projectid=localStorage.getItem('projectid');\n      var post={\n        CurUserID:this.post.ID,\n        UserName:this.post.cUserName,\n        Name:this.post.cName,\n        Tel:this.post.cPhone,\n        Email:this.post.Email,\n        WeChatNo:this.post.WeChatNo,\n        iSys_Dep_ID:this.post.iSys_Dep_ID,\n        iSys_Company_ID:this.post.iSys_Company_ID,\n        ProjectID:projectid,\n        Building:this.post.Building,\n        UserType:this.post.iUpdator,\n      };\n      this.Request(MdfUser(post)).then(res=>{\n        if(res.StatusCode=='200'){\n           this.$dialog.alert({message:'修改成功！'});\n        }else{\n          this.$dialog.alert({message:res.Message});\n        }\n      })\n    },\n    //根据登陆者的id查询个人信息\n    getLogin(){\n      var text=localStorage.getItem('userId');\n      this.Request(GetLoginUserInfo({curUserId:text})).then(res=>{\n        if(res.StatusCode=='200'){\n          this.post=res.Detiel[0].loginUserInfo;\n          this.post.ProjectID=res.Detiel[0].loginUserRoles[0].ProjectID;\n        }else{\n          this.$dialog.alert({message:res.Message});\n        }\n      })\n    },\n    //点击选择部门\n    choiceDep(){\n      if (!this.operationCategory_show) {\n        this.operationCategory_show = true;\n      } else {\n        this.operationCategory_show = false;\n      }\n    },\n    //选择部门\n    onOperationCategoryConfirm(value) {\n      this.post.cRoleName = value.id;\n      this.operationCategory=value.text;\n      this.UpdateRole();\n      this.operationCategory_show = false;\n    },\n    //取消选择部门\n    onOperationCategoryCancel() {\n      this.operationCategory_show = false;\n    },\n    //获取所有的岗位列表\n    GetRoleList(){\n      var projectid=localStorage.getItem('projectid');\n      this.Request(GetRoleList({ProjectID:projectid})).then(res=>{\n        if(res.StatusCode=='200'){\n          this.operationCategory_columns=res.Detiel;\n          // this.operationCategory=this.post.cRoleName;\n          // var list=this.operationCategory_columns.filter(i=>{\n          //   i.id=this.post.cRoleName;\n          // })\n          console.log('岗位',res.Detiel); //cRoleName\n          //登录的时候，页面显示问题\n          for(var i=0;i<this.operationCategory_columns.length;i++){\n            if(this.operationCategory_columns[i].text==this.post.cRoleName){\n              this.operationCategory=this.operationCategory_columns[i].text;\n            }\n          }\n          console.log('登录显示',this.post);\n        }else{\n          this.$dialog.alert({message:res.Message});\n        }\n      })\n    },\n    //修改角色  SaveUserRole ids角色id  uID用户 ID\n    UpdateRole(){\n      this.Request(SaveUserRole({ids:this.post.cRoleName,uID:this.post.ID,isCancel:'1'})).then(res=>{\n        console.log(res);\n      })\n    },\n\n\n  }\n};\n</script>\n<style lang='stylus' scoped rel='stylesheet/stylus'>\n\n@import './user_assets/base.css';\n\n.container-Modify {\n  width: 100%;\n  height: 100%;\n  background: rgba(246, 248, 250, 1);\n\n  .line {\n    margin: 0 0.4rem 0 0.32rem;\n    height: 0.027rem;\n    background-color: #E5E5E5;\n  }\n\n  .van-cell {\n    height: 1.17rem;\n    background: rgba(255, 255, 255, 1);\n    font-size: 30px;\n    font-family: SourceHanSansCN-Regular;\n    font-weight: 400;\n    color: rgba(51, 51, 51, 1);\n    align-items: center;\n    padding: 0 0.4rem 0 0.32rem;\n  }\n}\n</style>"],"sourceRoot":"src/components/user"}]}