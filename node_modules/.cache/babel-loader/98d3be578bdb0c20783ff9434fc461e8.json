{"remainingRequest":"C:\\Users\\Public\\软件\\app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Public\\软件\\app\\src\\components\\issue\\daily\\daily.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Public\\软件\\app\\src\\components\\issue\\daily\\daily.vue","mtime":1558065367497},{"path":"C:\\Users\\Public\\软件\\app\\.babelrc","mtime":1553246877633},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1552270024016},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1552270044128}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { GetDictInfoList, GetAllUserList, GetBuilding, GetFloorbyBuilding, PublishRisk } from \"@/api/api.js\";\nexport default {\n  data: function data() {\n    return {\n      popupShow: false,\n      //弹出层是否显示\n      pickerLoading: false,\n      //是否显示加载状态\n      pickerTitle: \"\",\n      //顶部栏标题\n      value_key: \"\",\n      //选项对象中，文字对应的 key\n      columns: [],\n      //对象数组，配置每一列显示的数据\n      loadingBtm: false,\n      //提交按钮是否显示为加载状态\n      ProjectID: localStorage.getItem('projectid'),\n      //项目ID\n      userID: localStorage.getItem(\"userId\"),\n      //用户ID\n      isSelect: false,\n      actions: [],\n      show_initiation_time: false,\n      //选择时间默认隐藏\n      show_end_time: false,\n      //选择截止时间\n      show_type: false,\n      //选择问题类型\n      show_category: false,\n      //风险类型\n      show_receiver: false,\n      //接收人上拉菜单\n      valueTheme: '',\n      //输入主题\n      columnsType: [],\n      //问题类型\n      receiver: [],\n      //所有接收人\n      buildList: [],\n      //楼栋集合\n      floorList: [],\n      //楼层集合\n      // valueInitiation: '',//选择时间\n      // valueType: '',//选择问题类型\n      valueEnd: '',\n      //选择整改截止时间\n      minDate: new Date(),\n      //最小选择时间\n      loadingType: false,\n      form: {\n        theme: \"\",\n        //主题\n        qt: \"\",\n        //问题类型\n        initiator: JSON.parse(localStorage.getItem(\"loginUserInfo\")).loginUserInfo.cName,\n        //发起人\n        person: [],\n        //接收人\n        startTime: \"\",\n        //发起时间\n        describe: \"\",\n        //问题描述\n        completionTime: \"\",\n        //整改截止时间\n        category: 1,\n        //风险类型\n        building: \"\",\n        //楼栋\n        floor: \"\" //楼层\n\n      },\n      columnsCategory: [],\n      categoryList: [{\n        label: \"质量\",\n        value: 1\n      }, {\n        label: \"安全\",\n        value: 2\n      }],\n      categoryVal: \"\",\n      //风险类型名\n      personVal: [],\n      //接收人\n      photoList: []\n    };\n  },\n  // beforeRouteEnter(to, from, next) {\n  //   next(vm => {\n  //     if (localStorage.getItem(\"userId\") == \"\") {\n  //       vm.$router.push(\"/login\");\n  //     }\n  //   });\n  // },\n  created: function created() {\n    this.getBuildingData();\n  },\n  methods: {\n    toggleCheckbox: function toggleCheckbox(index, id) {\n      this.$refs.checkboxes[index].toggle();\n      this.form.person.push(id);\n    },\n\n    /**\n     * @name 获取问题类型\n     */\n    getQuestionType: function getQuestionType() {\n      var _this = this;\n\n      this.loadingType = true;\n      this.Request(GetDictInfoList({\n        ProjectID: localStorage.getItem(\"projectid\"),\n        DICode: \"风险类型\"\n      })).then(function (data) {\n        if (data.StatusCode === 200) {\n          if (data.Detiel.length > 0) {\n            for (var i = 0; i < data.Detiel.length; i++) {\n              _this.columnsType.push(data.Detiel[i].cDIValue);\n            }\n          } else {\n            _this.columnsType = [];\n\n            _this.$toast({\n              className: \"my-toast\",\n              type: \"fail\",\n              message: \"暂无数据！\"\n            });\n          } // for (let i = 0; i < data.Detiel.length; i++) {\n          //   let Option1 = {};\n          //   Option1.label = data.Detiel[i].cDIName;\n          //   Option1.value = data.Detiel[i].cDIValue;\n          //   this.questionType.push(Option1);\n          // }\n\n        } else {\n          _this.$toast({\n            className: \"my-toast\",\n            type: \"fail\",\n            message: data.Message\n          });\n        }\n      });\n      this.loadingType = false;\n    },\n\n    /**\n     * @name 获取接收人数据\n     */\n    getReceiver: function getReceiver() {\n      var _this2 = this;\n\n      this.Request(GetAllUserList({\n        projectId: this.ProjectID\n      })).then(function (data) {\n        if (data.StatusCode === 200) {\n          if (data.Detiel.length > 0) {\n            _this2.receiver = data.Detiel; // for (let i = 0; i < data.Detiel.length; i++) {\n            //   let Option1 = {};\n            //   Option1.label = data.Detiel[i].text;\n            //   Option1.value = data.Detiel[i].id;\n            //   this.receiver.push(Option1);\n            // }\n          } else {\n            _this2.receiver = [];\n\n            _this2.$toast({\n              className: \"my-toast\",\n              type: \"fail\",\n              message: \"暂无数据！\"\n            });\n          }\n        } else {\n          _this2.$toast({\n            className: \"my-toast\",\n            type: \"fail\",\n            message: data.Message\n          });\n        }\n      });\n    },\n\n    /**\n     * @name 获取模型的楼栋信息\n     */\n    getBuildingData: function getBuildingData() {\n      var _this3 = this;\n\n      this.pickerLoading = true;\n      this.Request(GetBuilding({\n        projectid: this.ProjectID\n      })).then(function (data) {\n        if (data.StatusCode === 200) {\n          if (data.Detiel.length > 0) {\n            _this3.buildList = data.Detiel;\n          } else {\n            _this3.buildList = [];\n          }\n        } else {\n          _this3.$toast({\n            className: \"my-toast\",\n            type: \"fail\",\n            message: data.Message\n          });\n        }\n      });\n      this.pickerLoading = false;\n    },\n\n    /**\n     * @name 根据楼栋获取模型的楼层\n     */\n    getFloorbyBuildingData: function getFloorbyBuildingData() {\n      var _this4 = this;\n\n      this.Request(GetFloorbyBuilding({\n        projectid: localStorage.getItem(\"projectid\"),\n        building: this.form.building\n      })).then(function (data) {\n        if (data.StatusCode === 200) {\n          if (data.Detiel.length > 0) {\n            _this4.floorList = data.Detiel;\n          } else {\n            _this4.floorList = [];\n          }\n        } else {\n          _this4.$toast({\n            className: \"my-toast\",\n            type: \"fail\",\n            message: data.Message\n          });\n        }\n      });\n    },\n\n    /**\n     * @name 选择风险类型\n     */\n    choseCategory: function choseCategory() {\n      this.show_category = true; // this.columnsCategory = [{values: this.categoryList}]\n\n      this.columnsCategory = [{\n        label: \"质量\",\n        value: 1\n      }, {\n        label: \"安全\",\n        value: 2\n      }];\n    },\n\n    /**\n     * @name 选择楼栋\n     */\n    choseBuilding: function choseBuilding() {\n      if (this.buildList == \"\") {\n        this.getBuildingData();\n      }\n\n      this.popupShow = true;\n      this.columns = this.buildList;\n      this.pickerTitle = \"楼栋\";\n      this.value_key = \"text\";\n    },\n\n    /**\n     * @name 选择楼层\n     */\n    choseFloor: function choseFloor() {\n      if (this.form.building == \"\") {\n        this.$toast({\n          className: \"my-toast\",\n          message: \"请先选择楼栋！\"\n        });\n        return;\n      }\n\n      this.popupShow = true;\n      this.columns = this.floorList;\n      this.pickerTitle = \"楼层\";\n      this.value_key = \"text\";\n    },\n    onConfirmCategory: function onConfirmCategory(value) {\n      this.form.category = value.value;\n      this.categoryVal = value.label;\n      this.show_category = false;\n    },\n    onSelect: function onSelect(v) {\n      this.isSelect = false;\n      var action = this.selAction;\n\n      switch (action) {\n        case \"buildingValue\":\n          {\n            this.typeValue = v.name;\n          }\n          break;\n\n        default:\n          break;\n      }\n    },\n    //返回\n    goBack: function goBack() {\n      this.$router.push({\n        path: \"/nav/to/index\"\n      });\n    },\n    //点击确认完成\n    complete: function complete() {\n      var _this5 = this;\n\n      this.loadingBtm = true;\n      var params = {\n        CurUserID: Number(this.userID),\n        //当前用户ID\n        ProjectID: this.ProjectID,\n        //项目ID\n        Subject: this.form.theme,\n        //主题\n        Category: this.form.category,\n        //风险类别 1：质量 2：安全\n        ProblemType: this.form.qt,\n        //问题类型\n        Initiator: Number(this.userID),\n        //发起人ID\n        InitiateTime: require('moment')(this.form.startTime).format('YYYY-MM-DD'),\n        //发起时间\n        Problem: this.form.describe,\n        //问题描述\n        DeadLine: require('moment')(this.form.completionTime).format('YYYY-MM-DD'),\n        //整改截止时间\n        listViewpoints: [],\n        //模型视点\n        PhotoList: this.photoList,\n        //上传问题照片\n        ReceiverList: this.form.person,\n        //接收人\n        Building: this.form.building,\n        //楼栋\n        Floor: this.form.floor //楼层\n        // console.log(\"风险-发布问题：\", params);\n\n      };\n      this.Request(PublishRisk(params)).then(function (data) {\n        // console.log(\"风险-\", data);\n        if (data.StatusCode === 200) {\n          _this5.$router.go(-1);\n\n          _this5.$toast({\n            className: \"my-toast\",\n            type: \"success\",\n            message: \"添加成功！\"\n          });\n        } else {\n          _this5.$toast({\n            className: \"my-toast\",\n            type: \"fail\",\n            message: data.Message\n          });\n        }\n\n        _this5.loadingBtm = false;\n      });\n    },\n    //点击问题类型确定\n    onConfirmType: function onConfirmType(value) {\n      // console.log(`当前值：${value}`);\n      this.form.qt = value;\n      this.show_type = false;\n    },\n    //点击发起时间确定\n    onConfirmInitiation: function onConfirmInitiation(value) {\n      console.log(\"\\u5F53\\u524D\\u503C\\uFF1A\".concat(value)); // this.valueInitiation = require('moment')(value).format('YYYY-MM-DD')\n\n      this.form.startTime = require('moment')(value).format('YYYY-MM-DD');\n      this.show_initiation_time = false;\n    },\n    //点击整改截止时间确定\n    onConfirmEnd: function onConfirmEnd(value) {\n      console.log(\"\\u5F53\\u524D\\u503C\\uFF1A\".concat(value));\n      this.form.completionTime = require('moment')(value).format('YYYY-MM-DD');\n      this.show_end_time = false;\n    },\n\n    /**\n     * @name 点击取消按钮时触发\n     */\n    onCancel: function onCancel() {\n      this.show_initiation_time = false;\n      this.show_end_time = false;\n      this.show_type = false;\n      this.show_category = false;\n    },\n\n    /**\n     * @name 点击完成按钮时触发\n     */\n    onConfirm: function onConfirm(value, index) {\n      switch (this.pickerTitle) {\n        case \"楼栋\":\n          {\n            this.form.building = value.text;\n            this.popupShow = false;\n            this.getFloorbyBuildingData();\n          }\n          break;\n\n        case \"楼层\":\n          {\n            this.form.floor = value.text;\n            this.popupShow = false;\n          }\n          break;\n\n        default:\n          break;\n      }\n    },\n    //选择发起时间\n    isShowInitiationTime: function isShowInitiationTime() {\n      this.show_initiation_time = true;\n    },\n    //选择整改截止时间\n    isShowEndTime: function isShowEndTime() {\n      this.show_end_time = true;\n    },\n    //选择问题类型\n    isShowType: function isShowType() {\n      this.show_type = true;\n      this.getQuestionType();\n    },\n\n    /**\n     * @name 打开接收人上拉菜单\n     */\n    openReceiver: function openReceiver() {\n      this.show_receiver = true;\n      this.getReceiver();\n    }\n  }\n};",{"version":3,"sources":["daily.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- daily日常巡检 -->\n<template>\n  <div class=\"container-daily my-vant\">\n    <!-- 头部 -->\n    <van-nav-bar title=\"日常巡检\" @click-left=\"goBack\" fixed :border=\"false\" :z-index=\"100\" class=\"my-nav-bar\">\n      <span class=\"el-icon-arrow-left fontsize\" slot=\"left\"></span>\n    </van-nav-bar>\n    <div class=\"Interlayer\"></div>\n    <div class=\"wrapper\">\n      <div class=\"details_box\">\n        <div class=\"details\">\n          <span>\n            主题：\n            <input type=\"text\" placeholder=\"请输入主题文字\" v-model=\"form.theme\">\n          </span>\n        </div>\n        <div class=\"details\" @click=\"isShowType\">\n          <span>\n            问题类型：\n            <input type=\"text\" placeholder=\"请选择问题类型\" v-model=\"form.qt\">\n            <span class=\"el-icon-arrow-right\"></span>\n          </span>\n        </div>\n        <!-- <van-cell-group class=\"details\" @click=\"choseCategory\">\n          <van-field\n            placeholder=\"请选择风险类型\"\n            label=\"风险类型：\"\n            label-width=\"80\"\n            right-icon=\"arrow\"\n            disabled\n            :value=\"categoryVal\"\n          />\n        </van-cell-group> -->\n        <van-row class=\"details\">\n          <van-col span=\"6\" class=\"my-radio-txt\">风险类型：</van-col>\n          <van-col span=\"18\">\n            <van-radio-group v-model=\"form.category\" class=\"my-radio-group\">\n              <van-radio :name=\"1\" class=\"my-radio\">质量</van-radio>\n              <van-radio :name=\"2\" class=\"my-radio\">安全</van-radio>\n            </van-radio-group>\n          </van-col>\n        </van-row>\n        <van-cell-group class=\"details\" @click=\"choseBuilding\">\n          <van-field\n            placeholder=\"请选择楼栋\"\n            label=\"楼栋：\"\n            right-icon=\"arrow\"\n            disabled\n            :value=\"form.building\"\n            class=\"my-field\"\n          />\n        </van-cell-group>\n        <van-cell-group class=\"details\" @click=\"choseFloor\">\n          <van-field\n            placeholder=\"请选择楼层\"\n            label=\"楼层：\"\n            right-icon=\"arrow\"\n            disabled\n            :value=\"form.floor\"\n            class=\"my-field\"\n          />\n        </van-cell-group>\n        <div class=\"details\">\n          <span>\n            发起人：\n            <span>{{form.initiator}}</span>\n          </span>\n          <!-- <van-cell-group>\n            <van-field v-model=\"form.initiator\" label=\"发起人：\" />\n          </van-cell-group> -->\n        </div>\n        <div class=\"details\" @click=\"isShowInitiationTime\">\n          <span>\n            发起时间：\n            <input type=\"text\" placeholder=\"请选择发起时间\" v-model=\"form.startTime\">\n            <span class=\"el-icon-arrow-right\"></span>\n          </span>\n        </div>\n        <div class=\"\">\n          <van-cell-group>\n            <van-field\n              v-model=\"form.describe\"\n              label=\"描述：\"\n              type=\"textarea\"\n              placeholder=\"请输入描述\"\n              rows=\"2\"\n              autosize\n            />\n          </van-cell-group>\n        </div>\n      </div>\n      <div class=\"picture upload\">\n        <p class=\"photo\">上传照片</p>\n        <div class=\"photo_img\">\n          <!-- <img class=\"photoImg\" src=\"../../../assets/imgs/storied_building.png\" alt> -->\n          <div class=\"Img\">\n            <img class=\"photoImg\" src=\"../../../assets/imgs/storied_building.png\" alt>\n            <van-icon name=\"clear\"/>\n          </div>\n          <div class=\"img\">\n            <img class=\"upload_photos\" src=\"../../../assets/imgs/upload_photos.png\" alt>\n          </div>\n          <span>最多上传3张</span>\n        </div>\n      </div>\n      <div class=\"details_box\">\n        <div class=\"details\" @click=\"openReceiver\">\n          <span>\n            接收人：\n            <input type=\"text\" placeholder=\"请选择接收人\" v-model=\"personVal\">\n            <span class=\"el-icon-arrow-right\"></span>\n          </span>\n        </div>\n        <div class=\"details details_border\" @click=\"isShowEndTime\">\n          <span>\n            整改截止时间：\n            <input type=\"text\" placeholder=\"请选择整改截止时间\" v-model=\"form.completionTime\">\n            <span class=\"el-icon-arrow-right\"></span>\n          </span>\n        </div>\n      </div>\n      <!-- <div class=\"confirm completion\" @click=\"complete\">确认</div> -->\n      <van-button size=\"large\" type=\"info\" @click=\"complete\" :loading=\"loadingBtm\" block class=\"confirm\">确认</van-button>\n    </div>\n    <!-- 问题类型 -->\n    <van-actionsheet v-model=\"show_type\">\n      <van-picker \n        show-toolbar \n        :columns=\"columnsType\" \n        :loading=\"loadingType\"\n        @confirm=\"onConfirmType\" \n        @cancel=\"onCancel\"\n        class=\"my-picker\"\n        />\n    </van-actionsheet>\n    <!-- 风险类型 -->\n    <van-actionsheet v-model=\"show_category\">\n      <van-picker \n        show-toolbar \n        :columns=\"columnsCategory\" \n        value-key=\"label\"\n        @confirm=\"onConfirmCategory\" \n        @cancel=\"onCancel\"/>\n    </van-actionsheet>\n    <!-- 发起时间 -->\n    <van-actionsheet v-model=\"show_initiation_time\">\n      <van-datetime-picker\n        type=\"date\"\n        :min-date=\"minDate\"\n        @confirm=\"onConfirmInitiation\"\n        @cancel=\"onCancel\"\n        class=\"my-picker\"\n      />\n    </van-actionsheet>\n    <!-- 整改截止时间 -->\n    <van-actionsheet v-model=\"show_end_time\">\n      <van-datetime-picker\n        type=\"date\"\n        :min-date=\"minDate\"\n        @confirm=\"onConfirmEnd\"\n        @cancel=\"onCancel\"\n        class=\"my-picker\"\n      />\n    </van-actionsheet>\n    <!-- 接收人 begin -->\n    <van-actionsheet v-model=\"show_receiver\" :close-on-click-overlay=\"true\" class=\"receiver\">\n      <van-checkbox-group v-model=\"personVal\">\n        <van-cell-group>\n          <van-cell\n            v-for=\"(item, index) in receiver\"\n            clickable\n            :key=\"item.id\"\n            :title=\"item.text\"\n            @click=\"toggleCheckbox(index, item.id)\"\n            class=\"my-cell\"\n          >\n            <van-checkbox :name=\"item.text\" ref=\"checkboxes\" class=\"my-checkbox\" shape=\"square\" />\n          </van-cell>\n        </van-cell-group>\n      </van-checkbox-group>\n    </van-actionsheet>\n    <!-- <van-popup v-model=\"show_receiver\" position=\"bottom\">\n      <van-checkbox-group v-model=\"form.person\">\n        <van-cell-group>\n          <van-cell\n            v-for=\"(item, index) in receiver\"\n            clickable\n            :key=\"item.id\"\n            :title=\"item.text\"\n            @click=\"toggleCheckbox(index)\"\n          >\n            <van-checkbox :name=\"item.text\" ref=\"checkboxes\" />\n          </van-cell>\n        </van-cell-group>\n      </van-checkbox-group>\n    </van-popup> -->\n    <!-- 接收人 end -->\n    <van-actionsheet v-model=\"isSelect\" :actions=\"actions\" @select=\"onSelect\"/>\n    <van-popup v-model=\"popupShow\" position=\"bottom\">\n      <van-picker\n        show-toolbar\n        :title=\"pickerTitle\"\n        :columns=\"columns\"\n        :loading=\"pickerLoading\"\n        :value-key=\"value_key\"\n        @cancel=\"popupShow = false\"\n        @confirm=\"onConfirm\"\n        class=\"my-picker\"\n      />\n    </van-popup>\n  </div>\n</template>\n\n<script type='textecmascript-6'>\nimport {\n  GetDictInfoList,\n  GetAllUserList,\n  GetBuilding,\n  GetFloorbyBuilding,\n  PublishRisk\n} from \"@/api/api.js\";\nexport default {\n  data() {\n    return {\n      popupShow: false,  //弹出层是否显示\n      pickerLoading: false,  //是否显示加载状态\n      pickerTitle: \"\",  //顶部栏标题\n      value_key: \"\",  //选项对象中，文字对应的 key\n      columns: [],  //对象数组，配置每一列显示的数据\n      loadingBtm: false,  //提交按钮是否显示为加载状态\n\n      ProjectID: localStorage.getItem('projectid'), //项目ID\n      userID: localStorage.getItem(\"userId\"), //用户ID\n      isSelect: false,\n      actions: [],\n      show_initiation_time: false, //选择时间默认隐藏\n      show_end_time: false,//选择截止时间\n      show_type: false,//选择问题类型\n      show_category: false,  //风险类型\n      show_receiver: false, //接收人上拉菜单\n      valueTheme: '',//输入主题\n      columnsType: [], //问题类型\n      receiver: [], //所有接收人\n      buildList: [],  //楼栋集合\n      floorList: [],  //楼层集合\n      // valueInitiation: '',//选择时间\n      // valueType: '',//选择问题类型\n      valueEnd: '',//选择整改截止时间\n      minDate: new Date(), //最小选择时间\n      loadingType: false,\n      form: {\n        theme: \"\",  //主题\n        qt: \"\",  //问题类型\n        initiator: JSON.parse(localStorage.getItem(\"loginUserInfo\")).loginUserInfo.cName,  //发起人\n        person: [],  //接收人\n        startTime: \"\",  //发起时间\n        describe: \"\",  //问题描述\n        completionTime: \"\",  //整改截止时间\n        category: 1,  //风险类型\n        building: \"\",  //楼栋\n        floor: \"\"  //楼层\n      },\n      columnsCategory: [],\n      categoryList: [{label: \"质量\", value: 1}, {label: \"安全\", value: 2}],\n      categoryVal: \"\",  //风险类型名\n      personVal: [],  //接收人\n      photoList: []\n    };\n  },\n  // beforeRouteEnter(to, from, next) {\n  //   next(vm => {\n  //     if (localStorage.getItem(\"userId\") == \"\") {\n  //       vm.$router.push(\"/login\");\n  //     }\n  //   });\n  // },\n  created(){\n    this.getBuildingData()\n  },\n  methods: {\n    toggleCheckbox(index, id){\n      this.$refs.checkboxes[index].toggle();\n      this.form.person.push(id)\n    },\n    /**\n     * @name 获取问题类型\n     */\n    getQuestionType() {\n      this.loadingType = true;\n      this.Request(GetDictInfoList({ProjectID:localStorage.getItem(\"projectid\"), DICode: \"风险类型\"})).then(data => {\n        if (data.StatusCode === 200) {\n          if(data.Detiel.length > 0){\n            for (let i = 0; i < data.Detiel.length; i++) {\n              this.columnsType.push(data.Detiel[i].cDIValue);\n            }\n          }else{\n            this.columnsType = [];\n            this.$toast({\n              className: \"my-toast\",\n              type: \"fail\",\n              message: \"暂无数据！\"\n            });\n          }\n          // for (let i = 0; i < data.Detiel.length; i++) {\n          //   let Option1 = {};\n          //   Option1.label = data.Detiel[i].cDIName;\n          //   Option1.value = data.Detiel[i].cDIValue;\n          //   this.questionType.push(Option1);\n          // }\n        } else {\n          this.$toast({\n            className: \"my-toast\",\n            type: \"fail\",\n            message: data.Message\n          });\n        }\n      });\n      this.loadingType = false;\n    },\n    /**\n     * @name 获取接收人数据\n     */\n    getReceiver() {\n      this.Request(\n        GetAllUserList({ projectId: this.ProjectID })\n      ).then(data => {\n        if (data.StatusCode === 200) {\n          if(data.Detiel.length > 0){\n            this.receiver = data.Detiel\n            // for (let i = 0; i < data.Detiel.length; i++) {\n            //   let Option1 = {};\n            //   Option1.label = data.Detiel[i].text;\n            //   Option1.value = data.Detiel[i].id;\n            //   this.receiver.push(Option1);\n            // }\n          }else{\n            this.receiver = [];\n            this.$toast({\n              className: \"my-toast\",\n              type: \"fail\",\n              message: \"暂无数据！\"\n            });\n          }\n        } else {\n          this.$toast({\n            className: \"my-toast\",\n            type: \"fail\",\n            message: data.Message\n          });\n        }\n      });\n    },\n    /**\n     * @name 获取模型的楼栋信息\n     */\n    getBuildingData() {\n      this.pickerLoading = true;\n      this.Request(\n        GetBuilding({ projectid: this.ProjectID })\n      ).then(data => {\n        if (data.StatusCode === 200) {\n          if (data.Detiel.length > 0) {\n            this.buildList = data.Detiel;\n          }else{\n            this.buildList = [];\n          }\n        } else {\n          this.$toast({\n            className: \"my-toast\",\n            type: \"fail\",\n            message: data.Message\n          });\n        }\n      });\n      this.pickerLoading = false;\n    },\n    /**\n     * @name 根据楼栋获取模型的楼层\n     */\n    getFloorbyBuildingData() {\n      this.Request(\n        GetFloorbyBuilding({\n          projectid: localStorage.getItem(\"projectid\"),\n          building: this.form.building,\n        })\n      ).then(data => {\n        if (data.StatusCode === 200) {\n          if (data.Detiel.length > 0) {\n            this.floorList = data.Detiel\n          } else {\n            this.floorList = [];\n          }\n        } else {\n          this.$toast({\n            className: \"my-toast\",\n            type: \"fail\",\n            message: data.Message\n          });\n        }\n      });\n    },\n    /**\n     * @name 选择风险类型\n     */\n    choseCategory(){\n      this.show_category = true\n      // this.columnsCategory = [{values: this.categoryList}]\n      this.columnsCategory = [{label: \"质量\", value: 1}, {label: \"安全\", value: 2}]\n    },\n    /**\n     * @name 选择楼栋\n     */\n    choseBuilding(){\n      if(this.buildList == \"\"){\n        this.getBuildingData()\n      }\n      this.popupShow = true;\n      this.columns = this.buildList;\n      this.pickerTitle = \"楼栋\";\n      this.value_key = \"text\"\n    },\n    /**\n     * @name 选择楼层\n     */\n    choseFloor(){\n      if (this.form.building == \"\") {\n        this.$toast({\n          className: \"my-toast\",\n          message: \"请先选择楼栋！\"\n        });\n        return;\n      }\n      this.popupShow = true;\n      this.columns = this.floorList;\n      this.pickerTitle = \"楼层\";\n      this.value_key = \"text\"\n    },\n    onConfirmCategory(value){\n      this.form.category = value.value\n      this.categoryVal = value.label\n      this.show_category = false\n    },\n    onSelect(v) {\n      this.isSelect = false;\n      let action = this.selAction;\n      switch (action) {\n        case \"buildingValue\":\n          {\n            this.typeValue = v.name;\n          }\n          break;\n      \n        default:\n          break;\n      }\n    },\n    //返回\n    goBack() {\n      this.$router.push({ path: \"/nav/to/index\" });\n    },\n    //点击确认完成\n    complete() {\n      this.loadingBtm = true;\n      let params = {\n        CurUserID: Number(this.userID),  //当前用户ID\n        ProjectID: this.ProjectID,  //项目ID\n        Subject: this.form.theme,  //主题\n        Category: this.form.category,  //风险类别 1：质量 2：安全\n        ProblemType: this.form.qt,  //问题类型\n        Initiator: Number(this.userID),  //发起人ID\n        InitiateTime: require('moment')(this.form.startTime).format('YYYY-MM-DD'),  //发起时间\n        Problem: this.form.describe,  //问题描述\n        DeadLine: require('moment')(this.form.completionTime).format('YYYY-MM-DD'),  //整改截止时间\n        listViewpoints: [],  //模型视点\n        PhotoList: this.photoList,  //上传问题照片\n        ReceiverList: this.form.person,  //接收人\n        Building: this.form.building,  //楼栋\n        Floor: this.form.floor  //楼层\n      }\n      // console.log(\"风险-发布问题：\", params);\n      this.Request(PublishRisk(params)).then(data => {\n        // console.log(\"风险-\", data);\n        if (data.StatusCode === 200) {\n          this.$router.go(-1);\n          this.$toast({\n            className: \"my-toast\",\n            type: \"success\",\n            message: \"添加成功！\"\n          });\n        } else {\n          this.$toast({\n            className: \"my-toast\",\n            type: \"fail\",\n            message: data.Message\n          });\n        }\n        this.loadingBtm = false;\n      });\n    },\n    //点击问题类型确定\n    onConfirmType(value) {\n      // console.log(`当前值：${value}`);\n      this.form.qt = value\n      this.show_type = false\n    },\n    //点击发起时间确定\n    onConfirmInitiation(value) {\n      console.log(`当前值：${value}`);\n      // this.valueInitiation = require('moment')(value).format('YYYY-MM-DD')\n      this.form.startTime = require('moment')(value).format('YYYY-MM-DD')\n      this.show_initiation_time = false;\n    },\n    //点击整改截止时间确定\n    onConfirmEnd(value) {\n      console.log(`当前值：${value}`);\n      this.form.completionTime = require('moment')(value).format('YYYY-MM-DD')\n      this.show_end_time = false\n    },\n    /**\n     * @name 点击取消按钮时触发\n     */\n    onCancel() {\n      this.show_initiation_time = false;\n      this.show_end_time = false\n      this.show_type = false\n      this.show_category = false\n    },\n    /**\n     * @name 点击完成按钮时触发\n     */\n    onConfirm(value, index){\n      switch (this.pickerTitle) {\n        case \"楼栋\":\n          {\n            this.form.building = value.text;\n            this.popupShow = false;\n            this.getFloorbyBuildingData()\n          }\n          break;\n        case \"楼层\":\n          {\n            this.form.floor = value.text;\n            this.popupShow = false;\n          }\n          break;\n      \n        default:\n          break;\n      }\n    },\n    //选择发起时间\n    isShowInitiationTime() {\n      this.show_initiation_time = true;\n    },\n    //选择整改截止时间\n    isShowEndTime() {\n      this.show_end_time = true\n    },\n    //选择问题类型\n    isShowType() {\n      this.show_type = true\n      this.getQuestionType()\n    },\n    /**\n     * @name 打开接收人上拉菜单\n     */\n    openReceiver(){\n      this.show_receiver = true\n      this.getReceiver()\n    }\n  }\n};\n</script>\n<style lang='stylus' scoped rel='stylesheet/stylus'>\n.container-daily\n  width 100%\n  height 100%\n  .van-nav-bar\n    // height 88px\n    // line-height 88px\n    // border-bottom 1px solid #E5E5E5\n    .fontsize\n      // font-size 42px\n      // color #333\n      // display inline-block\n      // vertical-align middle\n  .Interlayer\n    height 88px\n  .wrapper\n    .details_box\n      box-sizing border-box\n      padding 0 22px\n      background-color #fff\n      font-size 30px\n      color #333\n      .details\n        height 88px\n        line-height 88px\n        border-bottom 2px solid #E5E5E5\n        .el-icon-arrow-right\n          line-height 88px\n          float right\n      .details_border\n        border 0\n      .describe\n        padding 25px 0 20px\n        .describe_content\n          display inline-block\n          width 100%\n          line-height 50px\n    .picture\n      box-sizing border-box\n      padding 0 22px 25px\n      font-size 30px\n      font-weight 500\n      color #333\n      .photo\n        line-height 90px\n        font-weight bold\n      .photo_img\n        .photoImg\n          margin-right 45px\n          width 200px\n          height 200px\n        .photoImg:nth-child(3n)\n          margin 0\n        .Img\n          display inline-block\n          border-radius 8px\n          margin-right 45px\n          width 200px\n          height 200px\n          text-align center\n          line-height 200px\n          vertical-align bottom\n          position relative\n          .van-icon\n            position absolute\n            width 20px\n            height 20px\n            top -10px\n            right 0\n            color #FF3366\n        .img\n          display inline-block\n          border 2px solid #BDC1C6\n          border-radius 8px\n          margin-right 8px\n          width 200px\n          height 200px\n          text-align center\n          line-height 200px\n          vertical-align bottom\n          .upload_photos\n            width 36px\n            height 36px\n        span\n          vertical-align bottom\n          color #999\n        .img:nth-child(3n)\n          margin 0\n    .confirm\n      width 702px\n      height 88px\n      line-height 88px\n      font-size 30px\n      margin 60px auto 40px\n      text-align center\n      background-color #5A93FF\n      border-radius 8px\n      color #fff\n    .completion_time\n      padding 30px 24px\n      font-size 30px\n      background-color #fff\n\n.container-daily .details_box .van-cell{\n  font-size 30px\n  padding 0\n  line-height 88px\n}\n.container-daily .receiver .van-checkbox{\n  // font-size 30px\n  // height 66px\n  // line-height 66px\n  // padding-left 20px\n}\n.container-daily .receiver.van-actionsheet{\n  max-height: 50%;\n}\n</style>\n<style>\n@import \"~@/assets/css/resetVant.css\";\n.container-daily .my-radio-group{\n  display: flex;\n  flex-direction: row;\n}\n.container-daily .my-radio {\n    margin-right: 50px;\n}\n</style>\n"],"sourceRoot":"src/components/issue/daily"}]}