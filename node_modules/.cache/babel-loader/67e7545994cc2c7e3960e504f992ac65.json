{"remainingRequest":"C:\\Users\\Public\\软件\\app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Public\\软件\\app\\src\\components\\user\\addFlow.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Public\\软件\\app\\src\\components\\user\\addFlow.vue","mtime":1557998374642},{"path":"C:\\Users\\Public\\软件\\app\\.babelrc","mtime":1553246877633},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\babel-loader\\lib\\index.js","mtime":1552270024016},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1552270042041},{"path":"C:\\Users\\Public\\软件\\app\\node_modules\\vue-loader\\lib\\index.js","mtime":1552270044128}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Public\\\\\\u8F6F\\u4EF6\\\\app\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _JSON$stringify from \"C:\\\\Users\\\\Public\\\\\\u8F6F\\u4EF6\\\\app\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/json/stringify\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { GetOrgList, GetDeptList, GetUserListByDept, GetLoginUserInfo } from \"@/api/api.js\";\nexport default {\n  data: function data() {\n    return {\n      isSelect: false,\n      actions: [],\n      selAction: null,\n      // 优先级\n      priorityValue: null,\n      // 责任单位\n      dutyValue: null,\n      //责任单位ID\n      OrgID: null,\n      // 岗位/部门\n      departmentValue: null,\n      // 岗位/部门ID\n      departmentID: null,\n      // 人员\n      majorValue: null,\n      // 优先级数据\n      uildingData: [{\n        id: 1,\n        name: \"优先级1\"\n      }, {\n        id: 2,\n        name: \"优先级2\"\n      }],\n      // 责任单位数据\n      dutyData: [],\n      // 岗位/部门数据\n      departmentData: [],\n      // 人员数据\n      majorData: [],\n      // 流程数据\n      flowData: [],\n      userID: localStorage.getItem(\"userId\"),\n      //用户ID\n      userInfo: null,\n      ProjectID: localStorage.getItem(\"projectid\"),\n      //项目ID\n\n      /**按进度计划是否为审核0/1 */\n      isAudit: {\n        type: String,\n        default: \"1\"\n      },\n      flowList: [],\n      editFlag: false //true 表示编辑  false 表示新增\n      // 添加表单对象\n      // filterForm: {\n      //   flowList: [],\n      //   Priority: 1,\n      //   OrgId: { id: \"\", text: \"\", OrgId: \"\" }, // 单位\n      //   DepId: { id: \"\", text: \"\", DepId: \"\" }, // 部门\n      //   Person: { id: \"\", text: \"\", Person: \"\" } // 人员\n      // }\n\n    };\n  },\n  props: {\n    origin: null\n  },\n  created: function created() {\n    this.OrgList(this.ProjectID);\n    this.LoginUserInfo(this.userID);\n    this.getParams();\n  },\n  methods: {\n    onClickLeft: function onClickLeft() {\n      this.$router.back(-1);\n    },\n    // 完成\n    onClickRight: function onClickRight() {\n      var _this = this;\n\n      this.flowList.forEach(function (item, index) {\n        //没有创建时间 是创建\n        item.ID = 1;\n        item.MasterID = 1;\n        item.Type = 1;\n        item.bDelFlag = true;\n        item.dCreateTime = require(\"moment\")().format(\"YYYY-MM-DD\");\n        item.dUpdateTime = require(\"moment\")().format(\"YYYY-MM-DD\");\n        item.iCreator = _this.userInfo.Person.id;\n        item.iUpdator = _this.userInfo.Person.id;\n        item.Priority = index + 1; // item.OrgId = item.OrgId.id\n        // item.DepId = item.DepId.id\n        // item.Person = item.Person.id\n      });\n\n      if (this.origin) {\n        this.$emit(\"onDone\", this.flowList);\n      } else {\n        this.$router.push({\n          path: \"/sponsorSee\",\n          query: {\n            done: true,\n            flowList: this.flowList\n          }\n        });\n      }\n    },\n    // 优先级事件\n    onpriority: function onpriority() {\n      this.isSelect = true;\n      this.actions = this.uildingData;\n      this.selAction = \"priorityValue\";\n    },\n    // 责任单位事件\n    onduty: function onduty() {\n      this.isSelect = true;\n\n      if (this.dutyData.length) {\n        this.actions = this.dutyData;\n      } else {\n        this.actions = [];\n      }\n\n      this.selAction = \"dutyValue\";\n    },\n    // 岗位/部门事件\n    ondepartment: function ondepartment() {\n      if (this.departmentValue === \"无数据\") {\n        return false;\n      }\n\n      this.isSelect = true;\n\n      if (this.departmentData.length) {\n        this.actions = this.departmentData;\n      } else {\n        // this.departmentValue = '无数据'\n        this.actions = [];\n      }\n\n      this.selAction = \"departmentValue\";\n    },\n    // 人员事件\n    onMajor: function onMajor() {\n      if (this.majorValue === \"无数据\") {\n        return false;\n      }\n\n      this.isSelect = true;\n\n      if (this.majorData.length) {\n        this.actions = this.majorData;\n      } else {\n        // this.majorValue = '无数据'\n        this.actions = [];\n      } // this.actions = this.majorData;\n\n\n      this.selAction = \"majorValue\";\n    },\n    // 上拉菜单\n    onSelect: function onSelect(v) {\n      this.isSelect = false;\n      var action = this.selAction;\n\n      if (action == \"typeValue\") {\n        this.typeValue = v.name;\n      } else if (action == \"priorityValue\") {\n        this.priorityValue = v.name;\n      } else if (action == \"dutyValue\") {\n        this.dutyValue = v.name;\n      } else if (action == \"departmentValue\") {\n        this.departmentValue = v.name;\n      } else if (action == \"majorValue\") {\n        this.majorValue = v.name;\n      }\n    },\n    // 添加\n    onPrimary: function onPrimary() {\n      console.log(\"添加\");\n\n      if (this.isAudit == 0 && this.flowList.length == 4) {\n        this.$message({\n          type: \"warning\",\n          message: \"该流程为4个人\",\n          center: \"true\"\n        });\n        return;\n      }\n\n      if (!this.dutyValue) {\n        this.$message({\n          type: \"warning\",\n          message: \"单位不能为空!\",\n          center: \"true\"\n        });\n        return;\n      } else if (!this.departmentValue) {\n        this.$message({\n          type: \"warning\",\n          message: \"部门不能为空!\",\n          center: \"true\"\n        });\n        return;\n      } else if (!this.majorValue) {\n        this.$message({\n          type: \"warning\",\n          message: \"人员不能为空!\",\n          center: \"true\"\n        });\n        return;\n      }\n\n      var OrgId = {\n        id: this.OrgID,\n        name: this.dutyValue,\n        OrgId: this.dutyValue\n      }; //责任单位\n\n      var DepId = {\n        id: this.departmentID,\n        name: this.departmentValue,\n        DepId: this.departmentValue\n      }; //岗位部门\n\n      var majorId = this.searchID(this.majorData, this.majorValue);\n      var Person = {\n        id: majorId,\n        name: this.majorValue,\n        Person: this.majorValue\n      };\n      var priority = this.searchID(this.uildingData, this.priorityValue);\n      var item = {\n        Priority: 0,\n        //优先级\n        OrgId: OrgId,\n        //责任单位\n        DepId: DepId,\n        //岗位部门\n        Person: Person,\n        //人员\n        Status: 0\n      };\n      console.log(priority);\n\n      if (priority === 1) {\n        //  priority -= 1\n        var num = -1;\n        this.flowList.forEach(function (it, index) {\n          var per = _JSON$stringify(it.Person);\n\n          var p = _JSON$stringify(item.Person);\n\n          if (p === per) {\n            num = index;\n          }\n        });\n        console.log(num);\n\n        if (num != -1) {\n          this.flowList.splice(num, 1);\n          this.uildingData.pop(this.uildingData.length - 1);\n        }\n\n        this.flowList.splice(priority, 0, item);\n      } else {\n        var _num = -1;\n\n        this.flowList.forEach(function (it, index) {\n          var per = _JSON$stringify(it.Person);\n\n          var p = _JSON$stringify(item.Person);\n\n          if (p === per) {\n            _num = index;\n          }\n        });\n        console.log(_num);\n\n        if (_num != -1) {\n          this.flowList.splice(_num, 1);\n          this.uildingData.pop(this.uildingData.length - 1);\n        }\n\n        this.flowList.splice(priority - 1, 0, item);\n      } // this.flowList.forEach((item,index)=>{\n      //   item.Priority = index+1\n      // })\n\n\n      var id = this.flowList.length + 1;\n      this.uildingData.push({\n        id: id,\n        name: \"\\u4F18\\u5148\\u7EA7\".concat(id)\n      });\n      console.log(this.flowList);\n    },\n    // 删除\n    onDelete: function onDelete(i) {\n      console.log(i);\n\n      if (i) {\n        this.flowList.splice(i, 1);\n        this.uildingData.pop(this.uildingData.length - 1);\n      } // this.flowList.forEach((item,index)=>{\n      //   item.Priority = index+1\n      // })\n\n    },\n    //查询对应ID函数\n    searchID: function searchID(dataList, val) {\n      var id = null;\n\n      if (dataList.length) {\n        dataList.forEach(function (item) {\n          if (item.name === val) {\n            id = item.ID || item.id;\n          }\n        });\n      }\n\n      return id;\n    },\n    //获取路由的参数\n    getParams: function getParams() {\n      var flowList = this.$route.query.flowList;\n      console.log(flowList);\n\n      if (flowList) {\n        // 编辑进入\n        this.flowList = flowList;\n        this.editFlag = true;\n        this.uildingData = [];\n\n        for (var i = 0; i <= this.flowList.length; i++) {\n          var uildIts = {\n            id: i + 1,\n            name: \"\\u4F18\\u5148\\u7EA7\".concat(i + 1)\n          };\n          this.uildingData.push(uildIts);\n        }\n      }\n    },\n\n    /**\r\n     * api接口\r\n     */\n    // 获取单位列表 type为单位类型(1:建设单位,2:勘察单位,3:设计单位,4:监理单位,5:施工单位,6:其他单位)\n    OrgList: function () {\n      var _OrgList = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(ProjectID) {\n        var res, dataArr;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.Request(GetOrgList({\n                  projectId: ProjectID\n                }));\n\n              case 2:\n                res = _context.sent;\n                console.log(res);\n\n                if (res.StatusCode === 200) {\n                  dataArr = res.Detiel;\n                  this.dutyData = JSON.parse(_JSON$stringify(dataArr).replace(/Name/g, \"name\"));\n\n                  if (this.dutyData.length === 0) {\n                    this.dutyValue = \"无数据\";\n                    this.departmentValue = \"无数据\";\n                    this.majorValue = \"无数据\";\n                  } else {\n                    this.dutyValue = null;\n                  }\n\n                  console.log(this.dutyData);\n                } else {\n                  this.$message({\n                    type: \"error\",\n                    message: res.Message,\n                    center: \"true\"\n                  });\n                }\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function OrgList(_x) {\n        return _OrgList.apply(this, arguments);\n      }\n\n      return OrgList;\n    }(),\n    // 按公司获取部门数据列表\n    DeptList: function () {\n      var _DeptList = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(orgId) {\n        var res, dataArr;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.Request(GetDeptList({\n                  orgId: orgId\n                }));\n\n              case 2:\n                res = _context2.sent;\n                console.log(res);\n\n                if (res.StatusCode === 200) {\n                  dataArr = res.Detiel;\n                  this.departmentData = JSON.parse(_JSON$stringify(dataArr).replace(/text/g, \"name\"));\n                  console.log(this.departmentData);\n\n                  if (this.departmentData.length === 0) {\n                    this.departmentValue = \"无数据\";\n                    this.majorValue = \"无数据\";\n                  } else {\n                    this.departmentValue = null;\n                  }\n                } else {\n                  this.$message({\n                    type: \"error\",\n                    message: res.Message,\n                    center: \"true\"\n                  });\n                }\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function DeptList(_x2) {\n        return _DeptList.apply(this, arguments);\n      }\n\n      return DeptList;\n    }(),\n    // 根据项目ID和单位ID以及部门ID获取人员列表\n    UserListByDept: function () {\n      var _UserListByDept = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var data, res, dataArr;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                data = {\n                  projectId: this.ProjectID,\n                  orgId: this.OrgID,\n                  deptId: this.departmentID\n                };\n                _context3.next = 3;\n                return this.Request(GetUserListByDept(data));\n\n              case 3:\n                res = _context3.sent;\n                console.log(res);\n\n                if (res.StatusCode === 200) {\n                  dataArr = res.Detiel;\n                  this.majorData = JSON.parse(_JSON$stringify(dataArr).replace(/text/g, \"name\"));\n                  console.log(this.majorData);\n\n                  if (this.majorData.length === 0) {\n                    this.majorValue = \"无数据\";\n                  } else {\n                    this.majorValue = null;\n                  }\n                } else {\n                  this.$message({\n                    type: \"error\",\n                    message: res.Message,\n                    center: \"true\"\n                  });\n                }\n\n              case 6:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function UserListByDept() {\n        return _UserListByDept.apply(this, arguments);\n      }\n\n      return UserListByDept;\n    }(),\n    // 获取当前登录用户详情接口\n    LoginUserInfo: function () {\n      var _LoginUserInfo = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4(userID) {\n        var res, item;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.Request(GetLoginUserInfo({\n                  curUserId: userID\n                }));\n\n              case 2:\n                res = _context4.sent;\n                console.log(res);\n\n                if (!(res.StatusCode === 200)) {\n                  _context4.next = 15;\n                  break;\n                }\n\n                item = res.Detiel[0].loginUserInfo;\n                this.userInfo = {\n                  OrgId: {\n                    name: item.WeChatNo,\n                    id: item.iSys_Company_ID\n                  },\n                  DepId: {\n                    name: item.cDepName,\n                    id: item.iSys_Dep_ID\n                  },\n                  Person: {\n                    name: item.cName,\n                    id: item.ID\n                  },\n                  Status: 4\n                };\n\n                if (!this.editFlag) {\n                  _context4.next = 11;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", false);\n\n              case 11:\n                this.flowList.push(this.userInfo);\n                console.log(this.flowList);\n\n              case 13:\n                _context4.next = 16;\n                break;\n\n              case 15:\n                this.$message({\n                  type: \"error\",\n                  message: res.Message,\n                  center: \"true\"\n                });\n\n              case 16:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function LoginUserInfo(_x3) {\n        return _LoginUserInfo.apply(this, arguments);\n      }\n\n      return LoginUserInfo;\n    }()\n  },\n  watch: {\n    dutyValue: function dutyValue(val) {\n      if (val === '无数据' || val === null) {\n        return false;\n      } //根据选择责任单位获取部门列表数据\n\n\n      this.OrgID = this.searchID(this.dutyData, val);\n      this.DeptList(this.OrgID);\n    },\n    departmentValue: function departmentValue(val) {\n      console.log(val);\n\n      if (val === '无数据' || val === null) {\n        return false;\n      } // 根据项目ID和单位ID以及部门ID获取人员列表\n\n\n      this.departmentID = this.searchID(this.departmentData, val);\n      console.log(this.departmentID);\n      this.UserListByDept();\n    }\n  }\n};",{"version":3,"sources":["addFlow.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- 编辑工作流程 addFlow -->\r\n<template>\r\n  <div class=\"container-addFlow\">\r\n    <van-nav-bar\r\n      title=\"编辑工作流程\"\r\n      left-arrow\r\n      border\r\n      @click-left=\"onClickLeft\"\r\n      @click-right=\"onClickRight\"\r\n    >\r\n      <div class=\"projectBnt\" slot=\"right\">完成</div>\r\n    </van-nav-bar>\r\n    <div class=\"content\">\r\n      <div class=\"project-content\">\r\n        <div class=\"addFlow-type flex-between item-s\" @click=\"onpriority\">\r\n          <div class=\"addFlow-type-l flex\">\r\n            <div class=\"addFlow-type-l-name text-font-have\">优先级：</div>\r\n            <div\r\n              class=\"addFlow-type-l-v\"\r\n              :class=\"[priorityValue?'text-font-have':'text-font-none']\"\r\n            >{{priorityValue?priorityValue:'请选择优先级'}}</div>\r\n          </div>\r\n          <div class=\"addFlow-type-arrow\">\r\n            <img src=\"./user_assets/imgs/arrow-right.png\">\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"addFlow-type flex-between item-s\" @click=\"onduty\">\r\n          <div class=\"addFlow-type-l flex\">\r\n            <div class=\"addFlow-type-l-name text-font-have\">责任单位：</div>\r\n            <div\r\n              class=\"addFlow-type-l-v\"\r\n              :class=\"[dutyValue?'text-font-have':'text-font-none']\"\r\n            >{{dutyValue?dutyValue:'请选择责任单位'}}</div>\r\n          </div>\r\n          <div class=\"addFlow-type-arrow\">\r\n            <img src=\"./user_assets/imgs/arrow-right.png\">\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"addFlow-type flex-between item-s\" @click=\"ondepartment\">\r\n          <div class=\"addFlow-type-l flex\">\r\n            <div class=\"addFlow-type-l-name text-font-have\">岗位/部门：</div>\r\n            <div\r\n              class=\"addFlow-type-l-v\"\r\n              :class=\"[departmentValue?'text-font-have':'text-font-none']\"\r\n            >{{departmentValue?departmentValue:'请选择岗位/部门'}}</div>\r\n          </div>\r\n          <div class=\"addFlow-type-arrow\">\r\n            <img src=\"./user_assets/imgs/arrow-right.png\">\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"addFlow-type flex-between item-s\" @click=\"onMajor\">\r\n          <div class=\"addFlow-type-l flex\">\r\n            <div class=\"addFlow-type-l-name text-font-have\">人员：</div>\r\n            <div\r\n              class=\"addFlow-type-l-v\"\r\n              :class=\"[majorValue?'text-font-have':'text-font-none']\"\r\n            >{{majorValue?majorValue:'请选择人员'}}</div>\r\n          </div>\r\n          <div class=\"addFlow-type-arrow\">\r\n            <img src=\"./user_assets/imgs/arrow-right.png\">\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"btn-warp\">\r\n        <van-button class=\"btn\" square type=\"primary\" block @click=\"onPrimary\">添加流程</van-button>\r\n      </div>\r\n\r\n      <div class=\"flow-content\">\r\n        <div class=\"flow-content-item flex\" v-for=\"(item,index) in flowList\" :key=\"index\">\r\n          <div class=\"flow-content-item-l flex-row\">\r\n            {{index+1}}\r\n            <div class=\"line\" v-if=\"index !== flowList.length-1\"></div>\r\n          </div>\r\n\r\n          <div class=\"flow-content-item-c flex\">\r\n            <div\r\n              class=\"flow-content-item-c-l flex-row flow-content-item-border\"\r\n            >{{item.Person.name}}</div>\r\n            <div class=\"flow-content-item-c-l flex-row flow-content-item-border\">{{item.OrgId.name}}</div>\r\n            <div class=\"flow-content-item-c-l flex-row\">{{item.DepId.name}}</div>\r\n            <div class=\"flow-content-item-c-triangle\">\r\n              <div class=\"flow-content-item-c-triangle-b\"></div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"flow-content-item-r\" @click=\"onDelete(index)\">\r\n            <img src=\"./user_assets/imgs/delete.png\">\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <van-actionsheet v-model=\"isSelect\" :actions=\"actions\" @select=\"onSelect\"/>\r\n  </div>\r\n</template>\r\n\r\n<script type='textecmascript-6'>\r\nimport {\r\n  GetOrgList,\r\n  GetDeptList,\r\n  GetUserListByDept,\r\n  GetLoginUserInfo\r\n} from \"@/api/api.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      isSelect: false,\r\n      actions: [],\r\n      selAction: null,\r\n      // 优先级\r\n      priorityValue: null,\r\n      // 责任单位\r\n      dutyValue: null,\r\n      //责任单位ID\r\n      OrgID: null,\r\n      // 岗位/部门\r\n      departmentValue: null,\r\n      // 岗位/部门ID\r\n      departmentID: null,\r\n      // 人员\r\n      majorValue: null,\r\n      // 优先级数据\r\n      uildingData: [\r\n        { id: 1, name: \"优先级1\" },\r\n        { id: 2, name: \"优先级2\" }\r\n      ],\r\n      // 责任单位数据\r\n      dutyData: [],\r\n      // 岗位/部门数据\r\n      departmentData: [],\r\n      // 人员数据\r\n      majorData: [],\r\n      // 流程数据\r\n      flowData: [],\r\n      userID: localStorage.getItem(\"userId\"), //用户ID\r\n      userInfo: null,\r\n      ProjectID: localStorage.getItem(\"projectid\"), //项目ID\r\n      /**按进度计划是否为审核0/1 */\r\n      isAudit: {\r\n        type: String,\r\n        default: \"1\"\r\n      },\r\n      flowList: [],\r\n      editFlag: false //true 表示编辑  false 表示新增\r\n      // 添加表单对象\r\n      // filterForm: {\r\n      //   flowList: [],\r\n      //   Priority: 1,\r\n      //   OrgId: { id: \"\", text: \"\", OrgId: \"\" }, // 单位\r\n      //   DepId: { id: \"\", text: \"\", DepId: \"\" }, // 部门\r\n      //   Person: { id: \"\", text: \"\", Person: \"\" } // 人员\r\n      // }\r\n    };\r\n  },\r\n  props: { origin: null },\r\n  created() {\r\n    this.OrgList(this.ProjectID);\r\n    this.LoginUserInfo(this.userID);\r\n    this.getParams();\r\n  },\r\n  methods: {\r\n    onClickLeft() {\r\n      this.$router.back(-1);\r\n    },\r\n    // 完成\r\n    onClickRight() {\r\n      this.flowList.forEach((item, index) => {\r\n        //没有创建时间 是创建\r\n        item.ID = 1;\r\n        item.MasterID = 1;\r\n        item.Type = 1;\r\n        item.bDelFlag = true;\r\n        item.dCreateTime = require(\"moment\")().format(\"YYYY-MM-DD\");\r\n        item.dUpdateTime = require(\"moment\")().format(\"YYYY-MM-DD\");\r\n        item.iCreator = this.userInfo.Person.id;\r\n        item.iUpdator = this.userInfo.Person.id;\r\n        item.Priority = index + 1;\r\n        // item.OrgId = item.OrgId.id\r\n        // item.DepId = item.DepId.id\r\n        // item.Person = item.Person.id\r\n      });\r\n      if (this.origin) {\r\n        this.$emit(\"onDone\", this.flowList);\r\n      } else {\r\n        this.$router.push({\r\n          path: \"/sponsorSee\",\r\n          query: { done: true, flowList: this.flowList }\r\n        });\r\n      }\r\n    },\r\n    // 优先级事件\r\n    onpriority() {\r\n      this.isSelect = true;\r\n      this.actions = this.uildingData;\r\n      this.selAction = \"priorityValue\";\r\n    },\r\n    // 责任单位事件\r\n    onduty() {\r\n      this.isSelect = true;\r\n      if (this.dutyData.length) {\r\n        this.actions = this.dutyData;\r\n      } else {\r\n        this.actions = [];\r\n      }\r\n      this.selAction = \"dutyValue\";\r\n    },\r\n    // 岗位/部门事件\r\n    ondepartment() {\r\n      if (this.departmentValue === \"无数据\") {\r\n        return false;\r\n      }\r\n      this.isSelect = true;\r\n      if (this.departmentData.length) {\r\n        this.actions = this.departmentData;\r\n      } else {\r\n        // this.departmentValue = '无数据'\r\n        this.actions = [];\r\n      }\r\n      this.selAction = \"departmentValue\";\r\n    },\r\n    // 人员事件\r\n    onMajor() {\r\n      if (this.majorValue === \"无数据\") {\r\n        return false;\r\n      }\r\n      this.isSelect = true;\r\n      if (this.majorData.length) {\r\n        this.actions = this.majorData;\r\n      } else {\r\n        // this.majorValue = '无数据'\r\n        this.actions = [];\r\n      }\r\n      // this.actions = this.majorData;\r\n      this.selAction = \"majorValue\";\r\n    },\r\n    // 上拉菜单\r\n    onSelect(v) {\r\n      this.isSelect = false;\r\n      let action = this.selAction;\r\n      if (action == \"typeValue\") {\r\n        this.typeValue = v.name;\r\n      } else if (action == \"priorityValue\") {\r\n        this.priorityValue = v.name;\r\n      } else if (action == \"dutyValue\") {\r\n        this.dutyValue = v.name;\r\n      } else if (action == \"departmentValue\") {\r\n        this.departmentValue = v.name;\r\n      } else if (action == \"majorValue\") {\r\n        this.majorValue = v.name;\r\n      }\r\n    },\r\n    // 添加\r\n    onPrimary() {\r\n      console.log(\"添加\");\r\n      if (this.isAudit == 0 && this.flowList.length == 4) {\r\n        this.$message({\r\n          type: \"warning\",\r\n          message: \"该流程为4个人\",\r\n          center: \"true\"\r\n        });\r\n        return;\r\n      }\r\n      if (!this.dutyValue) {\r\n        this.$message({\r\n          type: \"warning\",\r\n          message: \"单位不能为空!\",\r\n          center: \"true\"\r\n        });\r\n        return;\r\n      } else if (!this.departmentValue) {\r\n        this.$message({\r\n          type: \"warning\",\r\n          message: \"部门不能为空!\",\r\n          center: \"true\"\r\n        });\r\n        return;\r\n      } else if (!this.majorValue) {\r\n        this.$message({\r\n          type: \"warning\",\r\n          message: \"人员不能为空!\",\r\n          center: \"true\"\r\n        });\r\n        return;\r\n      }\r\n      let OrgId = {\r\n        id: this.OrgID,\r\n        name: this.dutyValue,\r\n        OrgId: this.dutyValue\r\n      }; //责任单位\r\n      let DepId = {\r\n        id: this.departmentID,\r\n        name: this.departmentValue,\r\n        DepId: this.departmentValue\r\n      }; //岗位部门\r\n      const majorId = this.searchID(this.majorData, this.majorValue);\r\n      let Person = {\r\n        id: majorId,\r\n        name: this.majorValue,\r\n        Person: this.majorValue\r\n      };\r\n      let priority = this.searchID(this.uildingData, this.priorityValue);\r\n      let item = {\r\n        Priority: 0, //优先级\r\n        OrgId, //责任单位\r\n        DepId, //岗位部门\r\n        Person, //人员\r\n        Status: 0\r\n      };\r\n      console.log(priority);\r\n      if (priority === 1) {\r\n        //  priority -= 1\r\n        let num = -1;\r\n        this.flowList.forEach((it, index) => {\r\n          let per = JSON.stringify(it.Person);\r\n          let p = JSON.stringify(item.Person);\r\n          if (p === per) {\r\n            num = index;\r\n          }\r\n        });\r\n        console.log(num);\r\n        if (num != -1) {\r\n          this.flowList.splice(num, 1);\r\n          this.uildingData.pop(this.uildingData.length - 1);\r\n        }\r\n        this.flowList.splice(priority, 0, item);\r\n      } else {\r\n        let num = -1;\r\n        this.flowList.forEach((it, index) => {\r\n          let per = JSON.stringify(it.Person);\r\n          let p = JSON.stringify(item.Person);\r\n          if (p === per) {\r\n            num = index;\r\n          }\r\n        });\r\n        console.log(num);\r\n        if (num != -1) {\r\n          this.flowList.splice(num, 1);\r\n          this.uildingData.pop(this.uildingData.length - 1);\r\n        }\r\n        this.flowList.splice(priority - 1, 0, item);\r\n      }\r\n\r\n      // this.flowList.forEach((item,index)=>{\r\n      //   item.Priority = index+1\r\n      // })\r\n      let id = this.flowList.length + 1;\r\n\r\n      this.uildingData.push({\r\n        id,\r\n        name: `优先级${id}`\r\n      });\r\n      console.log(this.flowList);\r\n    },\r\n    // 删除\r\n    onDelete(i) {\r\n      console.log(i);\r\n      if (i) {\r\n        this.flowList.splice(i, 1);\r\n        this.uildingData.pop(this.uildingData.length - 1);\r\n      }\r\n      // this.flowList.forEach((item,index)=>{\r\n      //   item.Priority = index+1\r\n      // })\r\n    },\r\n    //查询对应ID函数\r\n    searchID(dataList, val) {\r\n      let id = null;\r\n      if (dataList.length) {\r\n        dataList.forEach(item => {\r\n          if (item.name === val) {\r\n            id = item.ID || item.id;\r\n          }\r\n        });\r\n      }\r\n      return id;\r\n    },\r\n    //获取路由的参数\r\n    getParams() {\r\n      let flowList = this.$route.query.flowList;\r\n      console.log(flowList);\r\n      if (flowList) {\r\n        // 编辑进入\r\n        this.flowList = flowList;\r\n        this.editFlag = true;\r\n        this.uildingData = []\r\n        for(let i = 0; i<=this.flowList.length; i++){\r\n          let uildIts = {\r\n            id: i+1,\r\n            name: `优先级${i+1}`\r\n          }\r\n          this.uildingData.push(uildIts)\r\n        }\r\n      }\r\n    },\r\n    /**\r\n     * api接口\r\n     */\r\n    // 获取单位列表 type为单位类型(1:建设单位,2:勘察单位,3:设计单位,4:监理单位,5:施工单位,6:其他单位)\r\n    async OrgList(ProjectID) {\r\n      let res = await this.Request(GetOrgList({ projectId: ProjectID }));\r\n      console.log(res);\r\n      if (res.StatusCode === 200) {\r\n        let dataArr = res.Detiel;\r\n        this.dutyData = JSON.parse(\r\n          JSON.stringify(dataArr).replace(/Name/g, \"name\")\r\n        );\r\n        if (this.dutyData.length === 0) {\r\n          this.dutyValue = \"无数据\";\r\n          this.departmentValue = \"无数据\";\r\n          this.majorValue = \"无数据\";\r\n        } else {\r\n          this.dutyValue = null;\r\n        }\r\n        console.log(this.dutyData);\r\n      } else {\r\n        this.$message({\r\n          type: \"error\",\r\n          message: res.Message,\r\n          center: \"true\"\r\n        });\r\n      }\r\n    },\r\n    // 按公司获取部门数据列表\r\n    async DeptList(orgId) {\r\n      let res = await this.Request(GetDeptList({ orgId }));\r\n      console.log(res);\r\n      if (res.StatusCode === 200) {\r\n        let dataArr = res.Detiel;\r\n        this.departmentData = JSON.parse(\r\n          JSON.stringify(dataArr).replace(/text/g, \"name\")\r\n        );\r\n        console.log(this.departmentData);\r\n        if (this.departmentData.length === 0) {\r\n          this.departmentValue = \"无数据\";\r\n          this.majorValue = \"无数据\";\r\n        } else {\r\n          this.departmentValue = null;\r\n        }\r\n      } else {\r\n        this.$message({\r\n          type: \"error\",\r\n          message: res.Message,\r\n          center: \"true\"\r\n        });\r\n      }\r\n    },\r\n    // 根据项目ID和单位ID以及部门ID获取人员列表\r\n    async UserListByDept() {\r\n      let data = {\r\n        projectId: this.ProjectID,\r\n        orgId: this.OrgID,\r\n        deptId: this.departmentID\r\n      };\r\n      let res = await this.Request(GetUserListByDept(data));\r\n      console.log(res);\r\n      if (res.StatusCode === 200) {\r\n        let dataArr = res.Detiel;\r\n        this.majorData = JSON.parse(\r\n          JSON.stringify(dataArr).replace(/text/g, \"name\")\r\n        );\r\n        console.log(this.majorData);\r\n        if (this.majorData.length === 0) {\r\n          this.majorValue = \"无数据\";\r\n        } else {\r\n          this.majorValue = null;\r\n        }\r\n      } else {\r\n        this.$message({\r\n          type: \"error\",\r\n          message: res.Message,\r\n          center: \"true\"\r\n        });\r\n      }\r\n    },\r\n    // 获取当前登录用户详情接口\r\n    async LoginUserInfo(userID) {\r\n      let res = await this.Request(GetLoginUserInfo({ curUserId: userID }));\r\n      console.log(res);\r\n      if (res.StatusCode === 200) {\r\n        let item = res.Detiel[0].loginUserInfo;\r\n        this.userInfo = {\r\n          OrgId: { name: item.WeChatNo, id: item.iSys_Company_ID },\r\n          DepId: { name: item.cDepName, id: item.iSys_Dep_ID },\r\n          Person: { name: item.cName, id: item.ID },\r\n          Status: 4\r\n        };\r\n        if (this.editFlag) {\r\n          return false;\r\n        } else {\r\n          this.flowList.push(this.userInfo);\r\n          console.log(this.flowList);\r\n        }\r\n\r\n        // let dataArr = res.Detiel\r\n        // this.majorData= JSON.parse(JSON.stringify(dataArr).replace(/text/g,'name'))\r\n        // console.log(this.majorData)\r\n      } else {\r\n        this.$message({\r\n          type: \"error\",\r\n          message: res.Message,\r\n          center: \"true\"\r\n        });\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    dutyValue(val) {\r\n      if(val === '无数据'|| val === null){\r\n        return false\r\n      }\r\n      //根据选择责任单位获取部门列表数据\r\n      this.OrgID = this.searchID(this.dutyData, val);\r\n      this.DeptList(this.OrgID);\r\n    },\r\n    departmentValue(val) {\r\n      console.log(val);\r\n      if(val === '无数据'|| val === null){\r\n        return false\r\n      }\r\n      // 根据项目ID和单位ID以及部门ID获取人员列表\r\n      this.departmentID = this.searchID(this.departmentData, val);\r\n      console.log(this.departmentID);\r\n      this.UserListByDept();\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang='stylus' scoped rel='stylesheet/stylus'>\r\n@import './user_assets/base.css';\r\n\r\n.container-addFlow {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(246, 248, 250, 1);\r\n\r\n  .projectBnt {\r\n    height: 1.18rem;\r\n    line-height: 1.18rem;\r\n    font-size: 26px;\r\n    font-family: SourceHanSansCN-Regular;\r\n    font-weight: 400;\r\n    color: rgba(90, 146, 255, 1);\r\n  }\r\n\r\n  .btn-warp {\r\n    padding: 0.4rem 0.32rem;\r\n    background: rgba(246, 248, 250, 1);\r\n    border-bottom: 0.03rem solid #E5E5E5;\r\n  }\r\n\r\n  .content {\r\n    width: 100%;\r\n    height: calc(100% - 88px)\r\n    overflow-y: auto;\r\n    .flow-content {\r\n      padding: 0 0.32rem;\r\n\r\n      .flow-content-item {\r\n        margin-top: 0.4rem;\r\n\r\n        .flow-content-item-l {\r\n          width: 0.53rem;\r\n          height: 0.53rem;\r\n          border-radius: 50%;\r\n          background: rgba(59, 72, 95, 1);\r\n          font-size: 30px;\r\n          font-family: SourceHanSansCN-Medium;\r\n          font-weight: 500;\r\n          color: rgba(255, 255, 255, 1);\r\n          position: relative;\r\n          margin-right: 0.55rem;\r\n\r\n          .line {\r\n            position: absolute;\r\n            top: 0.64rem;\r\n            left: 0.23rem;\r\n            width: 0.05rem;\r\n            height: 0.83rem;\r\n            background-color: #979797;\r\n          }\r\n        }\r\n\r\n        .flow-content-item-c {\r\n          flex: 1;\r\n          font-size: 30px;\r\n          font-family: SourceHanSansCN-Medium;\r\n          font-weight: 500;\r\n          color: rgba(51, 51, 51, 1);\r\n          background: rgba(255, 255, 255, 1);\r\n          box-shadow: 0px 1px 4px 0px rgba(220, 226, 237, 1);\r\n          border-radius: 0.03;\r\n          height: 1.18rem;\r\n          position: relative;\r\n\r\n          .flow-content-item-c-triangle {\r\n            top: 0;\r\n            left: -0.3rem;\r\n            position: absolute;\r\n            height: 1.18rem;\r\n            width: 0.3rem;\r\n            overflow: hidden;\r\n\r\n            .flow-content-item-c-triangle-b {\r\n              position: absolute;\r\n              transform: rotate(45deg) !important;\r\n              -ms-transform: rotate(45deg) !important;\r\n              -moz-transform: rotate(45deg) !important;\r\n              -webkit-transform: rotate(45deg) !important;\r\n              -o-transform: rotate(45deg) !important;\r\n              background: rgba(255, 255, 255, 1);\r\n              box-shadow: 0px 1px 4px 0px rgba(220, 226, 237, 1);\r\n              height: 0.4rem;\r\n              width: 0.4rem;\r\n              top: 0.39rem;\r\n              left: 0.15rem;\r\n            }\r\n          }\r\n\r\n          .flow-content-item-c-l {\r\n            flex: 1;\r\n          }\r\n\r\n          .flow-content-item-border {\r\n            border-right: 0.03rem dashed #979797;\r\n          }\r\n        }\r\n\r\n        .flow-content-item-r {\r\n          margin-left: 0.56rem;\r\n\r\n          img {\r\n            width: 0.46rem;\r\n            height: 0.46rem;\r\n            display: block;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .addFlow-type-arrow img {\r\n      width: 0.24rem;\r\n      height: 0.43;\r\n      display: block;\r\n    }\r\n\r\n    .van-button--primary {\r\n      height: 1.18rem;\r\n      background: rgba(90, 147, 255, 1);\r\n      border-radius: 0.15rem;\r\n      font-size: 30px;\r\n      font-family: SourceHanSansCN-Medium;\r\n      font-weight: 500;\r\n      color: rgba(255, 255, 255, 1);\r\n    }\r\n\r\n    .item-s {\r\n      height: 1.18rem;\r\n      line-height: 1.18rem;\r\n      font-size: 30px;\r\n      font-family: SourceHanSansCN-Regular;\r\n      font-weight: 400;\r\n      color: rgba(51, 51, 51, 1);\r\n      border-bottom: 0.017rem solid #E5E5E5;\r\n      margin: 0 0.32rem;\r\n    }\r\n\r\n    .project-content {\r\n      background-color: #fff;\r\n    }\r\n  }\r\n\r\n  .text-font-have {\r\n    font-size: 30px;\r\n    font-family: SourceHanSansCN-Regular;\r\n    font-weight: 400;\r\n    color: rgba(51, 51, 51, 1);\r\n  }\r\n\r\n  .text-font-none {\r\n    font-size: 30px;\r\n    font-family: SourceHanSansCN-Regular;\r\n    font-weight: 400;\r\n    color: rgba(153, 153, 153, 1);\r\n  }\r\n\r\n  .van-popup .van-actionsheet__item {\r\n    height: 1.18rem !important;\r\n    line-height: 1.18rem !important;\r\n    font-size: 30px;\r\n  }\r\n  .addFlow-type-l {\r\n    width: 100%;\r\n  }\r\n  .addFlow-type-l-v {\r\n    \r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n  }\r\n  .addFlow-type-l-name {\r\n    width: 170px;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/user"}]}